{"version":3,"sources":["utils/i18n.js","utils/theme.js","navigation.js","utils/countries.js","text.js","prolific.js","matrix.js","submission.js","bart.js","utils/random.js","gonogo.js","utils/shuffle.js","stroop.js","components/allotmentBox.js","ultimatum.js","dictator.js","taskswitch.js","simplified_taskswitch.js","nback.js","gonogoalt.js","study.js","about.js","language_selector.js","router.js","index.js"],"names":["languages","title","direction","i18n","use","Backend","initReactI18next","init","lng","fallbackLng","debug","process","keySeparator","backend","loadPath","darkTheme","createMuiTheme","palette","type","primary","main","secondary","typography","fontFamily","join","rtlDarkTheme","ltrTheme","responsiveFontSizes","rtlTheme","Navigation","_ref","finished","redirectTo","onNext","t","useTranslation","_jsx","Grid","container","justifyContent","children","_jsxs","item","Button","variant","color","onClick","href","countries","code","label","phone","suggested","Text","content","onStore","onValidate","response","useRef","state","setState","useState","value","useEffect","_response$current","current","handleChange","e","resp","console","log","undefined","length","CountryAutoComplete","Autocomplete","id","options","autoHighlight","onChange","v","getOptionLabel","option","noOptionsText","renderOption","Fragment","isoCode","String","fromCodePoint","toUpperCase","replace","char","charCodeAt","renderInput","params","TextField","inputProps","autoComplete","className","spacing","alignItems","Markdown","source","text","escapeHtml","instruction","placeholder","fullWidth","target","Prolific","_content$content","query","URLSearchParams","useLocation","search","_content$paramNameAsC","fieldContent","getUrlContent","paramNameAsContent","get","defaultValue","ValueLabelComponent","props","open","Tooltip","enterTouchDelay","placement","arrow","Matrix","questions","choices","slider","showMidMark","values","Array","from","requiredQuestions","window","scrollTo","top","behavior","renderSlider","index","xs","Slider","valueLabelFormat","onChangeCommitted","step","min","max","valueLabelDisplay","justify","Math","floor","n_null","filter","i","includes","renderQuestion","q","RadioGroup","name","map","c","j","renderChoice","FormControlLabel","control","Radio","labelPlacement","reduce","q1","q2","Divider","random","toString","Submission","submission","studyId","submissionNote","submissionApi","submissionCode","isProlific","_resp$view","view","pid","findProlificId","resps","responses","ReactGA","event","category","action","fetch","method","mode","body","JSON","stringify","headers","then","json","respJson","catch","error","BART","reward","maxPumps","safePumps","trials","pumps","trial","totalScore","trialResponses","dialogIsOpen","taskStartedAt","Date","now","showTooltip","shuffle","a","randomNumbers","_","document","style","documentElement","taskFinishedAt","taskDuration","newTrial","cashed","randomNumber","score","result","balloonSize","rad","sqrt","PI","ceil","Dialog","onClose","disableBackdropClick","disableEscapeKeyDown","DialogTitle","DialogContent","DialogContentText","r","b","DialogActions","autoFocus","size","Typography","alignContent","cursor","width","height","transition","onInflate","isSafe","randomIndex","splice","onCashIn","sample","items","shuffled","slice","rnd","clock","GoNoGo","onProgress","stimuliDuration","fixationDuration","timeoutsBeforeReset","feedbackDuration","correct","stimuli","trialStartedAt","respondedAt","timeouts","handleKeyPress","key","keyCode","startTask","choice","empty","startsWith","go","nogo","handleResponse","addEventListener","removeEventListener","stim","total","keys","leftGo","left","clearTimeout","setTimeout","_correct","endsWith","renderStimulus","stimulus","Star","fontSize","Circle","trialType","orientation","flexItem","Correct","Incorrect","Add","Stroop","rule","colors","words","randomizeTrials","randomizeChoices","stimulusDuration","randomize","_trials","_t","Object","assign","rt","choiceWord","choiceColor","split","stimulusWord","stimulusColor","word","CorrectIcon","IncorrectIcon","renderChoices","ItemTypes","useStyles","makeStyles","theme","root","flexGrow","paper","padding","medium","large","grey","getContrastText","backgroundColor","tealDark","teal","blueG","blueGrey","height100","language","personsLangPrefix","RepositoryBox","memo","amount","onDrop","accept","person","personsPrefix","lang","useParams","classes","canDrop","isOver","drop","useDrop","collect","monitor","tokensList","push","MonetizedToken","boxName","Paper","ref","elevation","OpponentInfoBar","Avatar","getPersonKey","_ref2","_Fragment","avatar","alt","field1","src","component","field2","field3","_ref3","isDragging","drag","preview","useDrag","DragPreviewImage","connect","opacity","MonetizationOnIcon","Ultimatum","onNotification","tokens","useOpponentTypes","opponentTypes","dialogOptionalText","persons","boxes","setBoxes","accepts","shuffledPersons","setShuffledPersons","canFinishTrial","forEach","box","handleDrop","useCallback","fromBox","destBox","filterredPersons","filterPersonsByTags","tags","checkResult","inclue","checkPersonHasTags","_shuffledPersons$pers","playerShare","find","accepted","personIndex","minAcceptable","opponentShare","opponent","isTouchScreen","navigator","maxTouchPoints","msMaxTouchPoints","dndBackend","TouchBackend","HTML5Backend","disableTypography","decision","DndProvider","enableMouseEvents","finishTrialAction","Dictator","collectionState","matchmakingCompleted","setMatchmakingCompleted","matchmakingTimer","setMatchmakingTimer","timer","Container","display","flexDirection","minHeight","Box","CircularProgress","mt","paddingBottom","disabled","TaskSwitch","bottom","getCorrect","selectable","arguments","renderStimuliRow","pos","renderStimuli","SimplifiedTaskSwitch","stimuliProperties","figure","typeA","figureA","colorA","getCrorrectFromStimuli","draw","NBack","nback","iconFigures","star","circle","triangle","Triangle","rectangle","Rectangle","hand","Hand","ball","Ball","watch","Watch","school","School","cup","Cup","figureIndex","figureTotal","_state$stimuli","_state$stimuli2","selected","_state$stimuli3","_state$stimuli4","Block","FigureCompoentnt","textAlign","GoNoGoAlt","names","_state$stimuli$trialT","_state$stimuli2$trial","Study","initialize","responseIsValid","subject","session","progress","loading","currentViewIndex","experiment","notification","setNotification","storeData","data","autoNext","prev","updateViewProgress","currentViewProgressPct","currentViewProgress","views","_state$view$requiredQ","required","nextViewIndex","changeLanguage","startedAt","send","hitType","page","location","pathname","startExperiment","ThemeProvider","dir","CssBaseline","LinearProgress","maxWidth","Snackbar","autoHideDuration","Alert","severity","PROLIFIC_PID","STUDY_ID","SESSION_ID","renderView","About","LanguageSelector","entries","val","Link","to","AppRouter","Router","basename","Switch","Route","exact","path","ReactDOM","render","Suspense","fallback","I18nextProvider","getElementById"],"mappings":"6YAIO,MAAMA,EAAY,CACvB,GAAM,CAACC,MAAO,UAAWC,UAAW,OACpC,GAAM,CAACD,MAAO,iCAASC,UAAW,OAClC,GAAM,CAACD,MAAO,2BAAQC,UAAW,QAInCC,IACGC,IAAIC,KACJD,IAAIE,KACJC,KAAK,CAOJC,IAAK,KACLC,YAAa,KACbC,OAAOC,EACPC,cAAc,EACdC,QAAS,CACPC,SAAmC,2BAI1BX,QAAI,E,2HC5BnB,MAAMY,EAAYC,YAAe,CAC/BC,QAAS,CACPC,KAAM,OACNC,QAAS,CACPC,KAAM,WAERC,UAAW,CACTD,KAAM,YAGVE,WAAY,CACVC,WAAY,CACV,QACA,gBACA,qBACA,aACA,SACA,mBACA,QACA,aACA,sBACA,mBACA,qBACAC,KAAK,QAILC,EAAeT,YAAe,CAClCd,UAAW,MACXe,QAAS,CACPC,KAAM,OACNC,QAAS,CACPC,KAAM,WAERC,UAAW,CACTD,KAAM,YAGVE,WAAY,CACVC,WAAY,CACV,QACA,gBACA,qBACA,aACA,SACA,mBACA,QACA,aACA,sBACA,mBACA,qBACAC,KAAK,QAIEE,EAAWC,YAAoBZ,GAC/Ba,EAAWD,YAAoBF,G,6BCpD7B,SAASI,EAAUC,GAAkC,IAAjC,SAACC,EAAQ,WAAEC,EAAU,OAAEC,GAAOH,EAE/D,MAAM,EAACI,GAAKC,cAEZ,OACEC,cAACC,IAAI,CAACC,WAAS,EAACpC,UAAU,MAAMqC,eAAe,WAAUC,SACvDC,eAACJ,IAAI,CAACK,MAAI,EAAAF,SAAA,EACNT,GACAK,cAACO,IAAM,CAACC,QAAQ,YAAYC,MAAM,UAAUC,QAASb,EAAOO,SAAEN,EAAE,UAEjEH,GAAYC,GACXI,cAACO,IAAM,CAACC,QAAQ,YAAYC,MAAM,UAAUE,KAAMf,EAAWQ,SAAEN,EAAE,6BAM3E,C,uCCqOec,MA3PG,CAChB,CAAEC,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,uBAAwBC,MAAO,OACpD,CAAEF,KAAM,KAAMC,MAAO,cAAeC,MAAO,MAC3C,CAAEF,KAAM,KAAMC,MAAO,sBAAuBC,MAAO,SACnD,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,SACxC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,YAAaC,MAAO,MACzC,CAAEF,KAAM,KAAMC,MAAO,iBAAkBC,MAAO,SAC9C,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,MACvC,CAAEF,KAAM,KAAMC,MAAO,YAAaC,MAAO,KAAMC,WAAW,GAC1D,CAAEH,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,iBAAkBC,MAAO,OAC9C,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,yBAA0BC,MAAO,OACtD,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,SACxC,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,MACvC,CAAEF,KAAM,KAAMC,MAAO,eAAgBC,MAAO,OAC5C,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,mBAAoBC,MAAO,OAChD,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,SACvC,CAAEF,KAAM,KAAMC,MAAO,oBAAqBC,MAAO,OACjD,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,MACtC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,SACvC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,gBAAiBC,MAAO,MAC7C,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,IAAKC,WAAW,GACtD,CAAEH,KAAM,KAAMC,MAAO,0BAA2BC,MAAO,MACvD,CAAEF,KAAM,KAAMC,MAAO,oCAAqCC,MAAO,OACjE,CAAEF,KAAM,KAAMC,MAAO,2BAA4BC,MAAO,OACxD,CAAEF,KAAM,KAAMC,MAAO,yBAA0BC,MAAO,OACtD,CAAEF,KAAM,KAAMC,MAAO,cAAeC,MAAO,MAC3C,CAAEF,KAAM,KAAMC,MAAO,gBAAiBC,MAAO,OAC7C,CAAEF,KAAM,KAAMC,MAAO,eAAgBC,MAAO,OAC5C,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,MACrC,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,MACrC,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,MACxC,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,OAAQC,MAAO,MACpC,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,mBAAoBC,MAAO,MAChD,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,iBAAkBC,MAAO,OAC9C,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,KAAMC,WAAW,GACxD,CAAEH,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,MACvC,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,SACxC,CAAEF,KAAM,KAAMC,MAAO,qBAAsBC,MAAO,SAClD,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,MACrC,CAAEF,KAAM,KAAMC,MAAO,iBAAkBC,MAAO,OAC9C,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,MACrC,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,OAAQC,MAAO,OACpC,CAAEF,KAAM,KAAMC,MAAO,8BAA+BC,MAAO,OAC3D,CAAEF,KAAM,KAAMC,MAAO,kCAAmCC,MAAO,OAC/D,CAAEF,KAAM,KAAMC,MAAO,gBAAiBC,MAAO,OAC7C,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,KAAMC,WAAW,GACvD,CAAEH,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,iBAAkBC,MAAO,MAC9C,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,SACvC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,gBAAiBC,MAAO,OAC7C,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,MACxC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,YAAaC,MAAO,OACzC,CAAEF,KAAM,KAAMC,MAAO,YAAaC,MAAO,OACzC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,oBAAqBC,MAAO,OACjD,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,MACtC,CAAEF,KAAM,KAAMC,MAAO,+CAAgDC,MAAO,OAC5E,CAAEF,KAAM,KAAMC,MAAO,YAAaC,MAAO,OACzC,CAAEF,KAAM,KAAMC,MAAO,OAAQC,MAAO,SACpC,CAAEF,KAAM,KAAMC,MAAO,gBAAiBC,MAAO,OAC7C,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,YAAaC,MAAO,OACzC,CAAEF,KAAM,KAAMC,MAAO,oCAAqCC,MAAO,OACjE,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,MACvC,CAAEF,KAAM,KAAMC,MAAO,YAAaC,MAAO,MACzC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,cAAeC,MAAO,MAC3C,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,MACrC,CAAEF,KAAM,KAAMC,MAAO,iCAAkCC,MAAO,OAC9D,CAAEF,KAAM,KAAMC,MAAO,OAAQC,MAAO,OACpC,CAAEF,KAAM,KAAMC,MAAO,4BAA6BC,MAAO,MACzD,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,MACrC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,MACtC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,SACvC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,KAAMC,WAAW,GACtD,CAAEH,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,wBAAyBC,MAAO,SACrD,CAAEF,KAAM,KAAMC,MAAO,yCAA0CC,MAAO,OACtE,CAAEF,KAAM,KAAMC,MAAO,qBAAsBC,MAAO,MAClD,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,iBAAkBC,MAAO,SAC9C,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,KAC1C,CAAEF,KAAM,KAAMC,MAAO,mCAAoCC,MAAO,OAChE,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,cAAeC,MAAO,SAC3C,CAAEF,KAAM,KAAMC,MAAO,gBAAiBC,MAAO,OAC7C,CAAEF,KAAM,KAAMC,MAAO,YAAaC,MAAO,MACzC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,YAAaC,MAAO,OACzC,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,uBAAwBC,MAAO,OACpD,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,6BAA8BC,MAAO,OAC1D,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,mBAAoBC,MAAO,OAChD,CAAEF,KAAM,KAAMC,MAAO,6CAA8CC,MAAO,OAC1E,CAAEF,KAAM,KAAMC,MAAO,OAAQC,MAAO,OACpC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,MACvC,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,2BAA4BC,MAAO,SACxD,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,SAC1C,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,YAAaC,MAAO,OACzC,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,MACtC,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,MACxC,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,gBAAiBC,MAAO,OAC7C,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,iBAAkBC,MAAO,OAC9C,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,YAAaC,MAAO,OACzC,CAAEF,KAAM,KAAMC,MAAO,cAAeC,MAAO,MAC3C,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,MACtC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,OAAQC,MAAO,OACpC,CAAEF,KAAM,KAAMC,MAAO,cAAeC,MAAO,MAC3C,CAAEF,KAAM,KAAMC,MAAO,OAAQC,MAAO,OACpC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,OAAQC,MAAO,MACpC,CAAEF,KAAM,KAAMC,MAAO,mBAAoBC,MAAO,OAChD,CAAEF,KAAM,KAAMC,MAAO,mBAAoBC,MAAO,OAChD,CAAEF,KAAM,KAAMC,MAAO,cAAeC,MAAO,MAC3C,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,MACxC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,MACtC,CAAEF,KAAM,KAAMC,MAAO,4BAA6BC,MAAO,OACzD,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,cAAeC,MAAO,KAC3C,CAAEF,KAAM,KAAMC,MAAO,sBAAuBC,MAAO,OACnD,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,MACvC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,qBAAsBC,MAAO,KAClD,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,eAAgBC,MAAO,OAC5C,CAAEF,KAAM,KAAMC,MAAO,kBAAmBC,MAAO,OAC/C,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,MACtC,CAAEF,KAAM,KAAMC,MAAO,YAAaC,MAAO,MACzC,CAAEF,KAAM,KAAMC,MAAO,eAAgBC,MAAO,OAC5C,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,yBAA0BC,MAAO,MACtD,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,eAAgBC,MAAO,OAC5C,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,OACxC,CAAEF,KAAM,KAAMC,MAAO,cAAeC,MAAO,OAC3C,CAAEF,KAAM,KAAMC,MAAO,wBAAyBC,MAAO,OACrD,CAAEF,KAAM,KAAMC,MAAO,cAAeC,MAAO,OAC3C,CAAEF,KAAM,KAAMC,MAAO,4BAA6BC,MAAO,SACzD,CAAEF,KAAM,KAAMC,MAAO,uBAAwBC,MAAO,OACpD,CAAEF,KAAM,KAAMC,MAAO,YAAaC,MAAO,OACzC,CAAEF,KAAM,KAAMC,MAAO,2BAA4BC,MAAO,SACxD,CAAEF,KAAM,KAAMC,MAAO,OAAQC,MAAO,OACpC,CAAEF,KAAM,KAAMC,MAAO,8BAA+BC,MAAO,OAC3D,CAAEF,KAAM,KAAMC,MAAO,OAAQC,MAAO,OACpC,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,MACxC,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,cAAeC,MAAO,OAC3C,CAAEF,KAAM,KAAMC,MAAO,eAAgBC,MAAO,OAC5C,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,MACtC,CAAEF,KAAM,KAAMC,MAAO,sBAAuBC,MAAO,SACnD,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,4BAA6BC,MAAO,OACzD,CAAEF,KAAM,KAAMC,MAAO,8BAA+BC,MAAO,OAC3D,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,gBAAiBC,MAAO,IAAKC,WAAW,GAC7D,CAAEH,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,aAAcC,MAAO,OAC1C,CAAEF,KAAM,KAAMC,MAAO,gCAAiCC,MAAO,OAC7D,CAAEF,KAAM,KAAMC,MAAO,mCAAoCC,MAAO,SAChE,CAAEF,KAAM,KAAMC,MAAO,YAAaC,MAAO,MACzC,CAAEF,KAAM,KAAMC,MAAO,yBAA0BC,MAAO,SACtD,CAAEF,KAAM,KAAMC,MAAO,oBAAqBC,MAAO,SACjD,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,MACvC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,oBAAqBC,MAAO,OACjD,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,QAASC,MAAO,OACrC,CAAEF,KAAM,KAAMC,MAAO,UAAWC,MAAO,OACvC,CAAEF,KAAM,KAAMC,MAAO,eAAgBC,MAAO,MAC5C,CAAEF,KAAM,KAAMC,MAAO,SAAUC,MAAO,OACtC,CAAEF,KAAM,KAAMC,MAAO,WAAYC,MAAO,Q,OC9O3B,SAASE,EAAIvB,GAAkC,IAAjC,QAACwB,EAAO,QAAEC,EAAO,WAAEC,GAAW1B,EAIzD,MAAM,EAAEI,GAAMC,cAERsB,EAAWC,iBAAO,OACjBC,EAAOC,GAAYC,mBAAS,CACjCC,MAAO,OAITC,qBAAU,IACD,KAAO,IAADC,EACXT,EAAQ,CACN,KAAQD,EACR,UAA4B,QAAhBU,EAAAP,EAASQ,eAAO,IAAAD,OAAA,EAAhBA,EAAkBf,OAAQQ,EAASQ,SAC/C,GAEJ,IAGF,MAAMC,EAAeA,CAACC,EAAGL,KACvBL,EAASQ,QAAUH,EACnBF,EAAS,IAAID,EAAOG,MAAOA,IAE3B,MAAMM,GAAY,OAALN,QAAK,IAALA,OAAK,EAALA,EAAOb,OAAQQ,EAASQ,QACrCI,QAAQC,IAAIF,GAEZZ,OAAoBe,IAATH,GAAsBA,EAAKI,OAAO,EAAE,EAQ3CC,EAAsBA,IAYxBrC,cAACsC,IAAY,CACXC,GAAG,iBACHC,QAAS5B,EACT6B,eAAa,EACbC,SAAUA,CAACX,EAAGY,IAAMb,EAAaC,EAAGY,GACpCjB,MAAOH,EAAMG,MACbkB,eAAiBC,GAAWA,EAAO/B,MACnCgC,cAAehD,EAAE,mBACjBiD,aAAeF,IACbxC,sBAAC2C,WAAQ,CAAA5C,SAAA,CACPJ,cAAA,QAAAI,UAnBe6C,EAmBMJ,EAAOhC,KAlBK,qBAAzBqC,OAAOC,cACjBF,EACGG,cACAC,QAAQ,MAAOC,GAASJ,OAAOC,cAAcG,EAAKC,WAAW,GAAK,UACrEN,KAc2C,IAAEJ,EAAO/B,SAnBnCmC,KAqBjB,EACFO,YAAcC,GACZzD,cAAC0D,IAAS,IACJD,EACJ3C,MAAOhB,EAAE,yBACTU,QAAQ,WACRmD,WAAY,IACPF,EAAOE,WACVC,aAAc,gBAEhBC,UAAU,qBAQpB,OACExD,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,UAAU5D,eAAe,aAAa0D,UAAU,iBAAgBzD,SAAA,CACxHJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAEoB,EAAQgD,MAAOC,YAAY,EAAON,UAAU,qBAG/D3C,EAAQkD,aACT/D,eAACJ,IAAI,CAACK,MAAI,EAAAF,SAAA,CACkB,cAAzBc,EAAQ0C,cAAgC5D,cAACqC,EAAmB,KAC3DnB,EAAQ0C,cAAgB5D,cAAC0D,IAAS,CAAC5C,MAAOhB,EAAEoB,EAAQmD,aAAc7D,QAAQ,SAAS8D,WAAS,EAAC5B,SAAWX,GAAMD,EAAaC,EAAGA,EAAEwC,OAAO7C,cAKnJ,CC3Fe,SAAS8C,EAAQ9E,GAAkC,IAAD+E,EAAA,IAAhC,QAACvD,EAAO,QAAEC,EAAO,WAAEC,GAAW1B,EAI7D,MAAM,EAAEI,GAAMC,cACd,IAAI2E,EARG,IAAIC,gBAAgBC,cAAcC,QASzC,MAAMxD,EAAWC,iBAAO,OACjBC,EAAOC,GAAYC,mBAAS,CACjCC,MAAO,OAITC,qBAAU,IACD,KAAO,IAADC,EACXT,EAAQ,CACN,KAAQD,EACR,UAA4B,QAAhBU,EAAAP,EAASQ,eAAO,IAAAD,OAAA,EAAhBA,EAAkBf,OAAQQ,EAASQ,SAC/C,GAEJ,CAACR,IAaH,IACmCyD,EAD/BC,EAAe,MACW,KAApB,OAAP7D,QAAO,IAAPA,OAAO,EAAPA,EAAS8D,eACyB,QAAzB,OAAP9D,QAAO,IAAPA,OAAO,EAAPA,EAAS+D,sBAAyD,QAA1BH,EAAA5D,EAAQ+D,0BAAkB,IAAAH,OAAA,EAA1BA,EAA4B1C,QAAO,IAC5EH,QAAQC,IAAW,OAAPhB,QAAO,IAAPA,OAAO,EAAPA,EAAS+D,oBACrBF,EAAeL,EAAMQ,IAAIhE,EAAQ+D,oBACjChD,QAAQC,IAAI6C,IAEc,QAAd,OAAP7D,QAAO,IAAPA,OAAO,EAAPA,EAASA,WAA2B,OAAPA,QAAO,IAAPA,GAAgB,QAATuD,EAAPvD,EAASA,eAAO,IAAAuD,OAAT,EAAPA,EAAkBrC,QAAO,IAC7D2C,EAAe7D,EAAQA,SAGzB,KAAgB,MAAbK,EAAMG,OACW,OAAfqD,GAAuBA,EAAa3C,OAAO,GAMhD,OACE/B,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,UAAU5D,eAAe,aAAa0D,UAAU,iBAAgBzD,SAAA,CACxHJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAEoB,EAAQgD,MAAOC,YAAY,EAAON,UAAU,qBAG/D3C,EAAQkD,aACTpE,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAAC0D,IAAS,CAAC5C,MAAOhB,EAAEoB,EAAQmD,aAAcc,aAA4B,MAAdJ,EAAqBA,OAAe5C,EAAW3B,QAAQ,SAAS8D,WAAS,EAAC5B,SAAWX,GApChID,EAACC,EAAGL,KACvBL,EAASQ,QAAUH,EACnBF,EAAS,IAAID,EAAOG,MAAOA,IAE3B,MAAMM,GAAY,OAALN,QAAK,IAALA,OAAK,EAALA,EAAOb,OAAQQ,EAASQ,QACrCI,QAAQC,IAAIF,GAEZZ,OAAoBe,IAATH,GAAsBA,EAAKI,OAAO,EAAE,EA6B0GN,CAAaC,EAAGA,EAAEwC,OAAO7C,cAbhLF,EAAS,CAAEE,MAAQqD,GAkBzB,C,0DCrEA,SAASK,EAAoBC,GAC3B,MAAM,SAAEjF,EAAQ,KAAEkF,EAAI,MAAE5D,GAAU2D,EAElC,OACErF,cAACuF,IAAO,CAACD,KAAMA,EAAME,gBAAiB,EAAGC,UAAU,MAAM5H,MAAO6D,EAAOgE,OAAK,EAAAtF,SACzEA,GAGP,CAEe,SAASuF,EAAMjG,GAAkC,IAAjC,QAACwB,EAAO,QAAEC,EAAO,WAAEC,GAAW1B,EAE3D,MAAM,EAACI,GAAKC,eACN,UAAC6F,EAAS,QAAEC,EAAO,UAAE/H,EAAS,KAAEoG,EAAI,OAAE4B,EAAM,YAAEC,GAAgB7E,EAE9DG,EAAWC,iBAAO,CACtB0E,OAAQC,MAAMC,KAAK,CAAE9D,OAAQwD,EAAUxD,WAGzCT,qBAAU,KACJT,EAAQiF,kBAAkB/D,OAAO,GACnChB,GAAW,GAEbgF,OAAOC,SAAS,CAACC,IAAK,EAAGC,SAAU,WAC5B,KACLpF,EAAQ,CACN,KAAQD,EACR,SAAYG,EAASQ,SACrB,IAEJ,IAEF,MAAM2E,EAAeA,CAACX,EAASY,IAE3BpG,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACwG,IAAE,EAAa7C,UAAU,gBAAezD,SAAA,CAC3DJ,cAAC2G,IAAM,CACLxB,aAAc9D,EAASQ,QAAQmE,OAAOS,GACtC/E,MAAOL,EAASQ,QAAQmE,OAAOS,GAC/BG,iBAAmBjE,GAAM7C,EAAE+F,EAAQlD,EAAE,IACrC,kBAAiB,WAAW8D,EAC5BrB,oBAAqBA,EACrByB,kBAAmBA,CAAC9E,EAAGL,IAAUI,EAAaC,EAAG0E,EAAO/E,GACxDoF,KAAM,EACNC,IAAK,EACLC,IAAKnB,EAAQzD,OACb6E,kBAAkB,OAEpB5G,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,MAAMiG,WAAW,UAAUmD,QAAQ,gBAAe9G,SAAA,CAC1EJ,cAACC,IAAI,CAACK,MAAI,EAACuD,UAAU,OAAMzD,SAACJ,cAAA,MAAAI,SAAKN,EAAE+F,EAAQ,QAC1CE,GAAe/F,cAACC,IAAI,CAACK,MAAI,EAACuD,UAAU,OAAMzD,SAACJ,cAAA,MAAAI,SAAKN,EAAE+F,EAAQsB,KAAKC,MAAMvB,EAAQzD,OAAO,SACrFpC,cAACC,IAAI,CAACK,MAAI,EAACuD,UAAU,OAAMzD,SAACJ,cAAA,MAAAI,SAAKN,EAAE+F,EAAQA,EAAQzD,OAAO,aAhBjCqE,GAoC3B3E,EAAeA,CAACC,EAAG0E,EAAO/E,KAC9BL,EAASQ,QAAQmE,OAAOS,GAAS1E,EAAEwC,OAAO7C,OAASA,EAEnDO,QAAQC,IAAIb,EAASQ,QAAQmE,OAAOS,IACpC,MAAMY,EAAShG,EAASQ,QAAQmE,OAAOsB,QAAO,CAAC3E,EAAE4E,IAExCrG,EAAQiF,kBAAkBqB,SAASD,KAAa,OAAN5E,QAAkBR,IAAJQ,KAC9DP,OAEHhB,EAAsB,IAAXiG,EAAa,EAGpBI,EAAiBA,CAACC,EAAGjB,IAEvBpG,eAACJ,IAAI,CAACK,MAAI,EAAauD,UAAU,4BAA2BzD,SAAA,CAC5DJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAE4H,GAAIvD,YAAY,EAAON,UAAU,kBACpDiC,GAAUU,EAAaX,EAASY,IAC/BX,GACA9F,cAAC2H,IAAU,CAACC,KAAM,IAAInB,IAAS/E,MAAOL,EAASQ,QAAQmE,OAAOS,GAAQ/D,SAAWX,GAAMD,EAAaC,EAAG0E,GAAOrG,SAC9GJ,cAACC,IAAI,CAACC,WAAS,EACbpC,UAAuB,aAAZA,EAAuB,SAAS,MAC3CiG,WAAW,aACXmD,QAAQ,gBAAe9G,SACtByF,EAAQgC,KAAI,CAACC,EAAGC,IApCJC,EAACF,EAAGrB,IAErBzG,cAACC,IAAI,CAACK,MAAI,EAACoG,IAAE,EAAAtG,SACXJ,cAACiI,IAAgB,CACfC,QAASlI,cAACmI,IAAK,IACfzG,MAAOoG,EACPhH,MAAOhB,EAAEgI,GACTM,eAA4B,aAAZtK,EAAuB,MAAM,YAL9B2I,GAkCQuB,CAAaF,EAAGC,WAT3BtB,GAiBpB,OACEpG,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASiG,WAAW,UAAU5D,eAAe,aAAa0D,UAAU,iBAAgBzD,SAAA,CAC3G8D,GACDlE,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAEoE,GAAOC,YAAY,EAAON,UAAU,oBAGzD+B,EACEiC,KAAI,CAACH,EAAEH,IAAME,EAAeC,EAAEH,KAC9Bc,QAAO,CAACC,EAAIC,IAAO,CAACD,EAAGtI,cAACwI,IAAO,CAAgC3E,UAAU,iBAApCsD,KAAKsB,SAASC,YAAwCH,OAGpG,CCjHe,SAASI,EAAUjJ,GAAyC,IAAxC,WAACkJ,EAAU,QAAEC,EAAO,eAAEC,GAAepJ,EAEtE,MAAM,EAACI,GAAKC,cACNgJ,EAAgB,oCAAoCF,eAGnDtH,EAAOC,GAAYC,mBAAS,CACjCuH,oBAAgB7G,EAChB7D,OAAOC,IAGT,SAAS0K,EAAWjH,GAAO,IAADkH,EACxB,SAAGlH,GAAyB,iBAAb,OAAJA,QAAI,IAAJA,GAAU,QAANkH,EAAJlH,EAAMmH,YAAI,IAAAD,OAAN,EAAJA,EAAY3G,IAGzB,CAyCA,OA9BAZ,qBAAU,KACR,QAA6BQ,IAAzBZ,EAAMyH,eAA8B,CACtC,MAAMI,EAXaC,MACrB,IAAID,EAAM,KACV,MAAME,EAAQV,EAAWW,UAAUjC,OAAO2B,GAG1C,OAFGK,EAAMlH,OAAO,IACdgH,EAAIE,EAAM,GAAGjI,UACR+H,CAAG,EAMIC,GAEZG,IAAQC,MAAM,CACZC,SAAU,OACVC,OAAQ,4BAA4BP,EACpCtI,MAAO,2BAET8I,MAAMb,EAAe,CACnBc,OAAQ,OACRC,KAAM,OACNC,KAAMC,KAAKC,UAAUrB,GACrBsB,QAAS,CACP,eAAgB,sBAGjBC,MAAKnI,GAAQA,EAAKoI,SAClBD,MAAKE,GAAY7I,EAAS,IAAID,EAAOyH,eAAgBqB,EAASrB,mBAC9DsB,OAAMC,IACLf,IAAQC,MAAM,CACZC,SAAU,QACVC,OAAQ,kCAAkCP,EAAK,WAAamB,EAAQ,eAAgBP,KAAKC,UAAUM,GACnGzJ,MAAO,2BAA6BkJ,KAAKC,UAAUrB,KAE9C3G,QAAQsI,MAAM,SAAUA,KAErC,IACA,CAAChJ,IAGDlB,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAAS+F,UAAU,iBAAgBzD,SAAA,CAE1DmB,EAAMyH,gBACPhJ,cAACC,IAAI,CAACK,MAAI,EAACoG,IAAE,EAAC7C,UAAU,uBAAsBzD,SAC5CJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAEgJ,EAAgB,CAACE,eAAgBzH,EAAMyH,iBAAkB7E,YAAY,EAAQN,UAAU,oBAI5GtC,EAAMjD,OACP0B,cAACC,IAAI,CAACK,MAAI,EAACoG,IAAE,EAAAtG,SACXJ,cAAA,OAAAI,SAAM4J,KAAKC,UAAUrB,EAAY,KAAM,SAM/C,C,kECtEe,SAAS4B,GAAI9K,GAAsB,IAArB,QAACwB,EAAO,QAAEC,GAAQzB,EAE7C,MAAM,EAAEI,GAAMC,eACR,OAAC0K,EAAM,SAAEC,EAAQ,UAAEC,EAAS,OAAEC,GAAU1J,GAEvCK,EAAOC,GAAYC,mBAAS,CACjCoJ,MAAO,EACPlL,UAAU,EACVmL,MAAO,EACPC,WAAY,EACZC,eAAgB,GAChBC,cAAc,EACdC,cAAeC,KAAKC,MACpBC,aAAa,IAGTC,EAAWC,IACf,IAAK,IAAIhE,EAAIgE,EAAEnJ,OAAS,EAAGmF,EAAI,EAAGA,IAAK,CACnC,MAAMQ,EAAIZ,KAAKC,MAAMD,KAAKsB,UAAYlB,EAAI,KACzCgE,EAAEhE,GAAIgE,EAAExD,IAAM,CAACwD,EAAExD,GAAIwD,EAAEhE,GAC5B,CACA,OAAOgE,CAAC,EAIV5J,qBAAU,KAGRJ,EAAMiK,cAAgBF,EAAQrF,MAAMC,KAAK,CAAC9D,OAAQsI,IAAW,CAACe,EAAGlE,IAAMA,EAAE,KAEzEmE,SAAS3B,KAAK4B,MAAM,gBAAkB,OACtCD,SAASE,gBAAgBD,MAAM,gBAAkB,OAC1C,KACLD,SAAS3B,KAAK4B,MAAM,gBAAkB,KACtCD,SAASE,gBAAgBD,MAAM,gBAAkB,IAAI,IAEvD,IAGFhK,qBAAU,KACR,GAAIJ,EAAM5B,WAAa4B,EAAM0J,aAAc,CACzC,MAAMG,EAAMD,KAAKC,MAEjB,IAAI/J,EAAW,CAACuJ,OAAQrJ,EAAMyJ,gBAC9B3J,EAAS6J,cAAgB3J,EAAM2J,cAC/B7J,EAASwK,eAAiBT,EAC1B/J,EAASyK,aAAeV,EAAM7J,EAAM2J,cACpC/J,EAAQ,CACN,KAAQD,EACR,SAAYG,IACX,EACL,IACC,CAACE,IAOJ,MAAMwK,EAAWA,CAACC,EAAQC,KACxBzK,EAAS,IACJD,EACH0J,cAAc,EACdD,eAAgB,IAAIzJ,EAAMyJ,eAAgB,CACxCF,MAAOvJ,EAAMuJ,MACbD,MAAOtJ,EAAMsJ,MACbqB,MAAOF,EAAQzK,EAAMsJ,MAAQJ,EAAS,EACtC0B,OAAQH,EAAQ,SAAW,aAE7BX,aAAa,EACb1L,SAAW4B,EAAMuJ,OAAOF,EACxBC,MAAO,EACPC,MAAOvJ,EAAMuJ,MAAM,EACnBC,WAAYxJ,EAAMwJ,YAAciB,EAAOzK,EAAMsJ,MAAMJ,EAAO,GAC1De,cAAeF,EAAQrF,MAAMC,KAAK,CAAC9D,OAAQsI,IAAW,CAACe,EAAGlE,IAAMA,EAAE,MAClE,EA4DE6E,EAAcA,CAACvB,EAAOH,KAG1B,IAAI2B,EAAMlF,KAAKmF,KAAe,KAATzB,EAAM,GAAO1D,KAAKoF,IAEvC,OADAtK,QAAQC,IAAImK,GACLlF,KAAKqF,KAAK,EAAEH,EAAI,EAOvB,OACEhM,eAAC2C,WAAQ,CAAA5C,SAAA,CACNmB,EAAM0J,cApCX5K,eAACoM,IAAM,CACLnH,KAAM/D,EAAM0J,aACZyB,QAASA,IAAMlL,EAAS,IAAID,EAAO0J,cAAc,IACjD0B,sBAAoB,EACpBC,sBAAoB,EACpB,kBAAgB,eAAcxM,SAAA,CAE5BJ,cAAC6M,IAAW,CAACtK,GAAG,eAAcnC,SAACJ,cAAA,KAAAI,SAAmE,WAA/DmB,EAAMyJ,eAAezJ,EAAMyJ,eAAe5I,OAAS,GAAG+J,OAAkBrM,EAAE,qBAAqBA,EAAE,2BACpIE,cAAC8M,IAAa,CAAA1M,SACZC,eAAC0M,IAAiB,CAAA3M,SAAA,CACjBN,EAAE,0BAA2B,CAACoM,MAAO3K,EAAMyJ,eAAezJ,EAAMyJ,eAAe5I,OAAS,GAAG8J,QAC3FpM,EAAE,0BAA2B,CAACoM,MAAO3K,EAAMyJ,eAAenD,KAAImF,GAAKA,EAAEd,QAAO7D,QAAO,CAACkD,EAAE0B,IAAM1B,EAAE0B,GAAG,UAGpGjN,cAACkN,KAAa,CAAA9M,SACZJ,cAACO,IAAM,CAACG,QAASA,IAAMc,EAAS,IAAID,EAAO0J,cAAc,IAASxK,MAAM,UAAU0M,WAAS,EAACC,KAAK,QAAOhN,SACrGmB,EAAMuJ,OAAOF,EAAO9K,EAAE,mBAAmBA,EAAE,eAsBhDO,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGoD,QAAQ,gBAAgBnD,WAAW,UAAUF,UAAU,iBAAgBzD,SAAA,CAEtHC,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMoJ,QAAQ,eAAenD,WAAW,SAAQ3D,SAAA,CAE5EmB,EAAMuJ,OAAOF,GACZ5K,cAACC,IAAI,CAACK,MAAI,EAAAF,SAACC,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASoJ,QAAQ,eAAenD,WAAW,SAAQ3D,SAAA,CACrFN,EAAE,oBAAoBE,cAACqN,IAAU,CAAC7M,QAAQ,KAAIJ,SAAEmB,EAAMsJ,MAAQJ,SAIlElJ,EAAMuJ,OAAOF,GACZ5K,cAACC,IAAI,CAACK,MAAI,EAAAF,SAACJ,cAACC,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASoJ,QAAQ,eAAenD,WAAW,SAAQ3D,SACpFJ,cAACqN,IAAU,CAAC5M,MAAM,gBAAgBD,QAAQ,UAASJ,SAAEN,EAAE,mBAAmB,CAACgL,MAAMvJ,EAAMuJ,MAAOF,OAAOA,UAIzG5K,cAACC,IAAI,CAACK,MAAI,EAAAF,SAACC,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASoJ,QAAQ,eAAenD,WAAW,SAAQ3D,SAAA,CACrFN,EAAE,qBAAqBE,cAACqN,IAAU,CAAC7M,QAAQ,KAAIJ,SAAEmB,EAAMwJ,qBAM9D/K,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,SAASwP,aAAa,SAASvJ,WAAW,SAAQ3D,SAC/EJ,cAACuF,IAAO,CAAC1H,MAAOiC,EAAE,wBAAyB4F,OAAK,EAACJ,MAAO/D,EAAM0J,cAAgB1J,EAAM8J,YAAYjL,SAChGJ,cAAA,OAAK6D,UAAU,mBAAmB8H,MAAO,CACvC4B,OAAQ,UACRC,MAAOpB,EAAY7K,EAAMsJ,OACzB4C,OAAQrB,EAAY7K,EAAMsJ,OAC1B6C,WAA2B,IAAdnM,EAAMsJ,MAAW,GAAG,uBAEnCnK,QArGUiN,KAEhB,MAAMC,EAASjD,EAAU,GAAKpJ,EAAMsJ,MAAMF,EAC1C,IAAIkD,EAAc1G,KAAKC,MAAMD,KAAKsB,SAAWlH,EAAMiK,cAAcpJ,QAC7D6J,EAAe1K,EAAMiK,cAAcsC,OAAOD,EAAaD,EAAO,EAAE,GACpE3L,QAAQC,IAAI,kBAAmB+J,EAAa,GAAI,0BAGxB,IAApBA,EAAa,GACfF,GAAS,GAEPvK,EAAS,IACND,EACH8J,aAAa,EACbR,MAAOtJ,EAAMsJ,MAAM,GAEvB,EAqFyBzK,SAEjBJ,cAAA,UAAQ6D,UAAU,iBAKtB7D,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMoJ,QAAQ,eAAenD,WAAW,SAAQ3D,SAC7EJ,cAACO,IAAM,CAAC6M,KAAK,QAAQ3M,MAAM,UAAUD,QAAQ,WAAWE,QAtF/CqN,KACfhC,GAAS,EAAK,EAqFkE3L,SAAEN,EAAE,sBAUxF,C,sDClNO,MAAMkO,GAAS,SAACC,GAErB,OAAOA,EADG9G,KAAKC,MAAMD,KAAKsB,SAASwF,EAAM7L,QAE3C,EAOakJ,GAAW2C,IACtB,MAAMC,EAAWD,EAAME,QACvB,IAAK,IAAI5G,EAAI0G,EAAM7L,OAAS,EAAGmF,EAAI,EAAGA,IAAK,CACvC,MAAM6G,EAAMjH,KAAKC,MAAMD,KAAKsB,UAAYlB,EAAI,KAC3C2G,EAAS3G,GAAI2G,EAASE,IAAQ,CAACF,EAASE,GAAMF,EAAS3G,GAC5D,CACA,OAAO2G,CAAQ,E,OCKjB,IAAIG,GAEW,SAASC,GAAM5O,GAAkC,IAAjC,QAACwB,EAAO,QAAEC,EAAO,WAAEoN,GAAW7O,EAE3D,MAAM,EAACI,GAAKC,eACN,KAACmE,EAAI,OAAE0G,EAAM,gBAAE4D,EAAe,iBAAEC,EAAgB,QAAE5I,EAAO,oBAAE6I,EAAmB,iBAAEC,GAAoBzN,GAEnGK,EAAOC,GAAYC,mBAAS,CACjC9B,UAAU,EACVqL,eAAgB,GAChBE,cAAe,KACfW,eAAgB,KAChBC,aAAc,KACdhF,KAAM,KACN8H,QAAS,KACTC,QAAS,KACTC,eAAgB,KAChBC,YAAa,KACbjE,MAAO,KACPkE,SAAU,IAMNC,EAAkBxF,IACtB,MAAM,IAAEyF,EAAG,QAAEC,GAAY1F,EAGzB,GAAoB,OAAhBlI,EAAMuJ,QAA6B,KAAVqE,GAAsB,MAAND,GAE3C,YADAE,IAKF,GAAmB,YAAf7N,EAAMuF,OAAuB,CAAC,YAAa,cAAcU,SAAS0H,GACpE,OAEF,MAAMrN,EAAUN,EAAMsN,QAAQtN,EAAMuJ,MAAM,GAC1C,IAAIuE,EAEAC,EAAe,cAANJ,GAAqBrN,EAAQ0N,WAAW,UAClC,eAANL,GAAsBrN,EAAQ0N,WAAW,QAItDF,EAHgB,cAANH,GAA+B,YAAVrN,GACf,eAANqN,GAAgC,aAAVrN,EAEpBgE,EAAQ2J,GAAIF,EAAM,QAAQzJ,EAAQ4J,KAE9CC,EAAeL,EAAO,EAIxB1N,qBAAU,KACRyE,OAAOuJ,iBAAiB,UAAWV,GAE5B,KACL7I,OAAOwJ,oBAAoB,UAAWX,EAAe,IAEtD,CAACA,IAGJtN,qBAAU,KAGR,GAAoB,OAAhBJ,EAAMsN,QAAgB,CACxB,IAAIgB,EAAO,IAAI5J,MAAM2E,EAAOkF,OAAOC,QAAQlI,KAAI,CAACN,EAAEzH,IAC5CyH,EAAEqD,EAAOoF,OACJ,UACLzI,EAAEqD,EAAO4E,GACJ,WACLjI,EAAEqD,EAAO4E,IAAM5E,EAAOqF,KAAOrF,EAAOoF,QAC/B,YACF,eAETxO,EAAS,IAAID,EAAOsN,QAASvD,GAAQuE,IACvC,CA2DA,GAvDmB,aAAftO,EAAMuF,OACRoJ,aAAa7B,IACbA,GAAQ8B,YAAW,KACf3O,EAAS,IACJD,EACHuJ,MAAOvJ,EAAMuJ,MAAM,EACnBgE,eAAgB3D,KAAKC,MACrBtE,KAAM,WACN,GACD2H,IAIY,aAAflN,EAAMuF,OACRoJ,aAAa7B,IACbA,GAAQ8B,YAAW,KACf3O,EAAS,IAAID,EAAOuF,KAAM,YAAY,GACrC6H,IAGY,YAAfpN,EAAMuF,OACRoJ,aAAa7B,IAET9M,EAAMyN,SAASN,EACjBL,GAAQ8B,YAAW,KACjB3O,EAAS,IAAID,EACXyJ,eAAgB,IAAIzJ,EAAMyJ,eAAgB,CACxC,MAASzJ,EAAMuJ,MACf,QAAWvJ,EAAMsN,QAAQtN,EAAMuJ,MAAM,GACrC,OAAU,KACV,QAAW,KACX,YAAe,KACf,eAAkBvJ,EAAMuN,eACxB,GAAM,OAERE,SAAUzN,EAAMyN,SAAW,EAC3BJ,SAAS,EACT9H,KAAO6H,EAAiB,EAAG,WAAW,YACtC,GACDH,GAEHhN,EAAS,IAAID,EAAOuF,KAAM,QAASkI,SAAU,KAKjDT,EAAW,IAAQhN,EAAMuJ,MAAQF,EAAOkF,OAEpCvO,EAAMuJ,MAAMF,EAAOkF,QACrB7N,QAAQC,IAAI,iCACZqM,EAAW,KACX/M,EAAS,IAAID,EAAO5B,UAAU,EAAMkM,eAAgBV,KAAKC,SAIvD7J,EAAM5B,SAAU,CAClBuQ,aAAa7B,IAGb,IAAIhN,EAAW,CAACuJ,OAAQrJ,EAAMyJ,gBAC9B3J,EAAS6J,cAAgB3J,EAAM2J,cAC/B7J,EAASwK,eAAiBtK,EAAMsK,eAChCxK,EAASyK,aAAevK,EAAMsK,eAAiBtK,EAAM2J,cACrD/J,EAAQ,CACN,KAAQD,EACR,SAAYG,IACX,EACL,IAEA,CAACE,IAEH,MAAM6N,EAAYA,KAChB5N,EAAS,IACJD,EACHyJ,eAAgB,GAChBF,MAAO,EACPkE,SAAU,EACVlI,KAAM,WACNoE,cAAeC,KAAKC,OACpB,EAGEsE,EAAkBL,IACtB,MAAMN,EAAc5D,KAAKC,MAEzB8E,aAAa7B,IAEb,MAAM+B,EAAYf,IAASxJ,EAAQ2J,KAAOjO,EAAMsN,QAAQtN,EAAMuJ,MAAM,GAAGuF,SAAS,SAC5D,UAAThB,GAAoB9N,EAAMsN,QAAQtN,EAAMuJ,MAAM,GAAGuF,SAAS,QAErE7O,EAAS,IACJD,EACHqN,QAASwB,EACTrB,YAAaA,EACb/D,eAAgB,IAAIzJ,EAAMyJ,eAAgB,CACxC,MAASzJ,EAAMuJ,MACf,QAAWvJ,EAAMsN,QAAQtN,EAAMuJ,MAAM,GACrC,OAAUuE,EACV,QAAWe,EACX,YAAerB,EACf,eAAkBxN,EAAMuN,eACxB,GAAMC,EAAcxN,EAAMuN,iBAE5BhI,KAAO6H,EAAiB,EAAG,WAAW,YACtC,EAGE2B,EAAkBC,GAEpBlQ,eAAC2C,WAAQ,CAAA5C,SAAA,CACG,SAAXmQ,GAAqBvQ,cAAA,OAAKU,QAASA,IAAMgP,EAAe,QAAS7L,UAAU,eAAczD,SAACJ,cAACwQ,KAAI,CAACC,SAAS,QAAQ5M,UAAU,aAChH,UAAX0M,GAAsBvQ,cAAA,OAAKU,QAASA,IAAMgP,EAAe,SAAU7L,UAAU,eAAczD,SAAC,MACjF,WAAXmQ,GAAuBvQ,cAAA,OAAKU,QAASA,IAAMgP,EAAe,UAAW7L,UAAU,eAAczD,SAACJ,cAAC0Q,KAAM,CAACD,SAAS,QAAQ5M,UAAU,WACtH,cAAX0M,GAA0BvQ,cAAA,OAAKU,QAASA,IAAMgP,EAAe,aAAc7L,UAAU,eAAczD,SAACJ,cAACwQ,KAAI,CAACC,SAAS,QAAQ5M,UAAU,WAC1H,kBAAX0M,GAA8BvQ,cAAA,OAAKU,QAASA,IAAMgP,EAAe,iBAAkB7L,UAAU,eAAczD,SAACJ,cAACwQ,KAAI,CAACC,SAAS,QAAQ5M,UAAU,gBAsClJ,MAAmB,UAAftC,EAAMuF,KAENzG,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,SAAS5D,eAAe,aAAa0D,UAAU,iBAAgBzD,SAAA,CACvHJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SAACJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAE,4BAA6BqE,YAAY,EAAQN,UAAU,oBAC1F7D,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACO,IAAM,CAACC,QAAQ,WAAWC,MAAM,YAAYC,QAASA,IAAM0O,IAAYhP,SAAEN,EAAE,yBAQhE,OAAhByB,EAAMuJ,MAENzK,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,SAAS5D,eAAe,aAAa0D,UAAU,iBAAgBzD,SAAA,CACvHJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SAACJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAE,wBAAyBqE,YAAY,EAAON,UAAU,oBACrF7D,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACO,IAAM,CAACC,QAAQ,WAAWE,QAASA,IAAM0O,IAAYhP,SAAEN,EAAE,uBAU5DO,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,UAAU5D,eAAe,aAAa0D,UAAU,mBAAkBzD,SAAA,CAC/HJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAEoE,GAAOC,YAAY,EAAON,UAAU,oBAG1C,YAAftC,EAAMuF,OAlEQ6J,EAkE6BpP,EAAMsN,QAAQtN,EAAMuJ,MAAM,GAhE1EzK,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SAAA,CACrE,YAAduQ,GAA2BL,EAAezK,EAAQ2J,IACpC,cAAdmB,GAA6BL,EAAezK,EAAQ4J,MACrC,YAAdkB,GAAyC,cAAdA,GAA8BL,EAAe,SAC1EtQ,cAACwI,IAAO,CAACoI,YAAY,WAAWC,UAAQ,IACzB,aAAdF,GAA4BL,EAAezK,EAAQ2J,IACrC,eAAdmB,GAA8BL,EAAezK,EAAQ4J,MACtC,aAAdkB,GAA0C,eAAdA,GAA+BL,EAAe,aA0D1D,aAAf/O,EAAMuF,MAnDXzG,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SAAA,CACnFmB,EAAMqN,SAAW5O,cAAC8Q,KAAO,CAACL,SAAS,QAAQ5M,UAAU,sBACpDtC,EAAMqN,SAAW5O,cAAC+Q,KAAS,CAACN,SAAS,QAAQ5M,UAAU,0BAkDvC,aAAftC,EAAMuF,MA1CX9G,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpFJ,cAACgR,KAAG,CAACP,SAAS,QAAQ5M,UAAU,2BA3Bf8M,KA2EzB,CCzRerF,OAREC,IACf,IAAK,IAAIhE,EAAIgE,EAAEnJ,OAAS,EAAGmF,EAAI,EAAGA,IAAK,CACnC,MAAMQ,EAAIZ,KAAKC,MAAMD,KAAKsB,UAAYlB,EAAI,KACzCgE,EAAEhE,GAAIgE,EAAExD,IAAM,CAACwD,EAAExD,GAAIwD,EAAEhE,GAC5B,CACA,OAAOgE,CAAC,E,cCYV,IAAI8C,GAEW,SAAS4C,GAAMvR,GAAsB,IAArB,QAACwB,EAAO,QAAEC,GAAQzB,EAE/C,MAAM,KAACwR,EAAI,OAAEC,EAAM,MAAEC,EAAK,OAAExG,EAAM,gBAAEyG,EAAe,iBAAEC,EAAgB,iBAAEC,EAAgB,iBAAE9C,EAAgB,oBAAEC,EAAmB,iBAAEC,GAAoBzN,GAG9I,EAACpB,GAAKC,eAGLwB,EAAOC,GAAYC,mBAAS,CACjCuJ,eAAgB,GAChBrL,UAAU,EACVmL,MAAO,KACPhE,KAAM,KACN8H,QAAS,KACTI,SAAU,EACVH,QAAS,OAMLI,EAAkBxF,IACtB,MAAM,IAAEyF,EAAG,QAAEC,GAAY1F,EAGzB,GAAoB,OAAhBlI,EAAMuJ,QAA6B,KAAVqE,GAAsB,MAAND,GAE3C,YADAE,IAKF,GAAmB,aAAf7N,EAAMuF,OAAwB,CAAC,YAAa,cAAcU,SAAS0H,GACrE,OAEF,IAAIrJ,EAAUtE,EAAMsN,QAAQtN,EAAMuJ,MAAM,GAAGjF,QACvC0K,EAAWhP,EAAMsN,QAAQtN,EAAMuJ,MAAM,GAAGyF,SAExClB,EAAgB,cAANH,EAAmBrJ,EAAQ,GAAGA,EAAQ,GAEpD6J,EAAeL,EAAQkB,EAAS,EAIlC5O,qBAAU,KACRyE,OAAOuJ,iBAAiB,UAAWV,GAE5B,KACL7I,OAAOwJ,oBAAoB,UAAWX,EAAe,IAEtD,CAACA,IAGJ,MAAMuC,EAAa5G,IACjB,IAAI6G,EAAWJ,EAA0B/F,GAAQV,GAAQA,EAOzD,OANI0G,IACFG,EAAUA,EAAQ5J,KAAI/H,IACpB,IAAI4R,EAAKC,OAAOC,OAAO,CAAC,EAAE9R,GAE1B,OADA4R,EAAG7L,QAAUyF,GAAQxL,EAAE+F,SAChB6L,CAAE,KAEND,CAAO,EAIhB9P,qBAAU,KA0DR,GAxDoB,OAAhBJ,EAAMsN,SACRrN,EAAS,IACJD,EACHsN,QAAS2C,EAAU5G,KAIN,aAAbrJ,EAAMuF,OACRoJ,aAAa7B,IACbA,GAAQ8B,YAAW,KACjB3O,EAAS,IACJD,EACHuF,KAAM,WACNgE,MAAOvJ,EAAMuJ,MAAM,EACnBgE,eAAgB3D,KAAKC,OACrB,GACDqD,IAGc,aAAflN,EAAMuF,OACRoJ,aAAa7B,IACbA,GAAQ8B,YAAW,KACjB3O,EAAS,IAAID,EAAOuF,KAAM,YAAY,GACrC6H,IAGc,aAAfpN,EAAMuF,OACRoJ,aAAa7B,IAET9M,EAAMyN,SAASN,EACjBL,GAAQ8B,YAAW,KACjB3O,EAAS,IACJD,EACHuF,KAAO6H,EAAiB,EAAG,WAAW,WACtC3D,eAAgB,IAAIzJ,EAAMyJ,eAAgB,CACxCF,MAAOvJ,EAAMuJ,MACbyF,SAAUhP,EAAMsN,QAAQtN,EAAMuJ,MAAM,GAAGyF,SACvClB,OAAQ,KACRT,QAAS,KACTG,YAAa,KACbD,eAAgBvN,EAAMuN,eACtB+C,GAAI,OAEN7C,SAAUzN,EAAMyN,SAAW,EAC3BJ,SAAS,GACT,GACD2C,GAEH/P,EAAS,IAAID,EAAOuF,KAAM,QAASkI,SAAU,KAI7CzN,EAAMuJ,MAAMF,EAAOxI,QACrBZ,EAAS,IAAID,EAAO5B,UAAU,EAAMkM,eAAgBV,KAAKC,QAGvD7J,EAAM5B,SAAU,CAClBuQ,aAAa7B,IAGb,IAAIhN,EAAW,CAACuJ,OAAQrJ,EAAMyJ,gBAC9B3J,EAAS6J,cAAgB3J,EAAM2J,cAC/B7J,EAASwK,eAAiBtK,EAAMsK,eAChCxK,EAASyK,aAAevK,EAAMsK,eAAiBtK,EAAM2J,cACrD/J,EAAQ,CACN,KAAQD,EACR,SAAYG,IACX,EACL,IAEC,CAACE,IAEJ,MAAM6N,EAAYA,KAChB5N,EAAS,IACJD,EACHuJ,MAAO,EACPkE,SAAU,EACVhE,eAAgB,GAChBlE,KAAK,WACLoE,cAAeC,KAAKC,OACpB,EAGEsE,EAAiBA,CAACL,EAAQkB,KAC9B,IAAIxB,EAAc5D,KAAKC,MAEvB8E,aAAa7B,IAEb,IAAKyD,EAAYC,GAAe1C,EAAO2C,MAAM,KACxCC,EAAcC,GAAiB3B,EAASyB,MAAM,IAC/CpD,EAAWkD,IAAeI,EAI9B1Q,EAAS,IACJD,EACHuF,KAAO6H,EAAiB,EAAG,WAAW,WACtCC,QAASA,EACT5D,eAAgB,IAAIzJ,EAAMyJ,eAAe,CACvCF,MAAOvJ,EAAMuJ,MACbyF,SAAUhP,EAAMsN,QAAQtN,EAAMuJ,MAAM,GAAGyF,SACvClB,OAAQA,EACRT,QAASA,EACTG,YAAaA,EACbD,eAAgBvN,EAAMuN,eACtB+C,GAAI9C,EAAcxN,EAAMuN,kBAE1B,EAmEJ,MAAmB,UAAfvN,EAAMuF,KAVNzG,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,SAASmD,QAAQ,aAAarD,UAAU,iBAAgBzD,SAAA,CAChHJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SAACJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAE,4BAA6BqE,YAAY,EAAON,UAAU,oBACzF7D,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACO,IAAM,CAACC,QAAQ,WAAWC,MAAM,YAAYC,QAASA,IAAM0O,IAAYhP,SAAEN,EAAE,yBAWhE,OAAhByB,EAAMuJ,MA1BNzK,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,SAAQ3D,SAAA,CAChEJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SAACJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAE,wBAAyBqE,YAAY,EAAON,UAAU,oBACrF7D,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACO,IAAM,CAACC,QAAQ,WAAWE,QAASA,IAAM0O,IAAYhP,SAAEN,EAAE,uBA8B5DO,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,UAAUmD,QAAQ,aAAarD,UAAU,gCAA+BzD,SAAA,CACrIJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAEoR,GAAO/M,YAAY,EAAON,UAAU,oBAGzDtC,EAAMuJ,OAAOF,EAAOxI,QACJ,aAAfb,EAAMuF,MAjFQyJ,KACtB,IAAK4B,EAAM1R,GAAS8P,EAASyB,MAAM,IACnC,OACEhS,cAACC,IAAI,CAACC,WAAS,EAACI,MAAI,EAACxC,UAAU,SAASiG,WAAW,SAASmD,QAAQ,aAAY9G,SAChFJ,cAACqN,IAAU,CAACxJ,UAAU,kBAAkBrD,QAAQ,KAAKmL,MAAO,CAAClL,MAAO0Q,EAAO1Q,IAAQL,SAChFN,EAAEsR,EAAMe,OAEJ,EA2ED7B,CAAe/O,EAAMsN,QAAQtN,EAAMuJ,MAAM,GAAGyF,UAE7ChP,EAAMuJ,OAAOF,EAAOxI,QACJ,aAAfb,EAAMuF,OAzEOjB,EA0ECtE,EAAMsN,QAAQtN,EAAMuJ,MAAM,GAAGjF,QA1ErB0K,EA0E8BhP,EAAMsN,QAAQtN,EAAMuJ,MAAM,GAAGyF,SAvEvFvQ,cAACC,IAAI,CAACC,WAAS,EAACpC,UAAU,MAAMoJ,QAAQ,gBAAgBpD,QAAS,EAAGC,WAAW,UAAUF,UAAU,iBAAgBzD,SAClHyF,EAAQgC,KAAI,CAACwH,EAAO9H,KACnB,IAAK4K,EAAM1R,GAAS4O,EAAO2C,MAAM,IACjC,OACEhS,cAACC,IAAI,CAACK,MAAI,EAACoG,IAAE,EAAAtG,SACbJ,cAACO,IAAM,CAACoL,MAAO,CAAClL,MAAO0Q,EAAO1Q,IAASC,QAASA,IAAMgP,EAAeL,EAAQkB,GAAWnD,KAAK,QAAQ9I,WAAS,EAAC9D,QAAQ,WAAUJ,SAC9HN,EAAEsR,EAAMe,OAFQ5K,EAIZ,OAiES,aAAfhG,EAAMuF,OAAsCvF,EAAMqN,QAxDvDvO,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMoJ,QAAQ,eAAenD,WAAW,SAAQ3D,SAAA,CAC5EmB,EAAMqN,SAAW5O,cAACoS,KAAW,CAAC3B,SAAS,QAAQ5M,UAAU,sBACxDtC,EAAMqN,SAAW5O,cAACqS,KAAa,CAAC5B,SAAS,QAAQ5M,UAAU,2BAwD3C,aAAftC,EAAMuF,MACL9G,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMoJ,QAAQ,eAAenD,WAAW,SAAQ3D,SAC7EJ,cAACgR,KAAG,CAACP,SAAS,QAAQ5M,UAAU,2BAhFtByO,IAACzM,EAAS0K,CAyFlC,C,oIClSO,MAAMgC,GACD,WADCA,GAEN,MAFMA,GAGH,SAGJC,GAAYC,cAAYC,IAAK,CACjCC,KAAM,CACJC,SAAU,GAEZC,MAAO,CACLC,QAASJ,EAAM5O,QAAQ,IAEzBiP,OAAQ,CACNvF,MAAOkF,EAAM5O,QAAQ,GACrB2J,OAAQiF,EAAM5O,QAAQ,IAExBkP,MAAO,CACLxF,MAAOkF,EAAM5O,QAAQ,GACrB2J,OAAQiF,EAAM5O,QAAQ,IAExBmP,KAAM,CACJxS,MAAOiS,EAAM7T,QAAQqU,gBAAgBD,KAAK,MAC1CE,gBAAiBF,KAAK,MAExBG,SAAU,CACR3S,MAAOiS,EAAM7T,QAAQqU,gBAAgBG,KAAK,MAC1CF,gBAAiBE,KAAK,MAExBC,MAAO,CACL7S,MAAOiS,EAAM7T,QAAQqU,gBAAgBK,KAAS,MAC9CJ,gBAAiBI,KAAS,MAE5BC,UAAW,CACT/F,OAAQ,YAIZ,IAAIgG,QAAWtR,EACXuR,QAAoBvR,EAKjB,MAAMwR,GAAgBC,gBAAK,SAAsBlU,GAOpD,IAPqD,KACvDkI,EAAI,OACJiM,EAAM,OACNC,EAAM,OACNC,EAAM,OACNC,EAAM,cACNC,GACDvU,GAEK,KAAEwU,GAASC,cACfV,GAAWS,EACXR,GAAoBO,EACpBhS,QAAQC,IAAIwR,IACZ,MAAM,EAAE5T,GAAMC,cACR2S,EAA2C,QAAlC9U,EAAU6V,IAAU3V,UAAuB0B,EAAWF,EAC/D8U,EAAU5B,GAAUE,KAKnB,QAAE2B,EAAO,OAAEC,GAAUC,GAAQC,aAAQ,CAC1CT,SACAQ,KAAMT,EACNW,QAAUC,IAAO,CACfJ,OAAQI,EAAQJ,SAChBD,QAASK,EAAQL,cAMrB,IAAIlB,EAAkB,OADLkB,GAAWC,EAG1BnB,EAAkB,YACTkB,IACTlB,EAAkBI,KAAS,MAG7B,MAAMoB,EAAa,GACnB,IAAK,IAAIpN,EAAI,EAAGA,EAAIsM,EAAQtM,IAC1BoN,EAAWC,KAAK5U,cAAC6U,GAAc,CAAC/V,KAAM8I,EAAMA,KAAMA,EAAOL,EAAEmB,WAAsCoM,QAASlN,GAA9BA,EAAOL,EAAEmB,aAGvF,OACE1I,cAACC,IAAI,CAACK,MAAI,EAACoG,GAAI,GAAGtG,SAChBJ,cAAC+U,IAAK,CAACC,IAAKT,EAAM1Q,UAAWuQ,EAAQvB,MAAOlH,MAAO,CA5BrD8B,OAAQ,QA4ByD0F,mBAAmB8B,UAAW,EAAE7U,SAC7FC,eAACJ,IAAI,CAACC,WAAS,EAAC6D,WAAW,SAASjG,UAAU,MAAM+F,UAAWuQ,EAAQZ,UAAUpT,SAAA,CAC/EC,eAACJ,IAAI,CAACK,MAAI,EAACoG,GAAI,EAAEtG,SAAA,CACdwH,IAAS2K,IACRvS,cAACkV,GAAe,CAAClB,OAAQA,IAE1BpM,IAAS2K,IACRvS,cAACqN,IAAU,CAAAjN,SAAEN,EAAE,YAAc8H,QAGjC5H,cAACC,IAAI,CAACK,MAAI,EAACoG,GAAI,EAAEtG,SACfJ,cAACC,IAAI,CAACC,WAAS,EAACpC,UAAU,MAAMqC,eAAe,aAAa4D,WAAW,SAAQ3D,SAC5EuU,MAGL3U,cAACC,IAAI,CAACK,MAAI,EAACoG,GAAI,EAAEtG,SACfJ,cAACC,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASqC,eAAe,SAAS4D,WAAW,SAAQ3D,SAC5EJ,cAACmV,KAAM,CAACtR,UAAW,GAAGuQ,EAAQnB,QAAQmB,EAAQpB,QAAQ5S,SAAEyT,cAOtE,IAMA,SAASuB,GAAalG,EAAK3M,GAEzB,OADAN,QAAQC,IAAIwR,IACLA,GAAoBnR,EAAK,IAAM2M,CACxC,CAEA,MAAMgG,GAAkBtB,gBAAK,SAAwByB,GAAc,IAAb,OAAErB,GAAQqB,EAC9D,MAAM,EAAEvV,GAAMC,cACR2S,EAA2C,QAAlC9U,EAAU6V,IAAU3V,UAAuB0B,EAAWF,EAC/D8U,EAAU5B,GAAUE,GAC1B,OACErS,eAAAiV,WAAA,CAAAlV,SAAA,EACS,OAAN4T,QAAM,IAANA,OAAM,EAANA,EAAQuB,SACPvV,cAACmV,KAAM,CAACK,IAAK1V,EAAEsV,GAAapB,EAAOyB,OAAQzB,EAAOzR,KAAMmT,IAA8B,WAAa1B,EAAOuB,OAAQ1R,UAAWuQ,EAAQpB,UAE/H,OAANgB,QAAM,IAANA,KAAQuB,SACRvV,cAACmV,KAAM,CAACtR,UAAWuQ,EAAQpB,QAE7BhT,cAACqN,IAAU,CAAC7M,QAAQ,QAAQC,MAAM,cAAckV,UAAU,IAAGvV,UACpD,OAAN4T,QAAM,IAANA,OAAM,EAANA,EAAQyB,SAAU3V,EAAEsV,GAAapB,EAAOyB,OAAQzB,EAAOzR,OAE1DvC,cAACqN,IAAU,CAAC7M,QAAQ,QAAQC,MAAM,gBAAgBkV,UAAU,IAAGvV,UACtD,OAAN4T,QAAM,IAANA,OAAM,EAANA,EAAQ4B,SAAU9V,EAAEsV,GAAapB,EAAO4B,OAAQ5B,EAAOzR,OAE1DvC,cAACqN,IAAU,CAAC7M,QAAQ,QAAQC,MAAM,gBAAgBkV,UAAU,IAAGvV,UACtD,OAAN4T,QAAM,IAANA,OAAM,EAANA,EAAQ6B,SAAU/V,EAAEsV,GAAapB,EAAO6B,OAAQ7B,EAAOzR,SAIhE,IAKMsS,GAAiBjB,gBAAK,SAAuBkC,GAA2B,IAA1B,KAAEhX,EAAI,KAAE8I,EAAI,QAAEkN,GAASgB,EAEzE,OAIO,WAAEC,GAAcC,EAAMC,GAAWC,cACtC,MACEpX,OACAwB,KAAM,CAAEsH,OAAMkN,WACdL,QAAUC,IAAO,CACfqB,aAAcrB,EAAQqB,kBAG1B,CAACnO,IAEH,OACEvH,eAACJ,IAAI,CAACK,MAAI,EAAAF,SAAA,CACRJ,cAACmW,KAAgB,CAACC,QAASH,EAASP,IAA8B,4BAClE1V,cAAA,QAAMgV,IAAKgB,EAAMnS,UAAU,aAAa8H,MAAO,CAhBjD4B,OAAQ,OAgBqD8I,QAASN,EAAa,GAAM,GAAI3V,SACzFJ,cAACsW,KAAkB,CAAC7F,SAAUsF,EAAY,QAAQ,eAK1D,I,OC9Ke,SAASQ,GAAS7W,GAAwC,IAAvC,QAAEwB,EAAO,QAAEC,EAAO,eAAEqV,GAAgB9W,EAGpE,MAAM,EAAEI,GAAMC,eACR,OAAE0W,EAAM,OAAE7L,EAAM,iBAAE8L,EAAgB,cAAEC,EAAa,KAAEzS,EAAI,cAAE+P,EAAa,mBAAE2C,EAAkB,QAAEC,GAAY3V,GAKvGK,EAAOC,GAAYC,mBAAS,CACjC9B,UAAU,EACVmL,MAAO,KACPC,WAAY,EACZE,cAAc,EACdD,eAAgB,GAChBE,cAAeC,KAAKC,SAEf0L,EAAOC,GAAYtV,mBACxB,CACE,CAAEmG,KAAM2K,GAAoBsB,OAAQ,EAAGmD,QAAS,CAACzE,GAAeA,KAChE,CAAE3K,KAAM2K,GAAesB,OAAQ4C,EAAQO,QAAS,CAACzE,GAAkBA,KACnE,CAAE3K,KAAM2K,GAAkBsB,OAAQ,EAAGmD,QAAS,CAACzE,GAAeA,QAG3D0E,EAAiBC,GAAsBzV,wBAASU,GAGvDR,qBAAU,QAEP,IAGHA,qBAAU,KACR,GAAIJ,EAAM5B,WAAa4B,EAAM0J,aAAc,CACzC,MAAMG,EAAMD,KAAKC,MAEjB,IAAI/J,EAAW,CAAEuJ,OAAQrJ,EAAMyJ,gBAC/B3J,EAAS6J,cAAgB3J,EAAM2J,cAC/B7J,EAASwK,eAAiBT,EAC1B/J,EAASyK,aAAeV,EAAM7J,EAAM2J,cACpC/J,EAAQ,CACN,KAAQD,EACR,SAAYG,IACX,EACL,IACC,CAACE,EAAOJ,EAASD,IA4BpB,MAOMiW,EAAiBA,KACrB,IAAIhL,GAAS,EAKb,OAJA2K,EAAMM,SAASC,IACTA,EAAIzP,OAAS2K,IAAgC,IAAf8E,EAAIxD,SACpC1H,GAAS,EAAI,IAEVA,CAAM,EAMTmL,EAAaC,uBACjB,CAAC3P,EAAMtH,KAGL,MAAMkX,EAAUlX,EAAKwU,QACf2C,EAAU7P,EAGhBmP,EAASD,EAAMjP,KAAIvH,GACbA,EAAKsH,OAAS4P,EACT,IAAKlX,EAAMuT,OAAQvT,EAAKuT,OAAS,GAC/BvT,EAAKsH,OAAS6P,EAChB,IAAKnX,EAAMuT,OAAQvT,EAAKuT,OAAS,GAEjCvT,IAER,GAEL,CAACwW,IAMG1H,EAAYA,KAChB,IAAIsI,EAhEsBC,EAACd,EAASe,KACpC,IAAyB,IAArBlB,EACF,OAAOG,EACT,MAAMa,EAAmBb,EAAQvP,QAAO0M,GAQ1C,SAA4BA,EAAQ4D,GAClC,IAAIC,GAAc,EAClB,IAAK,IAAItQ,EAAI,EAAGA,EAAIyM,EAAO4D,KAAKxV,OAAQmF,IAClCqQ,EAAKE,OAAO9D,EAAO4D,KAAKrQ,MAC1BsQ,GAAc,GAElB,OAAOA,CACT,CAf6DE,CAAmB/D,EAAQ4D,KACpF,OAAOF,CAAgB,EA4DFC,CAAoBd,EAASF,GACpDO,EAAmB5L,GAAQoM,IAC3BlW,EAAS,IACJD,EACHuJ,MAAO,EACPE,eAAgB,GAChBE,cAAeC,KAAKC,OACpB,EAMEW,EAAWA,KAAO,IAADiM,EACrB,IAAKb,IAGH,OAFAlV,QAAQC,IAAI,2GACZsU,EAAe1W,EAAE,8BAGnB,MAAMmY,EAAcnB,EAAMoB,MAAKb,GAAOA,EAAIzP,OAAS2K,KAAkBsB,OACrE,IAAIsE,GAAW,GACgB,QAA5BH,EAAAf,EAAgBmB,UAAY,IAAAJ,OAAA,EAA5BA,EAA8BK,eAAiB5B,EAAOwB,IACvDE,GAAW,GACb3W,EAAS,IACJD,EACHyJ,eAAgB,IAAIzJ,EAAMyJ,eAAgB,CACxCF,MAAOvJ,EAAMuJ,MACbmN,YAAaA,EACb/L,MAAOiM,EAAWF,EAAc,EAChCK,cAAe7B,EAASwB,EACxBM,SAAUtB,EAAgBmB,GAC1BjM,OAAQgM,EAAW,WAAa,aAElCxY,SAAW4B,EAAMuJ,OAASF,EAAS,EACnCE,MAAOvJ,EAAMuJ,MAAQ,EACrBC,WAAYxJ,EAAMwJ,YAAcoN,EAAWF,EAAc,GACzDhN,cAAc,IAIhB8L,EACE,CACE,CAAEnP,KAAM2K,GAAoBsB,OAAQ,EAAGmD,QAAS,CAACzE,GAAeA,KAChE,CAAE3K,KAAM2K,GAAesB,OAAQ4C,EAAQO,QAAS,CAACzE,GAAkBA,KACnE,CAAE3K,KAAM2K,GAAkBsB,OAAQ,EAAGmD,QAAS,CAACzE,GAAeA,MAEjE,EAGH,GAAoB,OAAhBhR,EAAMuJ,MAGR,OAFA7I,QAAQC,IAAI,8BACZkN,IAKF,IAAIgJ,EAAc7W,EAAMuJ,MACJ,OAAhBvJ,EAAMuJ,OAAkBvJ,EAAMuJ,OAASmM,EAAgB7U,SACzDgW,EAAc7W,EAAMuJ,MAAQmM,EAAgB7U,QAM9C,MAoCMoW,EAAgBA,IACX,iBAAkBpS,QAClBqS,UAAUC,eAAiB,GAC3BD,UAAUE,iBAAmB,EAElCC,EAAaJ,IAAkBK,KAAeC,KAKpD,OACEzY,eAAC2C,WAAQ,CAAA5C,SAAA,CACNmB,EAAM0J,cA9CP5K,eAACoM,IAAM,CACLnH,KAAM/D,EAAM0J,aACZyB,QAASA,IAAMlL,EAAS,IAAKD,EAAO0J,cAAc,IAClD2B,sBAAoB,EACpB,kBAAgB,eAAcxM,SAAA,CAG9BJ,cAAC6M,IAAW,CAACkM,mBAAiB,EAACxW,GAAG,eAAcnC,SAC9CJ,cAACqN,IAAU,CAAC7M,QAAQ,KAAKC,MAAsE,aAA/Dc,EAAMyJ,eAAezJ,EAAMyJ,eAAe5I,OAAS,GAAG+J,OAAoB,UAAU,QAAQ/L,SAC1HJ,cAAA,KAAAI,SACgE,aAA/DmB,EAAMyJ,eAAezJ,EAAMyJ,eAAe5I,OAAS,GAAG+J,OACrDrM,EAAE,mCACDA,EAAE,yCAKTE,cAAC8M,IAAa,CAAA1M,SACZC,eAAC0M,IAAiB,CAAA3M,SAAA,CACfN,EAAE,+BAAgC,CAACkZ,SAAUzX,EAAMyJ,eAAezJ,EAAMyJ,eAAe5I,OAAS,GAAG+J,OAAQD,MAAO3K,EAAMyJ,eAAezJ,EAAMyJ,eAAe5I,OAAS,GAAG8J,QACxKpM,EAAE,+BAAgC,CAAEoM,MAAO3K,EAAMyJ,eAAenD,KAAImF,GAAKA,EAAEd,QAAO7D,QAAO,CAACkD,EAAG0B,IAAM1B,EAAI0B,GAAG,KAC3GjN,cAAA,SAAM,IAACA,cAAA,UACLuB,EAAM5B,UAAYiX,EAAqB9W,EAAE8W,GAAsB9W,EAAE,+CAGvEE,cAACkN,KAAa,CAAA9M,SACZJ,cAACO,IAAM,CAACG,QAASA,IAAMc,EAAS,IAAKD,EAAO0J,cAAc,IAAUxK,MAAM,UAAU0M,WAAS,EAACC,KAAK,QAAOhN,SACvGmB,EAAMuJ,OAASF,EAAS,EAAI9K,EAAE,wBAA0BA,EAAE,eAoBjEO,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,UAAU5D,eAAe,aAAa0D,UAAU,sBAAqBzD,SAAA,CAC7HJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACqN,IAAU,CAAC7M,QAAQ,QAAOJ,SAAEN,EAAEoE,OAGjClE,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAAC4D,QAAS,EAAGC,WAAW,UAAU5D,eAAe,gBAAgB0D,UAAU,kBAAiBzD,SAC9GJ,cAACiZ,KAAW,CAACxa,QAASma,EAAYpW,QAASgW,IAAgB,CAACU,mBAAmB,GAAM,CAAC,EAAE9Y,SACrF0W,EAAMjP,KAAI,CAAAwN,EAA0B5O,KAAK,IAA9B,KAACmB,EAAI,OAAEiM,EAAM,QAAEmD,GAAQ3B,EAAA,OACjCrV,cAAC2T,GAAa,CACZI,OAAQiD,EACRpP,KAAMA,EACNiM,OAAQA,EACRC,OAASxT,GAASgX,EAAW1P,EAAMtH,GAEnC0T,OAAQiD,EAAgBmB,GACxBnE,cAAeA,GAFVxN,EAGL,QAKRpG,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SAAA,CACpFJ,cAACC,IAAI,CAACK,MAAI,EAACoG,GAAI,EAAEtG,SAACJ,cAACC,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpGJ,cAACqN,IAAU,CAAE7M,QAAQ,QAAOJ,SAAEN,EAAE,wBAAwB,CAACgL,MAAMvJ,EAAMuJ,MAAM,EAAGF,OAAOA,UAGvF5K,cAACC,IAAI,CAACK,MAAI,EAACoG,GAAI,EAAEtG,SAACJ,cAACC,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpGJ,cAACO,IAAM,CAAC6M,KAAK,QAAQ3M,MAAO0W,IAAiB,UAAU,UAAW3W,QAAS2W,IAAiB,YAAY,WAAYzW,QAxLpGyY,KACxBhC,IAAmBpL,IAAayK,EAAe1W,EAAE,6BAA6B,EAuLyEM,SAAEN,EAAE,iCAGrJE,cAACC,IAAI,CAACK,MAAI,EAACoG,GAAI,EAAEtG,SAACJ,cAACC,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpGJ,cAACqN,IAAU,CAAC7M,QAAQ,QAAOJ,SAAEN,EAAE,yBAAyB,CAACoM,MAAM3K,EAAMwJ,2BAMjF,C,+BCzQe,SAASqO,GAAQ1Z,GAAwC,IAAvC,QAAEwB,EAAO,QAAEC,EAAO,eAAEqV,GAAgB9W,EAEnE,MAAM,EAAEI,GAAMC,eACR,OAAE0W,EAAM,OAAE7L,EAAM,iBAAE8L,EAAgB,cAAEC,EAAa,KAAEzS,EAAI,cAAE+P,EAAa,QAAE4C,GAAY3V,GAKnFK,EAAOC,GAAYC,mBAAS,CACjC9B,UAAU,EACVmL,MAAO,KACPC,WAAY,EACZE,cAAc,EACdD,eAAgB,GAChBE,cAAeC,KAAKC,MACpBiO,gBAAiB,KAEZvC,EAAOC,GAAYtV,mBACxB,CACE,CAAEmG,KAAM2K,GAAoBsB,OAAQ,EAAGmD,QAAS,CAACzE,GAAeA,KAChE,CAAE3K,KAAM2K,GAAesB,OAAQ4C,EAAQO,QAAS,CAACzE,GAAkBA,KACnE,CAAE3K,KAAM2K,GAAkBsB,OAAQ,EAAGmD,QAAS,CAACzE,GAAeA,QAG3D0E,EAAiBC,GAAsBzV,wBAASU,IAChDmX,EAAsBC,GAA2B9X,oBAAS,IAC1D+X,EAAkBC,GAAuBhY,mBAAS,MAGzDE,qBAAU,QAEP,IAGHA,qBAAU,KACR,GAAIJ,EAAM5B,WAAa4B,EAAM0J,aAAc,CACzC,MAAMG,EAAMD,KAAKC,MAEjB,IAAI/J,EAAW,CAAEuJ,OAAQrJ,EAAMyJ,gBAC/B3J,EAAS6J,cAAgB3J,EAAM2J,cAC/B7J,EAASwK,eAAiBT,EAC1B/J,EAASyK,aAAeV,EAAM7J,EAAM2J,cACpC/J,EAAQ,CACN,KAAQD,EACR,SAAYG,IACX,EACL,IACC,CAACE,EAAOJ,EAASD,IAEpBS,qBAAU,KAER,GAAIJ,EAAM0J,aAAc,CACtBsO,GAAwB,GACxB,MAAMG,EAAQvJ,YAAW,KACvBoJ,GAAwB,EAAK,GAC5B,KACHE,EAAoBC,EACtB,MAEMF,GACFtJ,aAAasJ,GAEfD,GAAwB,GAI1B,MAAO,KACDC,GACFtJ,aAAasJ,EACf,CACD,GACA,CAACjY,EAAM0J,eA4BV,MAOMkM,EAAiBA,KACrB,IAAIhL,GAAS,EAKb,OAJA2K,EAAMM,SAASC,IACTA,EAAIzP,OAAS2K,IAAgC,IAAf8E,EAAIxD,SACpC1H,GAAS,EAAI,IAEVA,CAAM,EAMTmL,EAAaC,uBACjB,CAAC3P,EAAMtH,KAGL,MAAMkX,EAAUlX,EAAKwU,QACf2C,EAAU7P,EAGhBmP,EAASD,EAAMjP,KAAIvH,GACbA,EAAKsH,OAAS4P,EACT,IAAKlX,EAAMuT,OAAQvT,EAAKuT,OAAS,GAC/BvT,EAAKsH,OAAS6P,EAChB,IAAKnX,EAAMuT,OAAQvT,EAAKuT,OAAS,GAEjCvT,IAER,GAEL,CAACwW,IAMG1H,EAAYA,KAChB,IAAIsI,EAhEsBC,EAACd,EAASe,KACpC,IAAyB,IAArBlB,EACF,OAAOG,EACT,MAAMa,EAAmBb,EAAQvP,QAAO0M,GAQ1C,SAA4BA,EAAQ4D,GAClC,IAAIC,GAAc,EAClB,IAAK,IAAItQ,EAAI,EAAGA,EAAIyM,EAAO4D,KAAKxV,OAAQmF,IAClCqQ,EAAKE,OAAO9D,EAAO4D,KAAKrQ,MAC1BsQ,GAAc,GAElB,OAAOA,CACT,CAf6DE,CAAmB/D,EAAQ4D,KACpF,OAAOF,CAAgB,EA4DFC,CAAoBd,EAASF,GACpDO,EAAmB5L,GAAQoM,IAC3BlW,EAAS,IACJD,EACHuJ,MAAO,EACPE,eAAgB,GAChBE,cAAeC,KAAKC,OACpB,EAMEW,EAAWA,KACf,IAAKoL,IAGH,OAFAlV,QAAQC,IAAI,2GACZsU,EAAe1W,EAAE,6BAGnB,MAAMmY,EAAcnB,EAAMoB,MAAKb,GAAOA,EAAIzP,OAAS2K,KAAkBsB,OACrErS,EAAS,IACJD,EACHyJ,eAAgB,IAAIzJ,EAAMyJ,eAAgB,CACxCF,MAAOvJ,EAAMuJ,MACbmN,YAAaA,EACbK,cAAe7B,EAASwB,EACxBM,SAAUtB,EAAgBmB,KAE5BzY,SAAW4B,EAAMuJ,OAASF,EAAS,EACnCE,MAAOvJ,EAAMuJ,MAAQ,EACrBC,WAAYxJ,EAAMwJ,WAAakN,EAC/BhN,cAAc,IAIhB8L,EACE,CACE,CAAEnP,KAAM2K,GAAoBsB,OAAQ,EAAGmD,QAAS,CAACzE,GAAeA,KAChE,CAAE3K,KAAM2K,GAAesB,OAAQ4C,EAAQO,QAAS,CAACzE,GAAkBA,KACnE,CAAE3K,KAAM2K,GAAkBsB,OAAQ,EAAGmD,QAAS,CAACzE,GAAeA,MAEjE,EAGH,GAAoB,OAAhBhR,EAAMuJ,MAGR,OAFA7I,QAAQC,IAAI,6BACZkN,IAKF,IAAIgJ,EAAc7W,EAAMuJ,MACJ,OAAhBvJ,EAAMuJ,OAAkBvJ,EAAMuJ,OAASmM,EAAgB7U,SACzDgW,EAAc7W,EAAMuJ,MAAQmM,EAAgB7U,QAM9C,MAgDMoW,EAAgBA,IACX,iBAAkBpS,QAClBqS,UAAUC,eAAiB,GAC3BD,UAAUE,iBAAmB,EAElCC,EAAaJ,IAAkBK,KAAeC,KAMpD,OACEzY,eAAC2C,WAAQ,CAAA5C,SAAA,CACNmB,EAAM0J,cA3DP5K,eAACoM,IAAM,CACLnH,KAAM/D,EAAM0J,aACZyB,QAASA,IAAMlL,EAAS,IAAKD,EAAO0J,cAAc,IAClD2B,sBAAoB,EACpB,kBAAgB,eAChB/I,UAAU,kBACVtB,GAAG,iBAAgBnC,SAAA,CAEnBJ,cAAC6M,IAAW,CAACtK,GAAG,eAAcnC,SAACJ,cAAA,KAAAI,SAAIN,EAAE,6BACrCE,cAAC8M,IAAa,CAAA1M,SACZC,eAAC0M,IAAiB,CAAA3M,SAAA,CACfN,EAAE,8BAA+B,CAAEoM,MAAO3K,EAAMyJ,eAAezJ,EAAMyJ,eAAe5I,OAAS,GAAG6V,cAChGnY,EAAE,8BAA+B,CAAEoM,MAAO3K,EAAMyJ,eAAenD,KAAImF,GAAKA,EAAEiL,cAAa5P,QAAO,CAACkD,EAAG0B,IAAM1B,EAAI0B,GAAG,KAChH5M,eAACsZ,IAAS,CAACpX,GAAG,wBAAwBoJ,MAAO,CAC3CiO,QAAS,OACTC,cAAe,SACf9V,WAAY,SACZ5D,eAAgB,SAChB2Z,UAAW,SACX1Z,SAAA,CACAC,eAAC0Z,KAAG,CAACxX,GAAG,sBAAsBsB,UAAWyV,EAAuB,OAAS,GAAGlZ,SAAA,CAE1EJ,cAAC+Z,KAAG,CAACH,QAAQ,OAAOzZ,eAAe,SAASqN,MAAM,OAAMpN,SACtDJ,cAACga,KAAgB,MAEnBha,cAAC+Z,KAAG,CAACE,GAAI,EAAE7Z,SACTJ,cAACqN,IAAU,CAAC7M,QAAQ,QAAOJ,SAAEN,EAAE,wCAGnCO,eAAC0Z,KAAG,CAACxX,GAAG,qBAAqBsB,UAAWyV,EAAuB,GAAK,OAAOlZ,SAAA,CACzEJ,cAACqN,IAAU,CAAC7M,QAAQ,QAAQmL,MAAO,CAACuO,cAAe,QAAQ9Z,SAAEN,EAAE,iCAC/DE,cAACqN,IAAU,CAAC7M,QAAQ,QAAQmL,MAAO,CAACuO,cAAe,QAAQ9Z,SAAEN,EAAE,iDAMvEE,cAACkN,KAAa,CAAA9M,SACZJ,cAACO,IAAM,CAACG,QAASA,IAAMc,EAAS,IAAKD,EAAO0J,cAAc,IAAUkP,UAAWb,EAAsB7Y,MAAM,UAAU0M,WAAS,EAACC,KAAK,QAAOhN,SACxImB,EAAMuJ,OAASF,EAAS,EAAI9K,EAAE,uBAAyBA,EAAE,eAqBhEO,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,UAAU5D,eAAe,aAAYC,SAAA,CAC7FJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACqN,IAAU,CAAC7M,QAAQ,QAAOJ,SAAEN,EAAEoE,OAGjClE,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAAC4D,QAAS,EAAGC,WAAW,UAAU5D,eAAe,gBAAgB0D,UAAU,kBAAiBzD,SAC9GJ,cAACiZ,KAAW,CAACxa,QAASma,EAAYpW,QAASgW,IAAgB,CAACU,mBAAmB,GAAM,CAAC,EAAE9Y,SACrF0W,EAAMjP,KAAI,CAAAwN,EAA0B5O,KAAK,IAA9B,KAACmB,EAAI,OAAEiM,EAAM,QAAEmD,GAAQ3B,EAAA,OACjCrV,cAAC2T,GAAa,CACZI,OAAQiD,EACRpP,KAAMA,EACNiM,OAAQA,EACRC,OAASxT,GAASgX,EAAW1P,EAAMtH,GAEnC0T,OAAQiD,EAAgBmB,GACxBnE,cAAeA,GAFVxN,EAGL,QAKRpG,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SAAA,CACpFJ,cAACC,IAAI,CAACK,MAAI,EAACoG,GAAI,EAAEtG,SAACJ,cAACC,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpGJ,cAACqN,IAAU,CAAC7M,QAAQ,QAAOJ,SAAEN,EAAE,uBAAuB,CAACgL,MAAMvJ,EAAMuJ,MAAM,EAAGF,OAAOA,UAGrF5K,cAACC,IAAI,CAACK,MAAI,EAACoG,GAAI,EAAEtG,SAACJ,cAACC,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpGJ,cAACO,IAAM,CAAC6M,KAAK,QAAQ3M,MAAM,UAAUD,QAAQ,WAAWE,QAhMxCyY,KACxBhC,IAAmBpL,IAAayK,EAAe1W,EAAE,4BAA4B,EA+LcM,SAAEN,EAAE,gCAGzFE,cAACC,IAAI,CAACK,MAAI,EAACoG,GAAI,EAAEtG,SAACJ,cAACC,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpGJ,cAACqN,IAAU,CAAC7M,QAAQ,QAAOJ,SAAEN,EAAE,wBAAwB,CAACoM,MAAM3K,EAAMwJ,2BAMhF,C,OCxSA,IAAIsD,GAEW,SAAS+L,GAAU1a,GAAoC,IAAnC,QAAEwB,EAAO,QAAEC,EAAO,WAAEoN,GAAY7O,EAEjE,MAAM,EAAEI,GAAMC,eACR,KAAEmE,EAAI,OAAE0G,EAAM,gBAAE4D,EAAe,iBAAEC,EAAgB,oBAAEC,EAAmB,iBAAEC,GAAqBzN,GAE5FK,EAAOC,GAAYC,mBAAS,CACjC9B,UAAU,EACVqL,eAAgB,GAChBE,cAAe,KACfW,eAAgB,KAChBC,aAAc,KACdhF,KAAM,KACNhI,KAAM,KACN8P,QAAS,KACTC,QAAS,KACTC,eAAgB,KAChBC,YAAa,KACbjE,MAAO,KACPkE,SAAU,IAIZrN,qBAAU,KAIR,MAAMsN,EAAkBxF,IACtB,MAAM,IAAEyF,EAAG,QAAEC,GAAY1F,EAGzB,GAAoB,OAAhBlI,EAAMuJ,QAA+B,KAAZqE,GAA0B,MAARD,GAE7C,YADAE,IAKF,GAAmB,YAAf7N,EAAMuF,OAAuB,CAAC,YAAa,cAAcU,SAAS0H,GACpE,OAEF,MAAMrN,EAAUN,EAAMsN,QAAQtN,EAAMuJ,MAAQ,GAC5C,IAAIuE,EAEAC,EAAe,cAANJ,GAAqBrN,EAAQ0N,WAAW,UAClC,eAANL,GAAsBrN,EAAQ0N,WAAW,QAClDC,EAAY,cAANN,GAAqBrN,EAAQ0N,WAAW,YACnC,eAANL,GAAsBrN,EAAQ0N,WAAW,YAElDF,EAASxN,EAAQwO,SAAS,OACrBb,EAAG5E,EAAOtE,IAAIT,QAAQ2J,GAAMF,EAAM,QAAQ1E,EAAOtE,IAAIT,QAAQ4J,KAE7DD,EAAG5E,EAAOyP,OAAOxU,QAAQ2J,GAAMF,EAAM,QAAQ1E,EAAOyP,OAAOxU,QAAQ4J,KACxEC,EAAeL,EAAO,EAKxB,OAFAjJ,OAAOuJ,iBAAiB,UAAWV,GAE5B,KACL7I,OAAOwJ,oBAAoB,UAAWX,EAAe,CACtD,GAEA,CAAC1N,IAGJI,qBAAU,KAER,GAAoB,OAAhBJ,EAAMsN,QAAgB,CACxB,IAAIgB,EAAO,IAAI5J,MAAM2E,EAAOkF,OAAOC,QAAQlI,KAAI,CAACN,EAAEzH,IAC7CyH,EAAEqD,EAAOtE,IAAIwJ,MACXvI,EAAEqD,EAAOtE,IAAI0J,OACP,cACLzI,EAAEqD,EAAOtE,IAAIkJ,GACR,eACLjI,EAAEqD,EAAOtE,IAAIkJ,IAAM5E,EAAOtE,IAAI2J,KAAOrF,EAAOtE,IAAI0J,QAC3C,gBACF,iBAEJzI,EAAEqD,EAAOtE,IAAIwJ,MAAMlF,EAAOyP,OAAOrK,OAC3B,iBACNzI,EAAEqD,EAAOtE,IAAIwJ,MAAMlF,EAAOyP,OAAO7K,GAC3B,kBACLjI,EAAEqD,EAAOtE,IAAIwJ,MAAOlF,EAAOyP,OAAO7K,IAAM5E,EAAOyP,OAAOpK,KAAOrF,EAAOyP,OAAOrK,QACtE,mBACF,sBAGXxO,EAAS,IAAID,EAAOsN,QAASvD,GAAQuE,IACvC,IACC,CAACtO,IAEJI,qBAAU,KA0DR,GAxDmB,aAAfJ,EAAMuF,OACRoJ,aAAa7B,IACbA,GAAQ8B,YAAW,KACjB3O,EAAS,IACJD,EACHuJ,MAAOvJ,EAAMuJ,MAAQ,EACrBgE,eAAgB3D,KAAKC,MACrBtE,KAAM,WACN,GACD2H,IAIc,aAAflN,EAAMuF,OACRoJ,aAAa7B,IACbA,GAAQ8B,YAAW,KACjB3O,EAAS,IAAKD,EAAOuF,KAAM,YAAa,GACvC6H,IAGc,YAAfpN,EAAMuF,OACRoJ,aAAa7B,IAET9M,EAAMyN,SAAWN,EACnBL,GAAQ8B,YAAW,KACjB3O,EAAS,IACJD,EACHyJ,eAAgB,IAAIzJ,EAAMyJ,eAAgB,CACxC,MAASzJ,EAAMuJ,MACf,QAAWvJ,EAAMsN,QAAQtN,EAAMuJ,MAAQ,GACvC,OAAU,KACV,QAAW,KACX,YAAe,KACf,eAAkBvJ,EAAMuN,eACxB,GAAM,OAERE,SAAUzN,EAAMyN,SAAW,EAC3BJ,SAAS,EACT9H,KAAO6H,EAAmB,EAAK,WAAa,YAC5C,GACDH,GAEHhN,EAAS,IAAKD,EAAOuF,KAAM,QAASkI,SAAU,KAKlDT,EAAW,IAAQhN,EAAMuJ,MAAQF,EAAOkF,OAEpCvO,EAAMuJ,MAAQF,EAAOkF,QACvB7N,QAAQC,IAAI,iCACZqM,EAAW,KACX/M,EAAS,IAAKD,EAAO5B,UAAU,EAAMkM,eAAgBV,KAAKC,SAIxD7J,EAAM5B,SAAU,CAClBuQ,aAAa7B,IAGb,IAAIhN,EAAW,CAAEuJ,OAAQrJ,EAAMyJ,gBAC/B3J,EAAS6J,cAAgB3J,EAAM2J,cAC/B7J,EAASwK,eAAiBtK,EAAMsK,eAChCxK,EAASyK,aAAevK,EAAMsK,eAAiBtK,EAAM2J,cACrD/J,EAAQ,CACN,KAAQD,EACR,SAAYG,IACX,EACL,IAEC,CAACE,IAGJ,MAAM6N,EAAYA,KAChB5N,EAAS,IACJD,EACHyJ,eAAgB,GAChBF,MAAO,EACPkE,SAAU,EACVlI,KAAM,WACNoE,cAAeC,KAAKC,OACpB,EAGEsE,EAAkBL,IACtB,MAAMN,EAAc5D,KAAKC,MAEzB8E,aAAa7B,IAEb,MAAM+B,EAoBR,SAAoBvB,GAClB,MAAMhJ,EAAUgJ,EAAQwB,SAAS,OAASzF,EAAOtE,IAAIT,QAAU+E,EAAOyP,OAAOxU,QAC7E,OAAOgJ,EAAQrH,SAAS,QAAU,QAAU3B,EAAQ2J,EACtD,CAvBmB8K,CAAW/Y,EAAMsN,QAAQtN,EAAMuJ,MAAQ,IACxD7I,QAAQC,IAAI,oDAAqDkO,EAAUf,EAAQ9N,EAAMsN,QAAQtN,EAAMuJ,MAAQ,IAE/GtJ,EAAS,IACJD,EACHqN,QAASwB,IAAaf,EACtBN,YAAaA,EACb/D,eAAgB,IAAIzJ,EAAMyJ,eAAgB,CACxC,MAASzJ,EAAMuJ,MACf,QAAWvJ,EAAMsN,QAAQtN,EAAMuJ,MAAQ,GACvC,OAAUuE,EACV,QAAWe,IAAaf,EACxB,YAAeN,EACf,eAAkBxN,EAAMuN,eACxB,GAAMC,EAAcxN,EAAMuN,iBAE5BhI,KAAO6H,EAAmB,EAAK,WAAa,YAC5C,EAQJ,MAAM2B,EAAiB,SAACC,GAAiC,IAAvBgK,IAAUC,UAAApY,OAAA,QAAAD,IAAAqY,UAAA,KAAAA,UAAA,GAC1C,OACEna,eAAC2C,WAAQ,CAAA5C,SAAA,CACG,UAAXmQ,GAAsBgK,GAAcva,cAAA,OAAKU,QAASA,IAAMgP,EAAe,SAAU7L,UAAU,cAAazD,SAAC,MAC9F,UAAXmQ,IAAuBgK,GAAcva,cAAA,OAAK6D,UAAU,0BAAyBzD,SAAC,MACnE,SAAXmQ,GAAqBvQ,cAAA,OAAKU,QAASA,IAAMgP,EAAe,QAAS7L,UAAU,cAAazD,SAACJ,cAACwQ,KAAI,CAACC,SAAS,QAAQ5M,UAAU,aAC/G,WAAX0M,GAAuBvQ,cAAA,OAAKU,QAASA,IAAMgP,EAAe,UAAW7L,UAAU,cAAazD,SAACJ,cAAC0Q,KAAM,CAACD,SAAS,QAAQ5M,UAAU,WACrH,cAAX0M,GAA0BvQ,cAAA,OAAKU,QAASA,IAAMgP,EAAe,aAAc7L,UAAU,cAAazD,SAACJ,cAACwQ,KAAI,CAACC,SAAS,QAAQ5M,UAAU,WACzH,kBAAX0M,GAA8BvQ,cAAA,OAAKU,QAASA,IAAMgP,EAAe,iBAAkB7L,UAAU,cAAazD,SAACJ,cAACwQ,KAAI,CAACC,SAAS,QAAQ5M,UAAU,eAGjJ,EAQM4W,EAAmBA,CAAC9J,EAAW+J,KACnC,MAAM7U,EAAU8K,EAAUN,SAAS,OAASzF,EAAOtE,IAAIT,QAAU+E,EAAOyP,OAAOxU,QAC/E,OACExF,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SAAA,CAC7E,IAANsa,GAAW/J,EAAUN,SAAS,WAAaC,EAAe,SAAQ,GAC5D,IAANoK,GAAW/J,EAAUN,SAAS,QAAUM,EAAUpB,WAAW,YAAce,EAAezK,EAAQ2J,IAC5F,IAANkL,GAAW/J,EAAUN,SAAS,QAAUM,EAAUpB,WAAW,cAAgBe,EAAezK,EAAQ4J,MAC9F,IAANiL,GAAW/J,EAAUN,SAAS,SAAYM,EAAUnJ,SAAS,aAAgBmJ,EAAUnJ,SAAS,cAAiB8I,EAAe,SAC1H,IAANoK,GAAW/J,EAAUN,SAAS,QAAUC,EAAe,SAAQ,GACzD,IAANoK,GAAW/J,EAAUN,SAAS,WAAaM,EAAUpB,WAAW,YAAce,EAAezK,EAAQ2J,IAC/F,IAANkL,GAAW/J,EAAUN,SAAS,WAAaM,EAAUpB,WAAW,cAAgBe,EAAezK,EAAQ4J,MACjG,IAANiL,GAAW/J,EAAUN,SAAS,YAAeM,EAAUpB,WAAW,aAAeoB,EAAUpB,WAAW,cAAiBe,EAAe,SACvItQ,cAACwI,IAAO,CAACoI,YAAY,WAAWC,UAAQ,IACjC,IAAN6J,GAAW/J,EAAUN,SAAS,WAAaC,EAAe,SAAQ,GAC5D,IAANoK,GAAW/J,EAAUN,SAAS,QAAUM,EAAUpB,WAAW,aAAee,EAAezK,EAAQ2J,IAC7F,IAANkL,GAAW/J,EAAUN,SAAS,QAAUM,EAAUpB,WAAW,eAAiBe,EAAezK,EAAQ4J,MAC/F,IAANiL,GAAW/J,EAAUN,SAAS,SAAYM,EAAUnJ,SAAS,cAAiBmJ,EAAUnJ,SAAS,eAAkB8I,EAAe,SAC5H,IAANoK,GAAW/J,EAAUN,SAAS,QAAUC,EAAe,SAAQ,GACzD,IAANoK,GAAW/J,EAAUN,SAAS,WAAaM,EAAUpB,WAAW,aAAee,EAAezK,EAAQ2J,IAChG,IAANkL,GAAW/J,EAAUN,SAAS,WAAaM,EAAUpB,WAAW,eAAiBe,EAAezK,EAAQ4J,MAClG,IAANiL,GAAW/J,EAAUN,SAAS,YAAeM,EAAUpB,WAAW,cAAgBoB,EAAUpB,WAAW,eAAkBe,EAAe,WACpI,EAkCX,MAAmB,UAAf/O,EAAMuF,KAENzG,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,SAAS5D,eAAe,aAAa0D,UAAU,iBAAgBzD,SAAA,CACvHJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SAACJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAE,gCAAiCqE,YAAY,EAAON,UAAU,oBAC7F7D,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACO,IAAM,CAACC,QAAQ,WAAWC,MAAM,YAAYC,QAASA,IAAM0O,IAAYhP,SAAEN,EAAE,6BAOhE,OAAhByB,EAAMuJ,MAENzK,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,SAAS5D,eAAe,aAAa0D,UAAU,iBAAgBzD,SAAA,CACvHJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SAACJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAE,4BAA6BqE,YAAY,EAAON,UAAU,oBACzF7D,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACO,IAAM,CAACC,QAAQ,WAAWE,QAASA,IAAM0O,IAAYhP,SAAEN,EAAE,2BAOhEO,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,UAAU5D,eAAe,aAAa0D,UAAU,eAAczD,SAAA,CAC3HJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAEoE,GAAOC,YAAY,EAAON,UAAU,oBAG1C,YAAftC,EAAMuF,MA5DY6J,KAErB,GAAIA,EAEJ,OACEtQ,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,UAAU5D,eAAe,aAAa0D,UAAU,wBAAuBzD,SAAA,CACnIqa,EAAiB9J,EAAU,GAC5BtQ,eAACJ,IAAI,CAACK,MAAI,EAAAF,SAAA,CAAC,IAACJ,cAACwI,IAAO,CAACoI,YAAY,eAAe,OAC/C6J,EAAiB9J,EAAU,KACvB,EAmDsBgK,CAAcpZ,EAAMsN,QAAQtN,EAAMuJ,MAAQ,IACvD,aAAfvJ,EAAMuF,MA9CPzG,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SAAA,CACnFmB,EAAMqN,SAAW5O,cAAC8Q,KAAO,CAACL,SAAS,QAAQ5M,UAAU,qBACpDtC,EAAMqN,SAAW5O,cAAC+Q,KAAS,CAACN,SAAS,QAAQ5M,UAAU,yBA6C3C,aAAftC,EAAMuF,MAtCP9G,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpFJ,cAACgR,KAAG,CAACP,SAAS,QAAQ5M,UAAU,yBAyCxC,C,OC5TA,IAAIwK,GAEW,SAASuM,GAAoBlb,GAAoC,IAAnC,QAAEwB,EAAO,QAAEC,EAAO,WAAEoN,GAAY7O,EAE3E,MAAM,EAAEI,GAAMC,eACR,KAAEmE,EAAI,OAAE0G,EAAM,gBAAE4D,EAAe,iBAAEC,EAAgB,oBAAEC,EAAmB,iBAAEC,GAAqBzN,GAE5FK,EAAOC,GAAYC,mBAAS,CACjC9B,UAAU,EACVqL,eAAgB,GAChBE,cAAe,KACfW,eAAgB,KAChBC,aAAc,KACdhF,KAAM,KACNhI,KAAM,KACN8P,QAAS,KACTC,QAAS,KACTC,eAAgB,KAChBC,YAAa,KACbjE,MAAO,KACPkE,SAAU,IAIZrN,qBAAU,KACRM,QAAQC,IAAI,4DAIZ,MAAM+M,EAAkBxF,IACtB,MAAM,IAAEyF,EAAG,QAAEC,GAAY1F,EAGzB,GAAoB,OAAhBlI,EAAMuJ,QAA+B,KAAZqE,GAA0B,MAARD,GAE7C,YADAE,IAKF,GAAmB,YAAf7N,EAAMuF,OAAuB,CAAC,YAAa,cAAcU,SAAS0H,GACpE,OAEF,MAAMrN,EAAUN,EAAMsN,QAAQtN,EAAMuJ,MAAQ,GAC5C,IAAIuE,EAEQ,cAARH,IACFG,EAASxN,EAAQ6Y,IAAM,EAAI,EAAI,GACrB,eAARxL,IACFG,EAASxN,EAAQ6Y,IAAM,EAAI,EAAI,GAEjChL,EAAeL,EAAO,EAKxB,OAFAjJ,OAAOuJ,iBAAiB,UAAWV,GAE5B,KACL7I,OAAOwJ,oBAAoB,UAAWX,EAAe,CACtD,GACA,CAAC1N,IAGJI,qBAAU,KAIR,GAFAM,QAAQC,IAAIX,EAAMsN,SAEI,OAAlBtN,EAAMsN,QAAkB,CAC1B,IAAIgB,EAAO,IAAI5J,MAAM2E,EAAOkF,OAAOC,QAAQlI,KAAI,CAACN,EAAGzH,KACjD,IAAI+a,EAAoB,CACtBH,IAAK,EACLI,OAAQ,EACRra,MAAO,GAWT,OATI8G,EAAIqD,EAAOmQ,OACbF,EAAkBH,IAAOnT,EAAIqD,EAAOqF,KAAQ,EAAI,EAChD4K,EAAkBC,OAASvT,EAAIqD,EAAOoQ,QAAU,EAAI,EACpDH,EAAkBpa,MAAQ8G,EAAIqD,EAAOqQ,OAAS,EAAI,IAElDJ,EAAkBH,IAAOnT,EAAIqD,EAAOmQ,MAASnQ,EAAOqF,KAAO,EAAI,EAC/D4K,EAAkBC,OAAUvT,EAAIqD,EAAOmQ,MAASnQ,EAAOoQ,QAAU,EAAI,EACrEH,EAAkBpa,MAAS8G,EAAIqD,EAAOmQ,MAASnQ,EAAOqQ,OAAS,EAAI,GAE9DJ,CAAiB,IAE1BrZ,EAAS,IAAKD,EAAOsN,QAASvD,GAAQuE,IACxC,IACC,CAACtO,EAAMsN,UAEVlN,qBAAU,KA0DR,GAxDmB,aAAfJ,EAAMuF,OACRoJ,aAAa7B,IACbA,GAAQ8B,YAAW,KACjB3O,EAAS,IACJD,EACHuJ,MAAOvJ,EAAMuJ,MAAQ,EACrBgE,eAAgB3D,KAAKC,MACrBtE,KAAM,WACN,GACD2H,IAIc,aAAflN,EAAMuF,OACRoJ,aAAa7B,IACbA,GAAQ8B,YAAW,KACjB3O,EAAS,IAAKD,EAAOuF,KAAM,YAAa,GACvC6H,IAGc,YAAfpN,EAAMuF,OACRoJ,aAAa7B,IAET9M,EAAMyN,SAAWN,EACnBL,GAAQ8B,YAAW,KACjB3O,EAAS,IACJD,EACHyJ,eAAgB,IAAIzJ,EAAMyJ,eAAgB,CACxC,MAASzJ,EAAMuJ,MACf,QAAWvJ,EAAMsN,QAAQtN,EAAMuJ,MAAQ,GACvC,OAAU,KACV,QAAW,KACX,YAAe,KACf,eAAkBvJ,EAAMuN,eACxB,GAAM,OAERE,SAAUzN,EAAMyN,SAAW,EAC3BJ,SAAS,EACT9H,KAAO6H,EAAmB,EAAK,WAAa,YAC5C,GACDH,GAEHhN,EAAS,IAAKD,EAAOuF,KAAM,QAASkI,SAAU,KAKlDT,EAAW,IAAQhN,EAAMuJ,MAAQF,EAAOkF,OAEpCvO,EAAMuJ,MAAQF,EAAOkF,QACvB7N,QAAQC,IAAI,iCACZqM,EAAW,KACX/M,EAAS,IAAKD,EAAO5B,UAAU,EAAMkM,eAAgBV,KAAKC,SAIxD7J,EAAM5B,SAAU,CAClBuQ,aAAa7B,IAGb,IAAIhN,EAAW,CAAEuJ,OAAQrJ,EAAMyJ,gBAC/B3J,EAAS6J,cAAgB3J,EAAM2J,cAC/B7J,EAASwK,eAAiBtK,EAAMsK,eAChCxK,EAASyK,aAAevK,EAAMsK,eAAiBtK,EAAM2J,cACrD/J,EAAQ,CACN,KAAQD,EACR,SAAYG,IACX,EACL,IAEC,CAACE,IAGJ,MAAM6N,EAAYA,KAChB5N,EAAS,IACJD,EACHyJ,eAAgB,GAChBF,MAAO,EACPkE,SAAU,EACVlI,KAAM,WACNoE,cAAeC,KAAKC,OACpB,EAGEsE,EAAkBL,IACtB,MAAMN,EAAc5D,KAAKC,MAEzB8E,aAAa7B,IAEb,MAAM+B,EAqBR,SAAgCvB,GAC9B,GAAIA,EAAQ6L,IAAM,EAChB,OAAuB,IAAnB7L,EAAQiM,OACHjM,EAAQ6L,IACV,EAAI7L,EAAQ6L,IAErB,GAAI7L,EAAQ6L,IAAM,EAChB,OAAsB,IAAlB7L,EAAQpO,MACHoO,EAAQ6L,IACM,IAAhB7L,EAAQ6L,IAAY,EAAI,CAEnC,CAhCmBQ,CAAuB3Z,EAAMsN,QAAQtN,EAAMuJ,MAAQ,IACpE7I,QAAQC,IAAI,oDAAqDkO,EAAUf,EAAQ9N,EAAMsN,QAAQtN,EAAMuJ,MAAQ,IAE/GtJ,EAAS,IACJD,EACHqN,QAASwB,IAAaf,EACtBN,YAAaA,EACb/D,eAAgB,IAAIzJ,EAAMyJ,eAAgB,CACxC,MAASzJ,EAAMuJ,MACf,QAAWvJ,EAAMsN,QAAQtN,EAAMuJ,MAAQ,GACvC,KAAQvJ,EAAMsN,QAAQtN,EAAMuJ,MAAQ,GAAG4P,IAAM,EAAI,EAAI,EACrD,OAAUrL,EACV,QAAWe,IAAaf,EACxB,YAAeN,EACf,eAAkBxN,EAAMuN,eACxB,GAAMC,EAAcxN,EAAMuN,iBAE5BhI,KAAO6H,EAAmB,EAAK,WAAa,YAC5C,EAgBJ,MAAM2B,EAAiBA,CAACC,EAAUmK,IAE9B1a,cAACgD,WAAQ,CAAA5C,SACPC,eAAA,OAAKK,QAASA,IAAMgP,EAAegL,GAAM7W,UAAU,cAAazD,SAAA,CAChD,QAAbmQ,GAAsBvQ,cAACwQ,KAAI,CAACC,SAAS,QAAQ5M,UAAU,WAC1C,QAAb0M,GAAsBvQ,cAAC0Q,KAAM,CAACD,SAAS,QAAQ5M,UAAU,WAC5C,QAAb0M,GAAsBvQ,cAACwQ,KAAI,CAACC,SAAS,QAAQ5M,UAAU,SAC1C,QAAb0M,GAAsBvQ,cAAC0Q,KAAM,CAACD,SAAS,QAAQ5M,UAAU,cAM5D4W,EAAmBA,CAACU,EAAMtM,EAAStH,EAAGQ,KAC7B,IAAToT,EAEA9a,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SAAA,CACnFkQ,EAAe,QAAS/I,GACzBvH,cAACwI,IAAO,CAACoI,YAAY,WAAWC,UAAQ,IACvCP,EAAe,QAASvI,MAI7B1H,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SAAA,EAC5E,OAAPyO,QAAO,IAAPA,OAAO,EAAPA,EAAS6L,OAAQnT,GAAK+I,EAAezB,EAAQiM,OAAS,IAAMjM,EAAQpO,MAAOoO,EAAQ6L,MAC5E,OAAP7L,QAAO,IAAPA,OAAO,EAAPA,EAAS6L,OAAQ3S,GAAKuI,EAAe,QAAS/I,GAC/CvH,cAACwI,IAAO,CAACoI,YAAY,WAAWC,UAAQ,KAChC,OAAPhC,QAAO,IAAPA,OAAO,EAAPA,EAAS6L,OAAQnT,GAAK+I,EAAe,QAASvI,IACvC,OAAP8G,QAAO,IAAPA,OAAO,EAAPA,EAAS6L,OAAQ3S,GAAKuI,EAAezB,EAAQiM,OAAS,IAAMjM,EAAQpO,MAAOoO,EAAQ6L,QAmC1F,MAAmB,UAAfnZ,EAAMuF,KAENzG,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,SAAS5D,eAAe,aAAa0D,UAAU,iBAAgBzD,SAAA,CACvHJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SAACJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAE,gCAAiCqE,YAAY,EAAON,UAAU,oBAC7F7D,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACO,IAAM,CAACC,QAAQ,WAAWC,MAAM,YAAYC,QAASA,IAAM0O,IAAYhP,SAAEN,EAAE,6BAQhE,OAAhByB,EAAMuJ,MAENzK,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,SAAS5D,eAAe,aAAa0D,UAAU,iBAAgBzD,SAAA,CACvHJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SAACJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAE,4BAA6BqE,YAAY,EAAON,UAAU,oBACzF7D,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACO,IAAM,CAACC,QAAQ,WAAWE,QAASA,IAAM0O,IAAYhP,SAAEN,EAAE,2BAOhEO,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,UAAU5D,eAAe,aAAa0D,UAAU,eAAczD,SAAA,CAC3HJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAEoE,GAAOC,YAAY,EAAON,UAAU,oBAG1C,YAAftC,EAAMuF,OA7DY+H,EA6DwBtN,EAAMsN,QAAQtN,EAAMuJ,MAAQ,GA3DvEzK,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,UAAU5D,eAAe,aAAa0D,UAAU,wBAAuBzD,SAAA,EAC5H,OAAPyO,QAAO,IAAPA,OAAO,EAAPA,EAAS6L,KAAM,GAAKD,GAAiB,EAAM5L,EAAS,EAAG,IAChD,OAAPA,QAAO,IAAPA,OAAO,EAAPA,EAAS6L,KAAM,GAAKD,GAAiB,GACtCpa,eAACJ,IAAI,CAACK,MAAI,EAAAF,SAAA,CAAC,IAACJ,cAACwI,IAAO,CAACoI,YAAY,eAAe,QACxC,OAAP/B,QAAO,IAAPA,OAAO,EAAPA,EAAS6L,KAAM,GAAKD,GAAiB,IAC9B,OAAP5L,QAAO,IAAPA,OAAO,EAAPA,EAAS6L,KAAM,GAAKD,GAAiB,EAAM5L,EAAS,EAAG,OAuD1C,aAAftN,EAAMuF,MAhDPzG,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SAAA,CACnFmB,EAAMqN,SAAW5O,cAAC8Q,KAAO,CAACL,SAAS,QAAQ5M,UAAU,qBACpDtC,EAAMqN,SAAW5O,cAAC+Q,KAAS,CAACN,SAAS,QAAQ5M,UAAU,yBA+C3C,aAAftC,EAAMuF,MAvCP9G,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpFJ,cAACgR,KAAG,CAACP,SAAS,QAAQ5M,UAAU,0BAzBfgL,KAmEzB,C,2FCnTA,IAAIR,GAEW,SAAS+M,GAAK1b,GAAkD,IAAjD,QAACwB,EAAO,QAAEC,EAAO,eAAEqV,EAAc,WAAEjI,GAAW7O,EAG1E,MAAM,EAAEI,GAAMC,eAER,KAAEmE,EAAI,OAAE0G,EAAM,gBAAE4D,EAAe,iBAAEC,EAAgB,iBAAEE,EAAgB,MAAE0M,EAAK,QAAExM,GAAY3N,EAIxFoa,EAAc,CAClBC,KAAM/K,KACNgL,OAAQ9K,KACR+K,SAAUC,KACVC,UAAWC,KACXC,KAAMC,KACNC,KAAMC,KACNC,MAAOC,KACPC,OAAQC,KACRC,IAAKC,OAGA/a,EAAOC,GAAYC,mBAAS,CACjC9B,UAAU,EACVmL,MAAO,KACPhE,KAAM,KACNkE,eAAgB,GAChBE,cAAe,KACfW,eAAgB,KAChBC,aAAc,KACdgD,eAAgB,KAChBC,YAAa,KACbF,QAAS,OAGXlN,qBAAU,KAIR,MAAMsN,EAAkBxF,IACtB,MAAM,IAAEyF,EAAG,QAAEC,GAAY1F,EAGzB,GAAoB,OAAhBlI,EAAMuJ,QAA6B,KAAVqE,GAAsB,MAAND,GAE3C,YADAE,IAKF,GAAmB,YAAf7N,EAAMuF,MAAoC,KAAZqI,GAA0B,MAARD,EAClD,OAEF,MAAMrN,EAAUN,EAAMsN,QAAQtN,EAAMuJ,MAAQ,GAC5C4E,EAAe7N,EAAQ,EAIzB,OAFAuE,OAAOuJ,iBAAiB,UAAWV,GAE5B,KACL7I,OAAOwJ,oBAAoB,UAAWX,EAAe,CACtD,GAED,CAAC1N,IAEHI,qBAAU,KAGR,GAAoB,OAAhBJ,EAAMsN,QAAgB,CACxB,IAAI0N,EAAc,EACdC,EAAa,EACb3M,EAAO,IAAI5J,MAAM2E,GAAQmF,QAAQlI,KAAI,CAACN,EAAEzH,KAC1C,IAAIgb,EAASjM,EAAQ0N,GACrB,OAAGC,EAAY1B,EAAOjH,QACpB2I,IACO,CAAC,KAAQ1B,EAAOhc,KAAM,KAAQgc,EAAOlT,QAE5C2U,IACAC,EAAc,EACXD,GAAa1N,EAAQzM,SACtBH,QAAQC,IAAI,qFAAsFqa,EAAoB,OAAP1N,QAAO,IAAPA,OAAO,EAAPA,EAASzM,QACxHma,EAAc,GAEhBzB,EAASjM,EAAQ0N,GACV,CAAC,KAAQzB,EAAOhc,KAAM,KAAQgc,EAAOlT,MAC9C,IAEFpG,EAAS,IAAID,EAAOsN,QAASvD,GAAQuE,IACvC,CA2DA,GAxDItO,EAAMuJ,MAAQF,IAChB3I,QAAQC,IAAI,iCACZqM,EAAW,KACX/M,EAAS,IAAKD,EAAO5B,UAAU,EAAMkM,eAAgBV,KAAKC,SAIzC,aAAf7J,EAAMuF,OACRoJ,aAAa7B,IACbA,GAAQ8B,YAAW,KACjB3O,EAAS,IACJD,EACHuJ,MAAOvJ,EAAMuJ,MAAQ,EACrBgE,eAAgB3D,KAAKC,MACrBtE,KAAM,WACN,GACD2H,IAIc,aAAflN,EAAMuF,OACRoJ,aAAa7B,IACbA,GAAQ8B,YAAW,KACjB3O,EAAS,IAAKD,EAAOuF,KAAM,YAAa,GACvC6H,IAIc,YAAfpN,EAAMuF,OACRoJ,aAAa7B,IACbA,GAAQ8B,YAAW,KAAO,IAADsM,EAAAC,EACvB,MAAM3N,EAAc5D,KAAKC,MAEnBgF,IAAW7O,EAAMuJ,MAAMuQ,KAAsC,QAA9BoB,EAAAlb,EAAMsN,QAAQtN,EAAMuJ,MAAQ,UAAE,IAAA2R,OAAA,EAA9BA,EAAgC7U,SAA6C,QAAzC8U,EAAGnb,EAAMsN,QAAQtN,EAAMuJ,OAASuQ,EAAM,WAAG,IAAAqB,OAAA,EAAtCA,EAAwC9U,MACpHpG,EAAS,IACJD,EACHqN,QAASwB,EACTrB,YAAaA,EACb/D,eAAgB,IAAIzJ,EAAMyJ,eAAgB,CACxC,MAASzJ,EAAMuJ,MACf,QAAWvJ,EAAMsN,QAAQtN,EAAMuJ,MAAQ,GACvC,OA1HU,aA2HV,QAAWsF,EACX,YAAerB,EACf,eAAkBxN,EAAMuN,eACxB,GAAM,OAERhI,KAAO6H,EAAmB,EAAK,WAAa,YAC5C,GACDH,IAILD,EAAW,IAAQhN,EAAMuJ,MAAQF,GAG7BrJ,EAAM5B,SAAU,CAClBuQ,aAAa7B,IAGb,IAAIhN,EAAW,CAAEuJ,OAAQrJ,EAAMyJ,gBAC/B3J,EAAS6J,cAAgB3J,EAAM2J,cAC/B7J,EAASwK,eAAiBtK,EAAMsK,eAChCxK,EAASyK,aAAevK,EAAMsK,eAAiBtK,EAAM2J,cACrD/J,EAAQ,CACN,KAAQD,EACR,SAAYG,IACX,EACL,IAEC,CAACE,IAKJ,MAAM6N,EAAYA,KAChB5N,EAAS,IACJD,EACHyJ,eAAgB,GAChBF,MAAO,EACPhE,KAAM,WACNoE,cAAeC,KAAKC,QAEtBnJ,QAAQC,IAAI,4BAA6BX,EAAMsN,QAAQ,EAOnDa,EAAkBiN,IAAc,IAADC,EAAAC,EACnC,GAAGtb,EAAMuJ,OAAOuQ,EACd,OAAO7E,EAAe1W,EAAE,yCAG1B,MAAMiP,EAAc5D,KAAKC,MACzB8E,aAAa7B,IAMb,MAAM+B,EAAW7O,EAAMuJ,MAAMuQ,IAAsC,QAA9BuB,EAAArb,EAAMsN,QAAQtN,EAAMuJ,MAAQ,UAAE,IAAA8R,OAAA,EAA9BA,EAAgChV,SAA6C,QAAzCiV,EAAGtb,EAAMsN,QAAQtN,EAAMuJ,OAASuQ,EAAM,WAAG,IAAAwB,OAAA,EAAtCA,EAAwCjV,MAEpHpG,EAAS,IACJD,EACHqN,QAASwB,EACTrB,YAAaA,EACb/D,eAAgB,IAAIzJ,EAAMyJ,eAAgB,CACxC,MAASzJ,EAAMuJ,MACf,QAAWvJ,EAAMsN,QAAQtN,EAAMuJ,MAAQ,GACvC,OAAU6R,EACV,QAAWvM,EACX,YAAerB,EACf,eAAkBxN,EAAMuN,eACxB,GAAMC,EAAcxN,EAAMuN,iBAE5BhI,KAAO6H,EAAmB,EAAK,WAAa,YAC5C,EAyEJ,OAAoB,OAAhBpN,EAAMuJ,MAENzK,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,SAAS5D,eAAe,aAAa0D,UAAU,iBAAgBzD,SAAA,CACvHJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SAACJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAE,uBAAwBqE,YAAY,EAAON,UAAU,oBACpF7D,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACO,IAAM,CAACC,QAAQ,WAAWE,QAASA,IAAM0O,IAAYhP,SAAEN,EAAE,sBAOhEO,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,UAAU5D,eAAe,aAAa0D,UAAU,kBAAiBzD,SAAA,CACzHJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAEoE,GAAOC,YAAY,EAAON,UAAU,oBAE1DxD,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,SAAS4D,WAAW,SAASF,UAAU,uBAAsBzD,SAAA,CAC/F,YAAfmB,EAAMuF,MAjFWyJ,KAEtB,GADAtO,QAAQC,IAAI,iBAAiBqO,GACf,OAAXA,QAA8BpO,IAAXoO,EAEpB,OADAtO,QAAQC,IAAI,yBAAyBX,GAEnCvB,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,WAIlF,GAAmB,SAAhBwM,EAASzR,KAAc,CACxB,IAAIwc,EAAY/K,EAAS3I,MACvB,OACE5H,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpFJ,cAACgD,WAAQ,CAAA5C,SACPJ,cAAC+Z,KAAG,CAACrZ,QAASA,IAAMgP,EAAea,GAAW1M,UAAU,uCAAsCzD,SAC5FJ,cAAC8c,KAAK,CAACrM,SAAS,QAAQ5M,UAAU,sCAM5C,MAAMkZ,EAAmBzB,EAAY/K,EAAS3I,MAC9C,OACE5H,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpFJ,cAAC+Z,KAAG,CAACrZ,QAASA,IAAMgP,EAAea,GAAW1M,UAAU,uCAAsCzD,SAC5FJ,cAAC+c,EAAgB,CAACtM,SAAS,QAAQ5M,UAAU,mCAIrD,CAAM,MAAmB,WAAhB0M,EAASzR,KAEdkB,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpFJ,cAAC+Z,KAAG,CAACrZ,QAASA,IAAMgP,EAAea,GAAW1M,UAAU,yCAAyCmZ,UAAU,SAAQ5c,SACjHC,eAACgN,IAAU,CAACvO,KAAK,OAAO+E,UAAU,+BAA8BzD,SAAA,CAAC,IAAEmQ,EAAS3I,KAAK,gBAJnF,CAQN,EA4CkC0I,CAAe/O,EAAMsN,QAAQtN,EAAMuJ,MAAM,IACvD,aAAfvJ,EAAMuF,MAAuBvF,EAAMuJ,MAAMuQ,GArC5Chb,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SAAA,CACnFmB,EAAMqN,SAAW5O,cAAC8Q,KAAO,CAACL,SAAS,QAAQ5M,UAAU,kCACpDtC,EAAMqN,SAAW5O,cAAC+Q,KAAS,CAACN,SAAS,QAAQ5M,UAAU,sCAoCzC,aAAftC,EAAMuF,MA1BT9G,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpFJ,cAACgR,KAAG,CAACP,SAAS,QAAQ5M,UAAU,kDA6BxC,C,OC5SA,IAAIwK,GAEW,SAAS4O,GAASvd,GAAkD,IAAjD,QAACwB,EAAO,QAAEC,EAAO,WAAEoN,EAAU,eAAEiI,GAAe9W,EAE9E,MAAM,EAAEI,GAAMC,eACR,KAAEmE,EAAI,OAAE0G,EAAM,gBAAE4D,EAAe,iBAAEC,EAAgB,iBAAEE,EAAgB,QAAE9I,GAAY3E,EAGjFoa,EAAc,CAClBC,KAAM/K,KACNgL,OAAQ9K,KACR+K,SAAUC,KACVC,UAAWC,KACXC,KAAMC,KACNC,KAAMC,KACNC,MAAOC,KACPC,OAAQC,KACRC,IAAKC,OAGA/a,EAAOC,GAAYC,mBAAS,CACjC9B,UAAU,EACVmL,MAAO,KACPhE,KAAM,KACNkE,eAAgB,GAChBE,cAAe,KACfW,eAAgB,KAChBC,aAAc,KACdgD,eAAgB,KAChBC,YAAa,KACbF,QAAS,KACTD,QAAS,OAGXjN,qBAAU,KAIR,MAAMsN,EAAkBxF,IACtB,MAAM,IAAEyF,EAAG,QAAEC,GAAY1F,EAGzB,GAAoB,OAAhBlI,EAAMuJ,QAA6B,KAAVqE,GAAsB,MAAND,GAE3C,YADAE,IAKF,GAAmB,YAAf7N,EAAMuF,MAAoC,KAAZqI,GAA0B,MAARD,EAClD,OAEF,MAAMrN,EAAUN,EAAMsN,QAAQtN,EAAMuJ,MAAQ,GAC5C4E,EAAe7N,EAAQ,EAIzB,OAFAuE,OAAOuJ,iBAAiB,UAAWV,GAE5B,KACL7I,OAAOwJ,oBAAoB,UAAWX,EAAe,CACtD,GAED,CAAC1N,IAGHI,qBAAU,KAGR,GAAoB,OAAhBJ,EAAMsN,QAAgB,CACxB5M,QAAQC,IAAI0I,GACZ,IAAIiF,EAAO,IAAI5J,MAAM2E,EAAOkF,OAAOC,QAAQlI,KAAI,CAACN,EAAEzH,IAC5CyH,EAAEqD,EAAO4E,GACJ,CAAC,UAAa,KAAM,KAAQ3J,EAAQ2J,GAAG1Q,KAAM,KAAOkP,GAAOnI,EAAQ2J,GAAG0N,QAEtE,CAAC,UAAa,OAAQ,KAAQrX,EAAQ4J,KAAK3Q,KAAM,KAAOkP,GAAOnI,EAAQ4J,KAAKyN,UAEvF1b,EAAS,IAAID,EAAOsN,QAASvD,GAAQuE,IACvC,CA2DA,GAxDmB,aAAftO,EAAMuF,OACRoJ,aAAa7B,IACbA,GAAQ8B,YAAW,KACf3O,EAAS,IACJD,EACHuJ,MAAOvJ,EAAMuJ,MAAM,EACnBgE,eAAgB3D,KAAKC,MACrBtE,KAAM,WACN,GACD2H,IAIY,aAAflN,EAAMuF,OACRoJ,aAAa7B,IACbA,GAAQ8B,YAAW,KACf3O,EAAS,IAAID,EAAOuF,KAAM,YAAY,GACrC6H,IAIY,YAAfpN,EAAMuF,OACRoJ,aAAa7B,IACbA,GAAQ8B,YAAW,KAAO,IAADsM,EAAAU,EACvB,MAAMpO,EAAc5D,KAAKC,MACzBnJ,QAAQC,IAAI,oCAAqCX,EAAMsN,QAAQtN,EAAMuJ,MAAM,IAC3E,MAAMsF,EAAwC,QAAhCqM,EAAIlb,EAAMsN,QAAQtN,EAAMuJ,MAAM,UAAE,IAAA2R,GAAW,QAAXU,EAA5BV,EAA8B9L,iBAAS,IAAAwM,OAAX,EAA5BA,EAAyC9M,SAAS,QACpE7O,EAAS,IACJD,EACHqN,QAASwB,EACTrB,YAAaA,EACb/D,eAAgB,IAAIzJ,EAAMyJ,eAAgB,CACxC,MAASzJ,EAAMuJ,MACf,QAAWvJ,EAAMsN,QAAQtN,EAAMuJ,MAAM,GACrC,OA1GU,aA2GV,QAAWsF,EACX,YAAerB,EACf,eAAkBxN,EAAMuN,eACxB,GAAM,OAERhI,KAAO6H,EAAiB,EAAG,WAAW,YACtC,GACDH,IAILD,EAAW,IAAQhN,EAAMuJ,MAAQF,EAAOkF,OAGpCvO,EAAMuJ,MAAMF,EAAOkF,QACrB7N,QAAQC,IAAI,iCACZqM,EAAW,KACX/M,EAAS,IAAID,EAAO5B,UAAU,EAAMkM,eAAgBV,KAAKC,SAIvD7J,EAAM5B,SAAU,CAClBuQ,aAAa7B,IAGb,IAAIhN,EAAW,CAACuJ,OAAQrJ,EAAMyJ,gBAC9B3J,EAAS6J,cAAgB3J,EAAM2J,cAC/B7J,EAASwK,eAAiBtK,EAAMsK,eAChCxK,EAASyK,aAAevK,EAAMsK,eAAiBtK,EAAM2J,cACrD/J,EAAQ,CACN,KAAQD,EACR,SAAYG,IACX,EACL,IAEA,CAACE,IAEH,MAAM6N,EAAYA,KAChB5N,EAAS,IACJD,EACHyJ,eAAgB,GAChBF,MAAO,EACPhE,KAAM,WACNoE,cAAeC,KAAKC,QAEtBnJ,QAAQC,IAAI,4BAA6BX,EAAMsN,QAAQ,EAOnDa,EAAkBiN,IAAc,IAADD,EAAAU,EACnC,MAAMrO,EAAc5D,KAAKC,MACzB8E,aAAa7B,IAEb,MAAM+B,IAAwC,QAA7BsM,EAACnb,EAAMsN,QAAQtN,EAAMuJ,MAAM,UAAE,IAAA4R,GAAW,QAAXU,EAA5BV,EAA8B/L,iBAAS,IAAAyM,GAAvCA,EAAyC/M,SAAS,SAEpE7O,EAAS,IACJD,EACHqN,QAASwB,EACTrB,YAAaA,EACb/D,eAAgB,IAAIzJ,EAAMyJ,eAAgB,CACxC,MAASzJ,EAAMuJ,MACf,QAAWvJ,EAAMsN,QAAQtN,EAAMuJ,MAAM,GACrC,OAAU6R,EACV,QAAWvM,EACX,YAAerB,EACf,eAAkBxN,EAAMuN,eACxB,GAAMC,EAAcxN,EAAMuN,iBAE5BhI,KAAO6H,EAAiB,EAAG,WAAW,YACtC,EAwEJ,OAAoB,OAAhBpN,EAAMuJ,MAENzK,eAACJ,IAAI,CAACC,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,SAAS5D,eAAe,aAAa0D,UAAU,iBAAgBzD,SAAA,CACvHJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SAACJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAE,2BAA4BqE,YAAY,EAAON,UAAU,oBACxF7D,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACO,IAAM,CAACC,QAAQ,WAAWE,QAASA,IAAM0O,IAAYhP,SAAEN,EAAE,0BAOhEO,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,SAASgG,QAAS,EAAGC,WAAW,UAAU5D,eAAe,aAAa0D,UAAU,sBAAqBzD,SAAA,CAClIJ,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAEoE,GAAOC,YAAY,EAAON,UAAU,oBAE1DxD,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,SAAS4D,WAAW,SAASF,UAAU,uBAAsBzD,SAAA,CAC/F,YAAfmB,EAAMuF,MAjFWyJ,KAEtB,GADAtO,QAAQC,IAAI,mBAAmBqO,GACjB,OAAXA,QAA8BpO,IAAXoO,EAEpB,OADAtO,QAAQC,IAAI,yBAAyBX,GAEnCvB,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,WAIlF,GAAmB,SAAhBwM,EAASzR,KAAc,CACxB,IAAIwc,EAAY/K,EAAS3I,MACvB,OACE5H,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpFJ,cAACgD,WAAQ,CAAA5C,SACPJ,cAAC+Z,KAAG,CAACrZ,QAASA,IAAMgP,EAAea,GAAW1M,UAAU,uCAAsCzD,SAC5FJ,cAAC8c,KAAK,CAACrM,SAAS,QAAQ5M,UAAU,sCAM5C,MAAMkZ,EAAmBzB,EAAY/K,EAAS3I,MAC9C,OACE5H,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpFJ,cAAC+Z,KAAG,CAACrZ,QAASA,IAAMgP,EAAea,GAAW1M,UAAU,uCAAsCzD,SAC5FJ,cAAC+c,EAAgB,CAACtM,SAAS,QAAQ5M,UAAU,mCAIrD,CAAM,MAAmB,WAAhB0M,EAASzR,KAEdkB,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpFJ,cAAC+Z,KAAG,CAACrZ,QAASA,IAAMgP,EAAea,GAAW1M,UAAU,yCAAyCmZ,UAAU,SAAQ5c,SACjHC,eAACgN,IAAU,CAACvO,KAAK,OAAO+E,UAAU,+BAA8BzD,SAAA,CAAC,IAAEmQ,EAAS3I,KAAK,gBAJnF,CAQN,EA4CkC0I,CAAe/O,EAAMsN,QAAQtN,EAAMuJ,MAAM,IACvD,aAAfvJ,EAAMuF,MArCTzG,eAACJ,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SAAA,CACnFmB,EAAMqN,SAAW5O,cAAC8Q,KAAO,CAACL,SAAS,QAAQ5M,UAAU,kCACpDtC,EAAMqN,SAAW5O,cAAC+Q,KAAS,CAACN,SAAS,QAAQ5M,UAAU,sCAoCzC,aAAftC,EAAMuF,MA1BT9G,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAACpC,UAAU,MAAMqC,eAAe,eAAe4D,WAAW,SAAQ3D,SACpFJ,cAACgR,KAAG,CAACP,SAAS,QAAQ5M,UAAU,yDA8BxC,CCvRe,SAASwZ,GAAMhY,GAE5BmE,IAAQ8T,WAAW,gBACnB,MAAM,EAACxd,EAAC,KAAE/B,GAAQgC,cAClB,IAAI,KAACmU,EAAI,QAAErL,GAAWsL,cAGlBzP,EAVG,IAAIC,gBAAgBC,cAAcC,QAYzC,MAAM6N,EAAuC,QAA9B9U,EAAUsW,GAAMpW,UAAqB0B,EAASF,EACvDie,EAAkBjc,kBAAO,IAExBC,EAAOC,GAAYC,mBAAS,CACjC+b,aAASrb,EACTsb,aAAStb,EACTub,SAAU,EACV/d,UAAU,EACVge,SAAS,EACTxU,KAAM,CAAC,EACPyU,iBAAkB,EAClBrU,UAAW,GACXsU,WAAY,CAAC,KAGRC,EAAcC,GAAmBtc,wBAASU,GAE3C6b,EAAY,SAACC,GAA0B,IAApBC,EAAQ1D,UAAApY,OAAA,QAAAD,IAAAqY,UAAA,IAAAA,UAAA,GAC/BvY,QAAQC,IAAI,kBAAmB+b,GAE3BC,GACFre,IAGF2B,GAAS2c,IACA,IACFA,EACH5U,UAAW,IAAI4U,EAAK5U,UAAW0U,GAC/BN,SAAS,KAGf,EAEMS,EAAsBC,IAE1B,MAAMC,EAAsBD,EAA0B,IAEtD7c,GAAS2c,IACA,IACFA,EACHT,SAAU,KAAOS,EAAKP,iBAAmBU,GAC/BH,EAAKN,WAAWU,MAAMnc,UAGlC,EAGEvC,EAASA,KAAO,IAAD2e,IAEdjd,EAAM4H,KAAKsV,WAAwC,QAA5BD,EAAAjd,EAAM4H,KAAKhD,yBAAiB,IAAAqY,OAAA,EAA5BA,EAA8Bpc,QAAO,IAAOmb,EAAgB1b,SAKxF0b,EAAgB1b,SAAU,EAE1BL,GAAS2c,IACP,MAAMO,EAAgBP,EAAKP,iBAAmB,EAE9C,OAAIc,EAAgBP,EAAKN,WAAWU,MAAMnc,OACjC,IACF+b,EACHR,SAAS,EACTD,SAAU,IAAMgB,EAAgBP,EAAKN,WAAWU,MAAMnc,OACtD+G,KAAMgV,EAAKN,WAAWU,MAAMG,GAC5Bd,iBAAkBc,GAGb,IACFP,EACHT,SAAU,IACV/d,UAAU,EACVge,SAAS,EAEb,KAxBAI,EAAgBje,EAAE,mBAyBlB,EA6EJ,OARA6B,qBAAU,KACR5D,EAAK4gB,eAAezK,GACpBtK,MAA+B,gBAAgBf,UAC5CsB,MAAKnI,GAAQA,EAAKoI,SAClBD,MAAK0T,GAxBeA,KACvB5b,QAAQC,IAAI,sBAAuB2b,GACnC5b,QAAQC,IAAI,kBAAkBwC,EAAMQ,IAAI,iBACxC1D,GAAS2c,IACA,IACFA,EACHS,UAAWzT,KAAKC,MAChByS,WAAYA,EACZD,iBAAkB,EAClBzU,KAAM0U,EAAWU,MAAM,OAKzB/U,IAAQqV,KAAK,CAAEC,QAAS,WAAYC,KAAM3Y,OAAO4Y,SAASC,SAAWphB,MAAO,iBAC9E,EASsBqhB,CAAgBrB,IAAY,GAClD,CAAChV,IAKD7I,cAACmf,IAAa,CAACzM,MAAOA,EAAMtS,SAC1BC,eAAA,OAAK+e,IAAKxhB,EAAUsW,GAAMpW,UAAUsC,SAAA,CAClCJ,cAACqf,IAAW,IAEZrf,cAACsf,IAAc,CAAC9e,QAAQ,cAAckB,MAAOH,EAAMmc,WAEnD1d,cAAC2Z,IAAS,CAAC4F,SAAS,KAAK1b,UAAU,kBAAiBzD,SAClDC,eAACJ,IAAI,CAACC,WAAS,EACb4D,QAAS,EACThG,UAAU,SACVqC,eAAe,aACf4D,WAAW,UACXF,UAAU,uBAAsBzD,SAAA,CAEhCJ,cAACwf,IAAQ,CACPla,UAAuBnD,IAAjB2b,EACN2B,iBAAkB,IAClB/S,QAASA,IAAMqR,OAAgB5b,GAAW/B,SAE1CJ,cAAC0f,IAAK,CAAChT,QAASA,IAAMqR,OAAgB5b,GAAYwd,SAAS,QAAOvf,SAAEN,EAAEge,OAGxE9d,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRC,eAAC0U,IAAK,CAAClR,UAAU,iBAAgBzD,SAAA,EAC/BmB,EAAM5B,UAAY4B,EAAMoc,SAAW3d,cAAA,OAAAI,SAAMN,EAAE,cAC3CyB,EAAMoc,SApGAxU,KAElB,GAAI5H,EAAM5B,SACR,OACEK,cAAC2I,EAAU,CAACC,WAAY,CACtBgX,aAAclb,EAAMQ,IAAI,gBACxB2a,SAAUnb,EAAMQ,IAAI,YACpB4a,WAAYpb,EAAMQ,IAAI,cACtB0Z,UAAWrd,EAAMqd,UACjBrV,UAAWhI,EAAMgI,WACjBV,QAASA,EAASC,eAAgBvH,EAAMsc,WAAW/U,iBAIzD,OAAW,OAAJK,QAAI,IAAJA,OAAI,EAAJA,EAAMrK,MACX,IAAK,OACH,OAAOkB,cAACiB,EAAI,CAACE,QAAS6c,EAAW9c,QAASiI,EAAoB/H,WAAa4L,GAAMuQ,EAAgB1b,QAAUmL,GAAtD7D,EAAK5G,IAC5D,IAAK,WACH,OAAOvC,cAACwE,EAAQ,CAACrD,QAAS6c,EAAW9c,QAASiI,EAAoB/H,WAAa4L,GAAMuQ,EAAgB1b,QAAUmL,GAAtD7D,EAAK5G,IAChE,IAAK,OACH,OAAOvC,cAACwK,GAAI,CAACrJ,QAAS6c,EAAW9c,QAASiI,GAAWA,EAAK5G,IAC5D,IAAK,SACH,OAAOvC,cAACsO,GAAM,CAACnN,QAAS6c,EAAWzP,WAAY6P,EAAoBld,QAASiI,GAAWA,EAAK5G,IAC9F,IAAK,SACH,OAAOvC,cAACiR,GAAM,CAAC9P,QAAS6c,EAAW9c,QAASiI,GAAWA,EAAK5G,IAC9D,IAAK,SACH,OAAOvC,cAAC2F,EAAM,CAACxE,QAAS6c,EAAW9c,QAASiI,EAAoB/H,WAAa4L,GAAMuQ,EAAgB1b,QAAUmL,GAAtD7D,EAAK5G,IAC9D,IAAK,YACH,OAAOvC,cAACuW,GAAS,CAACpV,QAAS6c,EAAW9c,QAASiI,EAAoBqN,eAAgBuH,GAAzB5U,EAAK5G,IACjE,IAAK,WACH,OAAOvC,cAACoZ,GAAQ,CAACjY,QAAS6c,EAAW9c,QAASiI,EAAoBqN,eAAgBuH,GAAzB5U,EAAK5G,IAChE,IAAK,aACH,OAAOvC,cAACoa,GAAU,CAACjZ,QAAS6c,EAAWzP,WAAY6P,EAAoBld,QAASiI,EAAoBqN,eAAgBuH,GAAzB5U,EAAK5G,IAClG,IAAK,wBACH,OAAOvC,cAAC4a,GAAoB,CAACzZ,QAAS6c,EAAWzP,WAAY6P,EAAoBld,QAASiI,EAAoBqN,eAAgBuH,GAAzB5U,EAAK5G,IAC5G,IAAK,QACH,OAAOvC,cAACob,GAAK,CAACja,QAAS6c,EAAWzP,WAAY6P,EAAoBld,QAASiI,EAAoBqN,eAAgBuH,GAAzB5U,EAAK5G,IAC7F,IAAK,YACH,OAAOvC,cAACid,GAAS,CAAC9b,QAAS6c,EAAWzP,WAAY6P,EAAoBld,QAASiI,EAAoBqN,eAAgBuH,GAAzB5U,EAAK5G,IACjG,QACE,OAAOvC,cAAA,OAAAI,SAAK,qBAChB,EA2D6B2f,CAAWxe,EAAM4H,YAGpC,CAAC,SAAS,OAAO,SAAS,YAAY,WAAW,aAAa,wBAAwB,QAAQ,aAAa3B,SAASjG,EAAM4H,KAAKrK,QAAUyC,EAAMoc,SACjJ3d,cAACC,IAAI,CAACK,MAAI,EAAAF,SACRJ,cAACP,EAAU,CAACI,OAAQA,EAAQF,SAAU4B,EAAM5B,SAAUC,WAAY2B,EAAMsc,WAAWje,wBAQjG,CCtOe,SAASogB,KACtB,OACEhgB,cAAA,OAAK6D,UAAU,QAAOzD,SAAC,UAI3B,C,OCOe,SAAS6f,GAAiB5a,GAEvC,MAAM,EAAEvF,GAAMC,cACd,IAAI,QAAC8I,GAAWsL,cAGhB,OACE9T,eAAC8e,IAAa,CAACzM,MAAOpT,EAASc,SAAA,CAC7BJ,cAACqf,IAAW,IAEZrf,cAAC2Z,IAAS,CAAC4F,SAAS,KAAK1b,UAAU,kBAAiBzD,SAClDJ,cAACC,IAAI,CAACK,MAAI,EAACJ,WAAS,EAClB4D,QAAS,EACThG,UAAU,SACVqC,eAAe,aACf4D,WAAW,UAAS3D,SAEpBC,eAAC0U,IAAK,CAAClR,UAAU,sBAAqBzD,SAAA,CAEtCJ,cAACgE,IAAQ,CAACC,OAAQnE,EAAE,0BAA2BqE,YAAY,EAAQN,UAAU,kBAC7E7D,cAACC,IAAI,CAACC,WAAS,EAACpC,UAAU,MAAMgG,QAAS,EAAG3D,eAAe,eAAcC,SACxEuR,OAAOuO,QAAQtiB,GAAWiK,KAAInI,IAAA,IAAEwP,EAAKiR,GAAIzgB,EAAA,OACxCM,cAACC,IAAI,CAACK,MAAI,EAAWoG,GAAI,EAAEtG,SACzBJ,cAACO,IAAM,CAACoV,UAAWyK,IAAMC,GAAI,IAAIxX,KAAWqG,IAAO5K,WAAS,EAAC9D,QAAQ,WAAUJ,SAAE+f,EAAItiB,SADvEqR,EAET,eAQnB,CCjCe,SAASoR,KAMtB,OALA3e,qBAAU,KAER6H,IAAQqV,KAAK,CAAEC,QAAS,WAAYC,KAAM3Y,OAAO4Y,SAASC,UAAW,GACpE,CAAC7Y,OAAO4Y,SAASC,WAGlBjf,cAACugB,IAAM,CAACC,SAAS,IAAGpgB,SAChBC,eAACogB,IAAM,CAAArgB,SAAA,CACLJ,cAAC0gB,IAAK,CAACC,OAAK,EAACC,KAAK,IAAGxgB,SAACJ,cAACggB,GAAK,MAC5BhgB,cAAC0gB,IAAK,CAACE,KAAK,kBAAiBxgB,SAACJ,cAACqd,GAAK,MACpCrd,cAAC0gB,IAAK,CAACE,KAAK,YAAWxgB,SAACJ,cAACigB,GAAgB,MACzCjgB,cAAC0gB,IAAK,CAACE,KAAK,SAAQxgB,SAACJ,cAACggB,GAAK,UAIrC,C,cCnBAxW,IAAQ8T,WAAW,gBAEnBuD,IAASC,OAEP9gB,cAAC+gB,WAAQ,CAACC,SAAS,UAAS5gB,SAC5BJ,cAACihB,KAAe,CAACljB,KAAMA,EAAKqC,SAC1BJ,cAACsgB,GAAS,QAGV5U,SAASwV,eAAe,Q","file":"static/js/main.7da565fb.chunk.js","sourcesContent":["import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport Backend from \"i18next-xhr-backend\";\n\nexport const languages = {\n  'en': {title: 'English', direction: 'ltr'},\n  'fa': {title: 'فارسی', direction: 'rtl'},\n  'ar': {title: 'عربی', direction: 'rtl'}\n}\n\n\ni18n\n  .use(Backend)\n  .use(initReactI18next)\n  .init({\n/*    \n    resources: {\n      en: { translation: en_locale },\n      fa: { translation: fa_locale },\n    },\n*/\n    lng: \"en\",\n    fallbackLng: 'en',\n    debug: process.env.NODE_ENV !== 'production',\n    keySeparator: false,\n    backend: {\n      loadPath: process.env.PUBLIC_URL + '/locales/{{lng}}.json',\n    },\n  });\n\nexport default i18n;","import {createMuiTheme, responsiveFontSizes} from '@material-ui/core';\n\nconst darkTheme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    primary: {\n      main: '#039be5'\n    },\n    secondary: {\n      main: '#f06292'\n    }\n  },\n  typography: {\n    fontFamily: [\n      'Vazir',\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'Roboto',\n      '\"Helvetica Neue\"',\n      'Arial',\n      'sans-serif',\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"',\n    ].join(',')\n  }\n});\n\nconst rtlDarkTheme = createMuiTheme({\n  direction: 'rtl',\n  palette: {\n    type: 'dark',\n    primary: {\n      main: '#039be5'\n    },\n    secondary: {\n      main: '#f06292'\n    }\n  },\n  typography: {\n    fontFamily: [\n      'Vazir',\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'Roboto',\n      '\"Helvetica Neue\"',\n      'Arial',\n      'sans-serif',\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"',\n    ].join(',')\n  }\n})\n\nexport const ltrTheme = responsiveFontSizes(darkTheme);\nexport const rtlTheme = responsiveFontSizes(rtlDarkTheme);\n","import React from 'react';\n\nimport {Button, Grid} from '@material-ui/core';\n\nimport {useTranslation} from 'react-i18next';\n\nexport default function Navigation({finished, redirectTo, onNext}) {\n\n  const {t} = useTranslation();\n\n  return (\n    <Grid container direction='row' justifyContent='flex-end'>\n      <Grid item>\n        {!finished && \n          <Button variant=\"contained\" color=\"primary\" onClick={onNext}>{t('next')}</Button>\n        }\n        {finished && redirectTo &&\n          <Button variant=\"contained\" color=\"primary\" href={redirectTo}>{t('finish_and_redirect')}</Button>        \n        }\n      </Grid>\n\n    </Grid>\n  );\n}","// From https://bitbucket.org/atlassian/atlaskit-mk-2/raw/4ad0e56649c3e6c973e226b7efaeb28cb240ccb0/packages/core/select/src/data/countries.js\nconst countries = [\n  { code: 'AD', label: 'Andorra', phone: '376' },\n  { code: 'AE', label: 'United Arab Emirates', phone: '971' },\n  { code: 'AF', label: 'Afghanistan', phone: '93' },\n  { code: 'AG', label: 'Antigua and Barbuda', phone: '1-268' },\n  { code: 'AI', label: 'Anguilla', phone: '1-264' },\n  { code: 'AL', label: 'Albania', phone: '355' },\n  { code: 'AM', label: 'Armenia', phone: '374' },\n  { code: 'AO', label: 'Angola', phone: '244' },\n  { code: 'AQ', label: 'Antarctica', phone: '672' },\n  { code: 'AR', label: 'Argentina', phone: '54' },\n  { code: 'AS', label: 'American Samoa', phone: '1-684' },\n  { code: 'AT', label: 'Austria', phone: '43' },\n  { code: 'AU', label: 'Australia', phone: '61', suggested: true },\n  { code: 'AW', label: 'Aruba', phone: '297' },\n  { code: 'AX', label: 'Alland Islands', phone: '358' },\n  { code: 'AZ', label: 'Azerbaijan', phone: '994' },\n  { code: 'BA', label: 'Bosnia and Herzegovina', phone: '387' },\n  { code: 'BB', label: 'Barbados', phone: '1-246' },\n  { code: 'BD', label: 'Bangladesh', phone: '880' },\n  { code: 'BE', label: 'Belgium', phone: '32' },\n  { code: 'BF', label: 'Burkina Faso', phone: '226' },\n  { code: 'BG', label: 'Bulgaria', phone: '359' },\n  { code: 'BH', label: 'Bahrain', phone: '973' },\n  { code: 'BI', label: 'Burundi', phone: '257' },\n  { code: 'BJ', label: 'Benin', phone: '229' },\n  { code: 'BL', label: 'Saint Barthelemy', phone: '590' },\n  { code: 'BM', label: 'Bermuda', phone: '1-441' },\n  { code: 'BN', label: 'Brunei Darussalam', phone: '673' },\n  { code: 'BO', label: 'Bolivia', phone: '591' },\n  { code: 'BR', label: 'Brazil', phone: '55' },\n  { code: 'BS', label: 'Bahamas', phone: '1-242' },\n  { code: 'BT', label: 'Bhutan', phone: '975' },\n  { code: 'BV', label: 'Bouvet Island', phone: '47' },\n  { code: 'BW', label: 'Botswana', phone: '267' },\n  { code: 'BY', label: 'Belarus', phone: '375' },\n  { code: 'BZ', label: 'Belize', phone: '501' },\n  { code: 'CA', label: 'Canada', phone: '1', suggested: true },\n  { code: 'CC', label: 'Cocos (Keeling) Islands', phone: '61' },\n  { code: 'CD', label: 'Congo, Democratic Republic of the', phone: '243' },\n  { code: 'CF', label: 'Central African Republic', phone: '236' },\n  { code: 'CG', label: 'Congo, Republic of the', phone: '242' },\n  { code: 'CH', label: 'Switzerland', phone: '41' },\n  { code: 'CI', label: \"Cote d'Ivoire\", phone: '225' },\n  { code: 'CK', label: 'Cook Islands', phone: '682' },\n  { code: 'CL', label: 'Chile', phone: '56' },\n  { code: 'CM', label: 'Cameroon', phone: '237' },\n  { code: 'CN', label: 'China', phone: '86' },\n  { code: 'CO', label: 'Colombia', phone: '57' },\n  { code: 'CR', label: 'Costa Rica', phone: '506' },\n  { code: 'CU', label: 'Cuba', phone: '53' },\n  { code: 'CV', label: 'Cape Verde', phone: '238' },\n  { code: 'CW', label: 'Curacao', phone: '599' },\n  { code: 'CX', label: 'Christmas Island', phone: '61' },\n  { code: 'CY', label: 'Cyprus', phone: '357' },\n  { code: 'CZ', label: 'Czech Republic', phone: '420' },\n  { code: 'DE', label: 'Germany', phone: '49', suggested: true },\n  { code: 'DJ', label: 'Djibouti', phone: '253' },\n  { code: 'DK', label: 'Denmark', phone: '45' },\n  { code: 'DM', label: 'Dominica', phone: '1-767' },\n  { code: 'DO', label: 'Dominican Republic', phone: '1-809' },\n  { code: 'DZ', label: 'Algeria', phone: '213' },\n  { code: 'EC', label: 'Ecuador', phone: '593' },\n  { code: 'EE', label: 'Estonia', phone: '372' },\n  { code: 'EG', label: 'Egypt', phone: '20' },\n  { code: 'EH', label: 'Western Sahara', phone: '212' },\n  { code: 'ER', label: 'Eritrea', phone: '291' },\n  { code: 'ES', label: 'Spain', phone: '34' },\n  { code: 'ET', label: 'Ethiopia', phone: '251' },\n  { code: 'FI', label: 'Finland', phone: '358' },\n  { code: 'FJ', label: 'Fiji', phone: '679' },\n  { code: 'FK', label: 'Falkland Islands (Malvinas)', phone: '500' },\n  { code: 'FM', label: 'Micronesia, Federated States of', phone: '691' },\n  { code: 'FO', label: 'Faroe Islands', phone: '298' },\n  { code: 'FR', label: 'France', phone: '33', suggested: true },\n  { code: 'GA', label: 'Gabon', phone: '241' },\n  { code: 'GB', label: 'United Kingdom', phone: '44' },\n  { code: 'GD', label: 'Grenada', phone: '1-473' },\n  { code: 'GE', label: 'Georgia', phone: '995' },\n  { code: 'GF', label: 'French Guiana', phone: '594' },\n  { code: 'GG', label: 'Guernsey', phone: '44' },\n  { code: 'GH', label: 'Ghana', phone: '233' },\n  { code: 'GI', label: 'Gibraltar', phone: '350' },\n  { code: 'GL', label: 'Greenland', phone: '299' },\n  { code: 'GM', label: 'Gambia', phone: '220' },\n  { code: 'GN', label: 'Guinea', phone: '224' },\n  { code: 'GP', label: 'Guadeloupe', phone: '590' },\n  { code: 'GQ', label: 'Equatorial Guinea', phone: '240' },\n  { code: 'GR', label: 'Greece', phone: '30' },\n  { code: 'GS', label: 'South Georgia and the South Sandwich Islands', phone: '500' },\n  { code: 'GT', label: 'Guatemala', phone: '502' },\n  { code: 'GU', label: 'Guam', phone: '1-671' },\n  { code: 'GW', label: 'Guinea-Bissau', phone: '245' },\n  { code: 'GY', label: 'Guyana', phone: '592' },\n  { code: 'HK', label: 'Hong Kong', phone: '852' },\n  { code: 'HM', label: 'Heard Island and McDonald Islands', phone: '672' },\n  { code: 'HN', label: 'Honduras', phone: '504' },\n  { code: 'HR', label: 'Croatia', phone: '385' },\n  { code: 'HT', label: 'Haiti', phone: '509' },\n  { code: 'HU', label: 'Hungary', phone: '36' },\n  { code: 'ID', label: 'Indonesia', phone: '62' },\n  { code: 'IE', label: 'Ireland', phone: '353' },\n  { code: 'IL', label: 'Israel', phone: '972' },\n  { code: 'IM', label: 'Isle of Man', phone: '44' },\n  { code: 'IN', label: 'India', phone: '91' },\n  { code: 'IO', label: 'British Indian Ocean Territory', phone: '246' },\n  { code: 'IQ', label: 'Iraq', phone: '964' },\n  { code: 'IR', label: 'Iran, Islamic Republic of', phone: '98' },\n  { code: 'IS', label: 'Iceland', phone: '354' },\n  { code: 'IT', label: 'Italy', phone: '39' },\n  { code: 'JE', label: 'Jersey', phone: '44' },\n  { code: 'JM', label: 'Jamaica', phone: '1-876' },\n  { code: 'JO', label: 'Jordan', phone: '962' },\n  { code: 'JP', label: 'Japan', phone: '81', suggested: true },\n  { code: 'KE', label: 'Kenya', phone: '254' },\n  { code: 'KG', label: 'Kyrgyzstan', phone: '996' },\n  { code: 'KH', label: 'Cambodia', phone: '855' },\n  { code: 'KI', label: 'Kiribati', phone: '686' },\n  { code: 'KM', label: 'Comoros', phone: '269' },\n  { code: 'KN', label: 'Saint Kitts and Nevis', phone: '1-869' },\n  { code: 'KP', label: \"Korea, Democratic People's Republic of\", phone: '850' },\n  { code: 'KR', label: 'Korea, Republic of', phone: '82' },\n  { code: 'KW', label: 'Kuwait', phone: '965' },\n  { code: 'KY', label: 'Cayman Islands', phone: '1-345' },\n  { code: 'KZ', label: 'Kazakhstan', phone: '7' },\n  { code: 'LA', label: \"Lao People's Democratic Republic\", phone: '856' },\n  { code: 'LB', label: 'Lebanon', phone: '961' },\n  { code: 'LC', label: 'Saint Lucia', phone: '1-758' },\n  { code: 'LI', label: 'Liechtenstein', phone: '423' },\n  { code: 'LK', label: 'Sri Lanka', phone: '94' },\n  { code: 'LR', label: 'Liberia', phone: '231' },\n  { code: 'LS', label: 'Lesotho', phone: '266' },\n  { code: 'LT', label: 'Lithuania', phone: '370' },\n  { code: 'LU', label: 'Luxembourg', phone: '352' },\n  { code: 'LV', label: 'Latvia', phone: '371' },\n  { code: 'LY', label: 'Libya', phone: '218' },\n  { code: 'MA', label: 'Morocco', phone: '212' },\n  { code: 'MC', label: 'Monaco', phone: '377' },\n  { code: 'MD', label: 'Moldova, Republic of', phone: '373' },\n  { code: 'ME', label: 'Montenegro', phone: '382' },\n  { code: 'MF', label: 'Saint Martin (French part)', phone: '590' },\n  { code: 'MG', label: 'Madagascar', phone: '261' },\n  { code: 'MH', label: 'Marshall Islands', phone: '692' },\n  { code: 'MK', label: 'Macedonia, the Former Yugoslav Republic of', phone: '389' },\n  { code: 'ML', label: 'Mali', phone: '223' },\n  { code: 'MM', label: 'Myanmar', phone: '95' },\n  { code: 'MN', label: 'Mongolia', phone: '976' },\n  { code: 'MO', label: 'Macao', phone: '853' },\n  { code: 'MP', label: 'Northern Mariana Islands', phone: '1-670' },\n  { code: 'MQ', label: 'Martinique', phone: '596' },\n  { code: 'MR', label: 'Mauritania', phone: '222' },\n  { code: 'MS', label: 'Montserrat', phone: '1-664' },\n  { code: 'MT', label: 'Malta', phone: '356' },\n  { code: 'MU', label: 'Mauritius', phone: '230' },\n  { code: 'MV', label: 'Maldives', phone: '960' },\n  { code: 'MW', label: 'Malawi', phone: '265' },\n  { code: 'MX', label: 'Mexico', phone: '52' },\n  { code: 'MY', label: 'Malaysia', phone: '60' },\n  { code: 'MZ', label: 'Mozambique', phone: '258' },\n  { code: 'NA', label: 'Namibia', phone: '264' },\n  { code: 'NC', label: 'New Caledonia', phone: '687' },\n  { code: 'NE', label: 'Niger', phone: '227' },\n  { code: 'NF', label: 'Norfolk Island', phone: '672' },\n  { code: 'NG', label: 'Nigeria', phone: '234' },\n  { code: 'NI', label: 'Nicaragua', phone: '505' },\n  { code: 'NL', label: 'Netherlands', phone: '31' },\n  { code: 'NO', label: 'Norway', phone: '47' },\n  { code: 'NP', label: 'Nepal', phone: '977' },\n  { code: 'NR', label: 'Nauru', phone: '674' },\n  { code: 'NU', label: 'Niue', phone: '683' },\n  { code: 'NZ', label: 'New Zealand', phone: '64' },\n  { code: 'OM', label: 'Oman', phone: '968' },\n  { code: 'PA', label: 'Panama', phone: '507' },\n  { code: 'PE', label: 'Peru', phone: '51' },\n  { code: 'PF', label: 'French Polynesia', phone: '689' },\n  { code: 'PG', label: 'Papua New Guinea', phone: '675' },\n  { code: 'PH', label: 'Philippines', phone: '63' },\n  { code: 'PK', label: 'Pakistan', phone: '92' },\n  { code: 'PL', label: 'Poland', phone: '48' },\n  { code: 'PM', label: 'Saint Pierre and Miquelon', phone: '508' },\n  { code: 'PN', label: 'Pitcairn', phone: '870' },\n  { code: 'PR', label: 'Puerto Rico', phone: '1' },\n  { code: 'PS', label: 'Palestine, State of', phone: '970' },\n  { code: 'PT', label: 'Portugal', phone: '351' },\n  { code: 'PW', label: 'Palau', phone: '680' },\n  { code: 'PY', label: 'Paraguay', phone: '595' },\n  { code: 'QA', label: 'Qatar', phone: '974' },\n  { code: 'RE', label: 'Reunion', phone: '262' },\n  { code: 'RO', label: 'Romania', phone: '40' },\n  { code: 'RS', label: 'Serbia', phone: '381' },\n  { code: 'RU', label: 'Russian Federation', phone: '7' },\n  { code: 'RW', label: 'Rwanda', phone: '250' },\n  { code: 'SA', label: 'Saudi Arabia', phone: '966' },\n  { code: 'SB', label: 'Solomon Islands', phone: '677' },\n  { code: 'SC', label: 'Seychelles', phone: '248' },\n  { code: 'SD', label: 'Sudan', phone: '249' },\n  { code: 'SE', label: 'Sweden', phone: '46' },\n  { code: 'SG', label: 'Singapore', phone: '65' },\n  { code: 'SH', label: 'Saint Helena', phone: '290' },\n  { code: 'SI', label: 'Slovenia', phone: '386' },\n  { code: 'SJ', label: 'Svalbard and Jan Mayen', phone: '47' },\n  { code: 'SK', label: 'Slovakia', phone: '421' },\n  { code: 'SL', label: 'Sierra Leone', phone: '232' },\n  { code: 'SM', label: 'San Marino', phone: '378' },\n  { code: 'SN', label: 'Senegal', phone: '221' },\n  { code: 'SO', label: 'Somalia', phone: '252' },\n  { code: 'SR', label: 'Suriname', phone: '597' },\n  { code: 'SS', label: 'South Sudan', phone: '211' },\n  { code: 'ST', label: 'Sao Tome and Principe', phone: '239' },\n  { code: 'SV', label: 'El Salvador', phone: '503' },\n  { code: 'SX', label: 'Sint Maarten (Dutch part)', phone: '1-721' },\n  { code: 'SY', label: 'Syrian Arab Republic', phone: '963' },\n  { code: 'SZ', label: 'Swaziland', phone: '268' },\n  { code: 'TC', label: 'Turks and Caicos Islands', phone: '1-649' },\n  { code: 'TD', label: 'Chad', phone: '235' },\n  { code: 'TF', label: 'French Southern Territories', phone: '262' },\n  { code: 'TG', label: 'Togo', phone: '228' },\n  { code: 'TH', label: 'Thailand', phone: '66' },\n  { code: 'TJ', label: 'Tajikistan', phone: '992' },\n  { code: 'TK', label: 'Tokelau', phone: '690' },\n  { code: 'TL', label: 'Timor-Leste', phone: '670' },\n  { code: 'TM', label: 'Turkmenistan', phone: '993' },\n  { code: 'TN', label: 'Tunisia', phone: '216' },\n  { code: 'TO', label: 'Tonga', phone: '676' },\n  { code: 'TR', label: 'Turkey', phone: '90' },\n  { code: 'TT', label: 'Trinidad and Tobago', phone: '1-868' },\n  { code: 'TV', label: 'Tuvalu', phone: '688' },\n  { code: 'TW', label: 'Taiwan, Province of China', phone: '886' },\n  { code: 'TZ', label: 'United Republic of Tanzania', phone: '255' },\n  { code: 'UA', label: 'Ukraine', phone: '380' },\n  { code: 'UG', label: 'Uganda', phone: '256' },\n  { code: 'US', label: 'United States', phone: '1', suggested: true },\n  { code: 'UY', label: 'Uruguay', phone: '598' },\n  { code: 'UZ', label: 'Uzbekistan', phone: '998' },\n  { code: 'VA', label: 'Holy See (Vatican City State)', phone: '379' },\n  { code: 'VC', label: 'Saint Vincent and the Grenadines', phone: '1-784' },\n  { code: 'VE', label: 'Venezuela', phone: '58' },\n  { code: 'VG', label: 'British Virgin Islands', phone: '1-284' },\n  { code: 'VI', label: 'US Virgin Islands', phone: '1-340' },\n  { code: 'VN', label: 'Vietnam', phone: '84' },\n  { code: 'VU', label: 'Vanuatu', phone: '678' },\n  { code: 'WF', label: 'Wallis and Futuna', phone: '681' },\n  { code: 'WS', label: 'Samoa', phone: '685' },\n  { code: 'XK', label: 'Kosovo', phone: '383' },\n  { code: 'YE', label: 'Yemen', phone: '967' },\n  { code: 'YT', label: 'Mayotte', phone: '262' },\n  { code: 'ZA', label: 'South Africa', phone: '27' },\n  { code: 'ZM', label: 'Zambia', phone: '260' },\n  { code: 'ZW', label: 'Zimbabwe', phone: '263' },\n];\n\nexport default countries;","import React, { useRef, useEffect, useState, Fragment } from 'react';\nimport { TextField, Grid } from '@material-ui/core';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { useTranslation } from 'react-i18next';\nimport Markdown from 'react-markdown/with-html';\n\nimport countries from './utils/countries';\n\n//css\nimport \"./text.css\";\n\nexport default function Text({content, onStore, onValidate}) {\n  //props: title, text, placeholder, help, required, pattern, instruction, autoComplete\n  //i18n: text.choose_a_country, text.no_options\n\n  const { t } = useTranslation();\n\n  const response = useRef(null);\n  const [state, setState] = useState({\n    value: null\n  });\n\n\n  useEffect(() => {\n    return () => {\n      onStore({\n        'view': content,\n        'response': response.current?.code || response.current\n      })\n    };\n  },[]);\n\n\n  const handleChange = (e, value) => {\n    response.current = value\n    setState({...state, value: value});\n\n    const resp = value?.code || response.current\n    console.log(resp)\n\n    onValidate(resp !== undefined && resp.length>0);\n  }\n\n\n  /**\n   * Componenet to select a country from a dropdown list.\n   * Enable this feature by adding `autoComplete:'coutries'` to the view.\n   */\n  const CountryAutoComplete = () => {\n\n    // ISO 3166-1 alpha-2 (No support for IE 11)\n    const countryToFlag = (isoCode) => {\n      return typeof String.fromCodePoint !== 'undefined'\n        ? isoCode\n            .toUpperCase()\n            .replace(/./g, (char) => String.fromCodePoint(char.charCodeAt(0) + 127397))\n        : isoCode;\n    }\n\n    return (\n      <Autocomplete\n        id=\"country-select\"\n        options={countries}\n        autoHighlight\n        onChange={(e, v) => handleChange(e, v)}\n        value={state.value}\n        getOptionLabel={(option) => option.label}\n        noOptionsText={t('text.no_options')}\n        renderOption={(option) => (\n          <Fragment>\n            <span>{countryToFlag(option.code)}</span> {option.label}\n          </Fragment>\n        )}\n        renderInput={(params) => (\n          <TextField\n            {...params}\n            label={t('text.choose_a_country')}\n            variant=\"outlined\"\n            inputProps={{\n              ...params.inputProps,\n              autoComplete: 'new-password', // disable autocomplete and autofill\n            }}\n            className='country-select'\n          />\n        )}\n      />\n    );\n  }\n\n\n  return (\n    <Grid container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='Text-container'>\n      <Grid item>\n        <Markdown source={t(content.text)} escapeHtml={false} className='markdown-text' />\n      </Grid>\n\n      {!(content.instruction || false) &&\n        <Grid item>\n          {content.autoComplete === 'countries' && <CountryAutoComplete />}\n          {!content.autoComplete && <TextField label={t(content.placeholder)} variant=\"filled\" fullWidth onChange={(e) => handleChange(e, e.target.value)} />}\n        </Grid>\n      }\n    </Grid>\n  );\n}\n","import React, { useRef, useEffect, useState } from 'react';\nimport { TextField, Grid } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport Markdown from 'react-markdown/with-html';\nimport { useLocation } from 'react-router-dom';\n\n//css\nimport \"./text.css\";\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nexport default function Prolific({content, onStore, onValidate}) {\n  //props: title, text, placeholder, help, required, pattern, instruction, autoComplete\n  //i18n: text.choose_a_country, text.no_options\n\n  const { t } = useTranslation();\n  let query = useQuery();\n  const response = useRef(null);\n  const [state, setState] = useState({\n    value: null\n  });\n\n\n  useEffect(() => {\n    return () => {\n      onStore({\n        'view': content,\n        'response': response.current?.code || response.current\n      })\n    };\n  },[response]);\n\n\n  const handleChange = (e, value) => {\n    response.current = value\n    setState({...state, value: value});\n\n    const resp = value?.code || response.current\n    console.log(resp)\n\n    onValidate(resp !== undefined && resp.length>0);\n  }\n\n  var fieldContent = null;\n  if(content?.getUrlContent === true){\n    if(content?.paramNameAsContent !== null && content.paramNameAsContent?.length>0){\n      console.log(content?.paramNameAsContent);\n      fieldContent = query.get(content.paramNameAsContent);\n      console.log(fieldContent);\n    }\n  }else if(content?.content !== null && content?.content?.length>0){\n    fieldContent = content.content;\n  }\n  // run for the first time or s.t like that\n  if(state.value==null){\n    if(fieldContent!==null && fieldContent.length>0){\n      setState({ value : fieldContent});\n      return;\n    }\n  }\n\n  return (\n    <Grid container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='Text-container'>\n      <Grid item>\n        <Markdown source={t(content.text)} escapeHtml={false} className='markdown-text' />\n      </Grid>\n\n      {!(content.instruction || false) &&\n        <Grid item>\n          <TextField label={t(content.placeholder)} defaultValue={fieldContent!=null ? fieldContent : undefined} variant=\"filled\" fullWidth onChange={(e) => handleChange(e, e.target.value)} />\n        </Grid>\n      }\n    </Grid>\n  );\n}\n","import React, {useEffect, useRef} from 'react';\n\nimport {Grid, Radio, Tooltip, RadioGroup, FormControlLabel, Divider, Slider} from '@material-ui/core';\n\nimport Markdown from 'react-markdown/with-html';\nimport {useTranslation} from 'react-i18next';\n\nfunction ValueLabelComponent(props) {\n  const { children, open, value } = props;\n\n  return (\n    <Tooltip open={open} enterTouchDelay={0} placement=\"top\" title={value} arrow>\n      {children}\n    </Tooltip>\n  );\n}\n\nexport default function Matrix({content, onStore, onValidate}) {\n\n  const {t} = useTranslation();\n  const {questions, choices, direction, text, slider, showMidMark } = content;\n\n  const response = useRef({\n    values: Array.from({ length: questions.length })\n  });\n\n  useEffect(() => {\n    if (content.requiredQuestions.length>0)\n      onValidate(false);\n    \n    window.scrollTo({top: 0, behavior: \"smooth\"});\n    return () => {\n      onStore({\n        'view': content,\n        'response': response.current\n      })\n    };\n  },[]);\n\n  const renderSlider = (choices, index) => {\n    return (\n      <Grid item container xs key={index} className='matrix-slider'>\n        <Slider\n          defaultValue={response.current.values[index]}\n          value={response.current.values[index]}\n          valueLabelFormat={(v) => t(choices[v-1])}\n          aria-labelledby={\"question\"+index}\n          ValueLabelComponent={ValueLabelComponent}\n          onChangeCommitted={(e, value) => handleChange(e, index, value)}\n          step={1}\n          min={1}\n          max={choices.length}\n          valueLabelDisplay=\"on\"\n        />\n        <Grid container direction='row' alignItems='stretch' justify='space-between'>\n          <Grid item className='mark'><em>{t(choices[0])}</em></Grid>\n          {showMidMark && <Grid item className='mark'><em>{t(choices[Math.floor(choices.length/2)])}</em></Grid>}\n          <Grid item className='mark'><em>{t(choices[choices.length-1])}</em></Grid>\n        </Grid>\n\n      </Grid>\n    )\n  }\n\n  const renderChoice = (c, index) => {\n    return (\n      <Grid item xs key={index}>\n        <FormControlLabel\n          control={<Radio />}\n          value={c}\n          label={t(c)}\n          labelPlacement={direction==='vertical'?'end':'bottom'}\n        />\n      </Grid>\n    )\n  }\n\n  const handleChange = (e, index, value) => {\n    response.current.values[index] = e.target.value || value;\n\n    console.log(response.current.values[index]);\n    const n_null = response.current.values.filter((v,i) => {\n      //console.log(v,i)\n      return content.requiredQuestions.includes(i) && (v === null || v===undefined)\n    }).length\n    //console.log('n_null', n_null)\n    onValidate(n_null === 0)\n  }\n\n  const renderQuestion = (q, index) => {\n    return (\n      <Grid item key={index} className='matrix-question-container'>\n      <Markdown source={t(q)} escapeHtml={false} className='markdown-text' />\n      {slider && renderSlider(choices, index)}\n      {!slider && \n        <RadioGroup name={`q${index}`} value={response.current.values[index]} onChange={(e) => handleChange(e, index)}>\n        <Grid container \n          direction={direction==='vertical'?'column':'row'} \n          alignItems='flex-start' \n          justify=\"space-between\">\n          {choices.map((c, j) => renderChoice(c, j))}\n        </Grid>\n        </RadioGroup>\n      }\n      </Grid>\n    ) \n  }\n\n  return (\n    <Grid container direction='column' alignItems='stretch' justifyContent='flex-start' className='Text-container'>\n      {text && \n      <Grid item>\n        <Markdown source={t(text)} escapeHtml={false} className='markdown-text' />\n      </Grid>\n      }\n      {questions\n        .map((q,i) => renderQuestion(q,i))\n        .reduce((q1, q2) => [q1,<Divider key={Math.random().toString()} className='matrix-spacer'/>,q2])}\n    </Grid>\n  );\n}\n","import React, { useEffect, useState } from 'react';\n\nimport {Grid} from '@material-ui/core';\nimport Markdown from 'react-markdown/with-html';\nimport {useTranslation} from 'react-i18next';\nimport ReactGA from \"react-ga4\";\n\nexport default function Submission({submission, studyId, submissionNote}) {\n\n  const {t} = useTranslation();\n  const submissionApi = `https://server.cut.social/api/v1/${studyId}/responses`;\n  // const jamaspSumissionApi = `https://jamasp-fitbit-oauth-service-730427234084.us-central1.run.app/`;\n\n  const [state, setState] = useState({\n    submissionCode: undefined,\n    debug: process.env.NODE_ENV !== 'production',\n  });\n\n  function isProlific(resp) {\n    if(resp && resp?.view?.id===\"prolific ID\")\n      return true;\n    return false;\n  }\n\n  const findProlificId = () => {\n    let pid = null;\n    const resps = submission.responses.filter(isProlific);\n    if(resps.length>0)\n      pid=resps[0].response;\n    return pid;\n  }\n\n  // submit and set submissionCode\n  useEffect(() => {\n    if (state.submissionCode === undefined) {\n      const pid = findProlificId();\n      //console.log(\"pid:\",pid);\n      ReactGA.event({\n        category: \"info\",\n        action: \"submission_insert, pid : \"+pid,\n        label: \"info submission insert\"\n      });\n      fetch(submissionApi, {\n        method: 'post',\n        mode: 'cors',\n        body: JSON.stringify(submission),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })\n        .then(resp => resp.json())\n        .then(respJson => setState({...state, submissionCode: respJson.submissionCode}))\n        .catch(error => {\n          ReactGA.event({\n            category: \"error\",\n            action: \"submission_insert_error, pid : \"+pid +'  error:' + error + '  stringify:'+ JSON.stringify(error),\n            label: \"info submission insert: \" + JSON.stringify(submission)\n          });\n          return console.error('Error:', error);\n        });\n    }\n  },[state]);\n\n  return (\n    <Grid container direction='column' className='Text-container'>\n\n      {state.submissionCode &&\n      <Grid item xs className=\"submission-container\">\n        <Markdown source={t(submissionNote, {submissionCode: state.submissionCode})} escapeHtml={false}  className='markdown-text' />\n      </Grid>\n      }\n\n      {state.debug &&\n      <Grid item xs>\n        <pre>{JSON.stringify(submission, null, 2)}</pre>\n      </Grid>\n      }\n\n    </Grid>\n  );\n}\n","import React, {useState, useEffect, Fragment, useRef} from 'react';\n\nimport {Button, Fab, Grid, Typography, Divider, Tooltip} from '@material-ui/core';\n\nimport {Dialog, DialogActions, DialogTitle, DialogContentText, DialogContent} from '@material-ui/core';\n\nimport { useTranslation } from 'react-i18next';\n\nimport './bart.css';\n\nexport default function BART({content, onStore}) {\n  \n  const { t } = useTranslation();\n  const {reward, maxPumps, safePumps, trials} = content;\n\n  const [state, setState] = useState({\n    pumps: 0,\n    finished: false,\n    trial: 1,\n    totalScore: 0,\n    trialResponses: [],\n    dialogIsOpen: false,\n    taskStartedAt: Date.now(),\n    showTooltip: true\n  });\n\n  const shuffle = (a) => {\n    for (let i = a.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [a[i], a[j]] = [a[j], a[i]];\n    }\n    return a;\n  }\n\n  // on mount and unmount\n  useEffect(() => {\n\n    // create a list of random numbers and shuffle it\n    state.randomNumbers = shuffle(Array.from({length: maxPumps}, (_, i) => i+1));\n\n    document.body.style['touch-action'] = \"none\";\n    document.documentElement.style['touch-action'] = \"none\";\n    return () => {\n      document.body.style['touch-action'] = null;\n      document.documentElement.style['touch-action'] = null;  \n    }\n  },[]);\n  \n  // when finished, store responses and proceed to the next view\n  useEffect(() => {\n    if (state.finished && !state.dialogIsOpen) {\n      const now = Date.now()\n      // add timestamps\n      let response = {trials: state.trialResponses};\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = now;\n      response.taskDuration = now - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n  }, [state]);\n\n  /**\n   * Store trial responses, then proceed to the next trial or finish the game\n   * @param {*} cashed either cashed or exploded\n   * @param {*} explosionProbability last probability of balloon getting exploded\n   */\n  const newTrial = (cashed, randomNumber) => {\n    setState({\n      ...state, \n      dialogIsOpen: true,\n      trialResponses: [...state.trialResponses, {\n        trial: state.trial,\n        pumps: state.pumps,\n        score: cashed? state.pumps * reward : 0,\n        result: cashed? \"cashed\" : \"exploded\"\n      }],\n      showTooltip: true,\n      finished: (state.trial>=trials),\n      pumps: 0,\n      trial: state.trial+1,\n      totalScore: state.totalScore + (cashed?state.pumps*reward:0),\n      randomNumbers: shuffle(Array.from({length: maxPumps}, (_, i) => i+1))\n    });\n  }\n\n  /**\n   * action to inflate the baloon\n   */\n  const onInflate = () => {\n\n    const isSafe = safePumps>0 && state.pumps<safePumps\n    let randomIndex = Math.floor(Math.random() * state.randomNumbers.length);\n    let randomNumber = state.randomNumbers.splice(randomIndex, isSafe?0:1);  \n    console.log('random number: ', randomNumber[0], '(must be 1 to explode)')\n\n    // if the randomly picked number is 1, then explode\n    if (randomNumber[0] === 1) {\n      newTrial(false, randomNumber);\n    } else {\n        setState({\n        ...state,\n        showTooltip: false,\n        pumps: state.pumps+1\n      });\n    }\n\n  };\n\n  /**\n   * action to cash in the reward\n   */\n  const onCashIn = () => {\n    newTrial(true);\n  };\n  \n  /**\n   * render a dialog that shows trial summary.\n   */\n  const renderDialog = () => {\n    return (\n    <Dialog\n      open={state.dialogIsOpen}\n      onClose={() => setState({...state, dialogIsOpen: false})}\n      disableBackdropClick\n      disableEscapeKeyDown\n      aria-labelledby=\"dialog-title\"\n    >\n        <DialogTitle id=\"dialog-title\"><b>{state.trialResponses[state.trialResponses.length - 1].result==='cashed'?t('bart.cashed_title'):t('bart.exploded_title')}</b></DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n          {t('bart.trial_score_report', {score: state.trialResponses[state.trialResponses.length - 1].score})}\n          {t('bart.total_score_report', {score: state.trialResponses.map(r => r.score).reduce((a,b) => a+b, 0)})}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setState({...state, dialogIsOpen: false})} color=\"primary\" autoFocus size='large'>\n            {state.trial<=trials?t('bart.next_trial'):t('next')}\n          </Button>\n        </DialogActions>\n      </Dialog>);\n  }\n\n  const balloonSize = (pumps, maxPumps) => {\n    //TODO let volume = 20/(1+Math.pow(Math.E, -3*(pumps/maxPumps))) // logit(3*pumps/maxPumps)\n    //TODO calc radius\n    let rad = Math.sqrt((pumps+1)*500/Math.PI)\n    console.log(rad)\n    return Math.ceil(2*rad)\n  }\n\n  /**\n   * Render BART component (main render)\n   */\n  //const render = () => {\n    return (\n      <Fragment>\n        {state.dialogIsOpen && renderDialog()}\n  \n        <Grid container direction='column' spacing={2} justify=\"space-between\" alignItems='stretch' className='bart-container'>\n  \n        <Grid item container direction='row' justify=\"space-around\" alignItems='center'>\n  \n          {state.trial<=trials && \n            <Grid item><Grid container direction='column' justify=\"space-around\" alignItems='center'>\n              {t('bart.next_reward')}<Typography variant=\"h4\">{state.pumps * reward}</Typography>\n            </Grid></Grid>\n          }\n  \n          {state.trial<=trials && \n            <Grid item><Grid container direction='column' justify=\"space-around\" alignItems='center'>\n                <Typography color='textSecondary' variant='caption'>{t('bart.trial_label',{trial:state.trial, trials:trials})}</Typography>\n            </Grid></Grid>\n          }\n  \n            <Grid item><Grid container direction='column' justify=\"space-around\" alignItems='center'>\n              {t('bart.total_points')}<Typography variant=\"h4\">{state.totalScore}</Typography>\n            </Grid></Grid>\n        </Grid>\n  \n        {/*<Grid item><Divider /></Grid>*/}\n        \n        <Grid item container direction=\"column\" alignContent='center' alignItems='center'> \n          <Tooltip title={t('bart.balloon_tooltip')} arrow open={!state.dialogIsOpen && state.showTooltip}>\n          <div className=\"bubble-container\" style={{\n            cursor: 'pointer',\n            width: balloonSize(state.pumps, maxPumps),\n            height: balloonSize(state.pumps, maxPumps),\n            transition: (state.pumps===0)?'':'width 1s, height 1s' //explosition and pumping effects\n          }}\n          onClick={onInflate}\n          >\n            <figure className=\"bubble\"></figure>\n          </div>\n          </Tooltip>\n        </Grid>\n  \n        <Grid item container direction=\"row\" justify=\"space-around\" alignItems='center'>\n          <Button size='large' color='primary' variant='outlined' onClick={onCashIn}>{t('bart.cash')}</Button>\n        </Grid>\n\n  \n        </Grid>\n      </Fragment>\n  \n    );\n  //} //.render()\n\n}\n","export const sample = (items, n=1) => {\n  let rnd = Math.floor(Math.random()*items.length);\n  return items[rnd];\n}\n\n  /**\n  * Shuffles any array and returns it\n  * @param {*any} items any array to be shuffled\n  * @returns shuffled array\n  */\nexport const shuffle = (items) => {\n  const shuffled = items.slice();\n  for (let i = items.length - 1; i > 0; i--) {\n      const rnd = Math.floor(Math.random() * (i + 1));\n      [shuffled[i], shuffled[rnd]] = [shuffled[rnd], shuffled[i]];\n  }\n  return shuffled;\n};","import React, { useState, useEffect, Fragment } from 'react';\n\n\nimport { Button, Grid, Divider } from '@material-ui/core';\n\nimport { \n  Star, \n  RadioButtonUnchecked as Circle, \n  Add,\n  Check as Correct,\n  Clear as Incorrect\n} from '@material-ui/icons';\n\nimport Markdown from 'react-markdown/with-html';\n\nimport { shuffle } from './utils/random';\nimport { useTranslation } from 'react-i18next';\n\nimport './gonogo.css';\n\n//FIXME these are realtime variables, so I keep them out of the component's state.\nlet clock\n\nexport default function GoNoGo({content, onStore, onProgress}) {\n\n  const {t} = useTranslation();\n  const {text, trials, stimuliDuration, fixationDuration, choices, timeoutsBeforeReset, feedbackDuration} = content;\n\n  const [state, setState] = useState({\n    finished: false,\n    trialResponses: [],\n    taskStartedAt: null,\n    taskFinishedAt: null,\n    taskDuration: null,\n    step: null,\n    correct: null,\n    stimuli: null,\n    trialStartedAt: null,\n    respondedAt: null,\n    trial: null,\n    timeouts: 0\n  })\n\n  /**\n   * callback to handle keypress events\n   */\n  const handleKeyPress = (event) => {\n    const { key, keyCode } = event;\n\n    // press space to start the task\n    if (state.trial === null && (keyCode===32 || key===' ')) {\n      startTask()\n      return;\n    }\n\n    // ignore invalid keys and invalid trial steps\n    if (state.step !== 'stimuli' || !['ArrowLeft', 'ArrowRight'].includes(key))\n      return;\n\n    const current = state.stimuli[state.trial-1];\n    let choice = undefined;\n\n    let empty = (key==='ArrowLeft' && current.startsWith('right')) || \n                (key==='ArrowRight' && current.startsWith('left'))\n    let go = (key==='ArrowLeft' && current==='left-go') ||\n             (key==='ArrowRight' && current==='right-go') \n\n    choice = go?choices.go:(empty?'empty':choices.nogo)\n\n    handleResponse(choice)\n    \n  }\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyPress);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n  }, [handleKeyPress]);\n\n\n  useEffect(() => {\n\n    // generate stimuli stream\n    if (state.stimuli===null) {\n      let stim = [...Array(trials.total).keys()].map((i,t) => {\n        if (i<trials.leftGo)\n          return 'left-go'\n        if (i<trials.go)\n          return 'right-go'\n        if (i<trials.go + (trials.left - trials.leftGo))\n          return 'left-nogo'\n        return 'right-nogo'\n      }) \n      setState({...state, stimuli: shuffle(stim)});\n    }\n\n\n    // # FIXATION\n    if (state.step === 'fixation') {\n      clearTimeout(clock);  \n      clock = setTimeout(() => {\n          setState({\n            ...state, \n            trial: state.trial+1, \n            trialStartedAt: Date.now(), \n            step: 'stimuli'\n          });\n        }, fixationDuration);\n    }\n\n    // # FEEDBACK\n    if (state.step === 'feedback') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n          setState({...state, step: 'fixation'})\n        }, feedbackDuration)\n    }\n\n    if (state.step === 'stimuli') {\n      clearTimeout(clock);\n\n      if (state.timeouts<timeoutsBeforeReset) {\n        clock = setTimeout(() => {\n          setState({...state,\n            trialResponses: [...state.trialResponses, {\n              'trial': state.trial,\n              'stimuli': state.stimuli[state.trial-1],\n              'choice': null,\n              'correct': null,\n              'respondedAt': null,\n              'trialStartedAt': state.trialStartedAt,\n              'rt': null\n            }],\n            timeouts: state.timeouts + 1,\n            correct: false,\n            step: (feedbackDuration>0)?'feedback':'fixation'\n          });\n        }, stimuliDuration)\n      } else {\n        setState({...state, step: 'reset', timeouts: 0})\n      }\n    }\n\n\n    onProgress(100.0 * state.trial / trials.total)\n  \n    if (state.trial>trials.total) {\n      console.log('------------ FINISHED -------')\n      onProgress(100.0)\n      setState({...state, finished: true, taskFinishedAt: Date.now()})\n    }\n\n    // on finish\n    if (state.finished) {\n      clearTimeout(clock);\n      \n      // timestamps\n      let response = {trials: state.trialResponses};\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = state.taskFinishedAt;\n      response.taskDuration = state.taskFinishedAt - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n\n  },[state]);\n\n  const startTask = () => {\n    setState({\n      ...state, \n      trialResponses: [], \n      trial: 0, \n      timeouts: 0, \n      step: 'fixation', \n      taskStartedAt: Date.now()\n    })\n  }\n\n  const handleResponse = (choice) => {\n    const respondedAt = Date.now(); //timestamp\n\n    clearTimeout(clock);\n\n    const _correct = (choice===choices.go && !state.stimuli[state.trial-1].endsWith('nogo')) || \n              (choice==='empty' && state.stimuli[state.trial-1].endsWith('nogo'))\n\n    setState({\n      ...state,\n      correct: _correct,\n      respondedAt: respondedAt,\n      trialResponses: [...state.trialResponses, {\n        'trial': state.trial,\n        'stimuli': state.stimuli[state.trial-1],\n        'choice': choice,\n        'correct': _correct,\n        'respondedAt': respondedAt,\n        'trialStartedAt': state.trialStartedAt,\n        'rt': respondedAt - state.trialStartedAt\n      }],\n      step: (feedbackDuration>0)?'feedback':'fixation'\n    })\n  }\n\n  const renderStimulus = (stimulus) => {\n    return (\n      <Fragment>\n      {stimulus==='star' && <div onClick={() => handleResponse('star')} className='gng-stimulus'><Star fontSize='large' className='yellow' /></div>}\n      {stimulus==='empty' && <div onClick={() => handleResponse('empty')} className='gng-stimulus'> </div>}\n      {stimulus==='circle' && <div onClick={() => handleResponse('circle')} className='gng-stimulus'><Circle fontSize='large' className='blue' /></div>}\n      {stimulus==='blue-star' && <div onClick={() => handleResponse('blue-star')} className='gng-stimulus'><Star fontSize='large' className='blue' /></div>}\n      {stimulus==='yellow-circle' && <div onClick={() => handleResponse('yellow-circle')} className='gng-stimulus'><Star fontSize='large' className='yellow' /></div>}\n      </Fragment>\n    );\n  }\n\n  const renderStimuli = (trialType) => {\n    return (\n      <Grid item container direction=\"row\" justifyContent=\"space-around\" alignItems=\"center\">\n        {trialType === 'left-go' && renderStimulus(choices.go)}\n        {trialType === 'left-nogo' && renderStimulus(choices.nogo)}\n        {(trialType !== 'left-go' && trialType !== 'left-nogo') && renderStimulus('empty')}\n        <Divider orientation=\"vertical\" flexItem />\n        {trialType === 'right-go' && renderStimulus(choices.go)}\n        {trialType === 'right-nogo' && renderStimulus(choices.nogo)}\n        {(trialType !== 'right-go' && trialType !== 'right-nogo') && renderStimulus('empty')}\n      </Grid>\n    )\n  }\n\n  const renderFeedback = () => {\n    return (\n      <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        {state.correct && <Correct fontSize='large' className='correct gng-icon' />}\n        {!state.correct && <Incorrect fontSize='large' className='incorrect gng-icon' />}\n      </Grid>\n    )\n\n  }\n\n  const renderFixation = () => {\n    return (\n      <Grid item container direction=\"row\" justifyContent=\"space-around\" alignItems=\"center\">\n        <Add fontSize='large' className='fixation gng-icon' />\n      </Grid>\n    );\n  }\n\n  // show reset screen on timeouts reaching a threshold\n  if (state.step === 'reset') {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('gonogo.too_many_timeouts')} escapeHtml={false}  className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' color='secondary' onClick={() => startTask()}>{t('gonogo.restart')}</Button>\n        </Grid>\n      </Grid>\n\n    )\n  }\n\n  // start screen\n  if (state.trial === null) {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('gonogo.are_you_ready')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' onClick={() => startTask()}>{t('gonogo.start')}</Button>\n        </Grid>\n\n      </Grid>\n\n    )\n  }\n\n  //const render = () => {\n    return (\n        <Grid item container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='gonogo-container'>\n          <Grid item>\n            <Markdown source={t(text)} escapeHtml={false} className='markdown-text' />\n          </Grid>\n\n          {state.step === 'stimuli'  && renderStimuli(state.stimuli[state.trial-1])}\n          {state.step === 'feedback' && renderFeedback()}\n          {state.step === 'fixation' && renderFixation()}\n\n        </Grid>\n\n    );\n  //} //.render()\n\n}\n","  /**\n  * Shuffles any array and returns it\n  * @param {*any} a any array\n  * @returns shuffled array\n  */\nconst shuffle = (a) => {\n  for (let i = a.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [a[i], a[j]] = [a[j], a[i]];\n  }\n  return a;\n}\n\nexport default shuffle;","import React, {useState, useEffect, useRef} from 'react';\n\n\nimport { Box, Button, Grid, Typography, Divider} from '@material-ui/core';\n\nimport { \n  Add,\n  Check as CorrectIcon,\n  Clear as IncorrectIcon,\n} from '@material-ui/icons';\n\nimport shuffle from './utils/shuffle';\n\nimport Image from 'material-ui-image';\n\nimport Markdown from 'react-markdown/with-html';\n\nimport {useTranslation} from 'react-i18next';\n\nimport './stroop.css';\n\n//FIXME keep this var as a ref\nlet clock\n\nexport default function Stroop({content, onStore}) {\n\n  const {rule, colors, words, trials, randomizeTrials, randomizeChoices, stimulusDuration, fixationDuration, timeoutsBeforeReset, feedbackDuration} = content;\n\n\n  const {t} = useTranslation();\n  const separator = ''; // character that separates word and color in trials[i].stimulus and trials[i].choices\n\n  const [state, setState] = useState({\n    trialResponses: [],\n    finished: false,\n    trial: null,\n    step: null,\n    correct: null,\n    timeouts: 0,\n    stimuli: null\n  });\n\n    /**\n   * callback to handle keypress events\n   */\n  const handleKeyPress = (event) => {\n    const { key, keyCode } = event;\n\n    // press space to start the task\n    if (state.trial === null && (keyCode===32 || key===' ')) {\n      startTask()\n      return;\n    }\n\n    // ignore invalid key press at invalid stage of the trial\n    if (state.step !== 'stimulus' || !['ArrowLeft', 'ArrowRight'].includes(key))\n      return;\n\n    let choices = state.stimuli[state.trial-1].choices\n    let stimulus = state.stimuli[state.trial-1].stimulus\n\n    let choice = (key==='ArrowLeft')?choices[0]:choices[1]\n\n    handleResponse(choice, stimulus)\n    \n  }\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyPress);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n  }, [handleKeyPress]);\n\n\n  const randomize = (trials/*use props instead of: , randomizeTrials, randomizeChoices*/) => {\n    let _trials = (randomizeTrials || false)?shuffle(trials):trials\n    if (randomizeChoices)\n      _trials = _trials.map(t=> {\n        let _t = Object.assign({},t); // copy\n        _t.choices = shuffle(t.choices);\n        return _t;\n      })\n    return _trials\n  }\n\n  // when finished, store responses and proceed to the next view\n  useEffect(() => {\n\n    if (state.stimuli===null) {\n      setState({\n        ...state,\n        stimuli: randomize(trials, randomizeTrials, randomizeChoices)\n      })\n    }\n\n    if (state.step==='fixation') {\n      clearTimeout(clock);  \n      clock = setTimeout(() => {\n        setState({\n          ...state,\n          step: 'stimulus',\n          trial: state.trial+1, \n          trialStartedAt: Date.now()\n        });\n      }, fixationDuration);\n    }\n\n    if (state.step === 'feedback') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        setState({...state, step: 'fixation'})\n      }, feedbackDuration)\n    }\n\n    if (state.step === 'stimulus') {\n      clearTimeout(clock);\n\n      if (state.timeouts<timeoutsBeforeReset) {\n        clock = setTimeout(() => {\n          setState({\n            ...state,\n            step: (feedbackDuration>0)?'feedback':'fixation',\n            trialResponses: [...state.trialResponses, {\n              trial: state.trial,\n              stimulus: state.stimuli[state.trial-1].stimulus,\n              choice: null,\n              correct: null,\n              respondedAt: null,\n              trialStartedAt: state.trialStartedAt,\n              rt: null}\n            ],\n            timeouts: state.timeouts + 1,\n            correct: false\n          });\n        }, stimulusDuration);\n      } else {\n        setState({...state, step: 'reset', timeouts: 0})\n      }\n    }\n\n    if (state.trial>trials.length) {\n      setState({...state, finished: true, taskFinishedAt: Date.now()})\n    }\n\n    if (state.finished) {\n      clearTimeout(clock);\n\n      // timestamps\n      let response = {trials: state.trialResponses};\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = state.taskFinishedAt;\n      response.taskDuration = state.taskFinishedAt - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n\n  }, [state]);\n\n  const startTask = () => {\n    setState({\n      ...state,\n      trial: 0,\n      timeouts: 0,\n      trialResponses: [],\n      step:'fixation', \n      taskStartedAt: Date.now() //timestamp\n    });\n  }\n\n  const handleResponse = (choice, stimulus) => {\n    let respondedAt = Date.now(); //timestamp\n\n    clearTimeout(clock);\n\n    let [choiceWord, choiceColor] = choice.split('')\n    let [stimulusWord, stimulusColor] = stimulus.split('')\n    let correct = (choiceWord === stimulusColor)\n\n    //DEBUG console.log(choiceColor, stimulusWord, correct)\n\n    setState({\n      ...state,\n      step: (feedbackDuration>0)?'feedback':'fixation',\n      correct: correct,\n      trialResponses: [...state.trialResponses,{\n        trial: state.trial,\n        stimulus: state.stimuli[state.trial-1].stimulus,\n        choice: choice,\n        correct: correct,\n        respondedAt: respondedAt,\n        trialStartedAt: state.trialStartedAt,\n        rt: respondedAt - state.trialStartedAt\n      }]\n    })\n  }\n\n  const renderStimulus = (stimulus) => {\n    let [word, color] = stimulus.split('')\n    return (\n      <Grid container item direction='column' alignItems='center' justify='flex-start'>\n      <Typography className='stroop-stimulus' variant='h1' style={{color: colors[color]}}>\n        {t(words[word])}\n      </Typography>\n      </Grid>\n\n    );\n  }\n\n  const renderChoices = (choices, stimulus) => {\n    \n    return (\n      <Grid container direction='row' justify='space-between' spacing={2} alignItems='stretch' className='stroop-choices'>\n      {choices.map((choice,i) => {\n        let [word, color] = choice.split('')\n        return (\n          <Grid item xs key={i}>\n          <Button style={{color: colors[color]}} onClick={() => handleResponse(choice, stimulus)} size=\"large\" fullWidth variant='outlined'>\n            {t(words[word])}\n          </Button>\n          </Grid>\n        );\n      })}\n      </Grid>\n    )\n  }\n\n  const renderFeedback = () => {\n    return (\n      <Grid item container direction='row' justify='space-around' alignItems='center'>\n        {state.correct && <CorrectIcon fontSize='large' className='correct gng-icon' />}\n        {!state.correct && <IncorrectIcon fontSize='large' className='incorrect gng-icon' />}\n      </Grid>\n    )\n\n  }\n\n  const renderStartScreen = () => {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center'>\n        <Grid item><Markdown source={t('stroop.are_you_ready')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' onClick={() => startTask()}>{t('stroop.start')}</Button>\n        </Grid>\n\n      </Grid>\n    )\n  }\n\n  const renderResetScreen = () => {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justify='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('stroop.too_many_timeouts')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' color='secondary' onClick={() => startTask()}>{t('stroop.restart')}</Button>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  // show reset screen on timeouts reaching a threshold\n  if (state.step === 'reset') {\n    return renderResetScreen();\n  }\n\n  if (state.trial === null) {\n    return renderStartScreen();\n  }\n\n  \n  //const render = () => {\n    return (\n        <Grid item container direction='column' spacing={2} alignItems='stretch' justify='flex-start' className='stroop-container stroop-board'>\n          <Grid item>\n            <Markdown source={t(rule)} escapeHtml={false} className='markdown-text' />\n          </Grid>\n\n          {state.trial<=trials.length && \n            state.step === 'stimulus' && \n            renderStimulus(state.stimuli[state.trial-1].stimulus) }\n            \n          {state.trial<=trials.length && \n            state.step === 'stimulus' && \n            renderChoices(state.stimuli[state.trial-1].choices, state.stimuli[state.trial-1].stimulus) }\n\n          {state.step === 'feedback' && renderFeedback(state.correct)}\n\n          {state.step === 'fixation' && \n            <Grid item container direction=\"row\" justify=\"space-around\" alignItems=\"center\">\n              <Add fontSize='large' className='fixation gng-icon' />\n            </Grid>\n          }\n\n        </Grid>\n\n    );\n  //} //.render()\n\n}\n","import React, { Fragment, memo } from 'react';\nimport { useDrag, useDrop, DragPreviewImage } from 'react-dnd';\nimport { useTranslation } from 'react-i18next';\nimport { languages } from '../utils/i18n';\nimport MonetizationOnIcon from \"@material-ui/icons/MonetizationOn\";\nimport { ltrTheme, rtlTheme } from '../utils/theme';\nimport { grey, teal, blueGrey } from '@material-ui/core/colors';\nimport { Avatar, Grid, makeStyles, Paper, Typography } from '@material-ui/core';\nimport { useParams } from 'react-router-dom';\n\n// Item types of draggable components\nexport const ItemTypes = {\n  OPPONENT: 'opponent',\n  POT: 'pot',\n  PLAYER: 'player',\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 0,\n  },\n  paper: {\n    padding: theme.spacing(2),\n  },\n  medium: {\n    width: theme.spacing(3),\n    height: theme.spacing(3),\n  },\n  large: {\n    width: theme.spacing(4),\n    height: theme.spacing(4),\n  },\n  grey: {\n    color: theme.palette.getContrastText(grey[400]),\n    backgroundColor: grey[400],\n  },\n  tealDark: {\n    color: theme.palette.getContrastText(teal[800]),\n    backgroundColor: teal[800],\n  },\n  blueG: {\n    color: theme.palette.getContrastText(blueGrey[800]),\n    backgroundColor: blueGrey[800],\n  },\n  height100: {\n    height: '100%',\n  }\n}));\n\nvar language = undefined;\nvar personsLangPrefix = undefined;\n\n/***\n * Container box for monetized entities and their interactions\n */\nexport const RepositoryBox = memo(function RepositoryBox({\n  name,\n  amount,\n  onDrop,\n  accept,\n  person,\n  personsPrefix,\n}) {\n\n  let { lang } = useParams();\n  language = lang;\n  personsLangPrefix = personsPrefix;\n  console.log(personsLangPrefix);\n  const { t } = useTranslation();\n  const theme = (languages[language].direction === 'rtl') ? rtlTheme : ltrTheme;\n  const classes = useStyles(theme);\n  const style = {\n    height: '128px',\n  }\n\n  const [{ canDrop, isOver }, drop] = useDrop({\n    accept,\n    drop: onDrop,\n    collect: (monitor) => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop(),\n      //connectDropTarget: connect.dropTarget()\n    }),\n  })\n\n  const isActive = canDrop && isOver\n  let backgroundColor = '#222'\n  if (isActive) {\n    backgroundColor = 'darkgreen'\n  } else if (canDrop) {\n    backgroundColor = blueGrey[800]\n  }\n\n  const tokensList = [];\n  for (let i = 0; i < amount; i++) {\n    tokensList.push(<MonetizedToken type={name} name={name + i.toString()} key={name + i.toString()} boxName={name} />);\n  }\n\n  return (\n    <Grid item xs={12}>\n      <Paper ref={drop} className={classes.paper} style={{ ...style, backgroundColor }} elevation={3} >\n        <Grid container alignItems=\"center\" direction=\"row\" className={classes.height100}>\n          <Grid item xs={4}>\n            {name === ItemTypes.OPPONENT &&\n              <OpponentInfoBar person={person} />\n            }\n            {name !== ItemTypes.OPPONENT &&\n              <Typography>{t('dictator.' + name)}</Typography>\n            }\n          </Grid>\n          <Grid item xs={7}>\n            <Grid container direction=\"row\" justifyContent=\"flex-start\" alignItems=\"center\">\n              {tokensList}\n            </Grid>\n          </Grid>\n          <Grid item xs={1}>\n            <Grid container direction=\"column\" justifyContent=\"center\" alignItems=\"center\">\n              <Avatar className={`${classes.grey} ${classes.large}`}>{amount}</Avatar>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Grid>\n  );\n})\n\n/**\n * uses the persons id and the field key alongside experiment loaded personLangPrefix to produce the locales key\n * @returns string for locales key\n */\nfunction getPersonKey(key, id) {\n  console.log(personsLangPrefix);\n  return personsLangPrefix + id + '.' + key;\n}\n\nconst OpponentInfoBar = memo(function OpponentInfoBar({ person }) {\n  const { t } = useTranslation();\n  const theme = (languages[language].direction === 'rtl') ? rtlTheme : ltrTheme;\n  const classes = useStyles(theme);\n  return (\n    <>\n      {person?.avatar &&\n        <Avatar alt={t(getPersonKey(person.field1, person.id))} src={process.env.PUBLIC_URL + \"/images/\" + person.avatar} className={classes.large} />\n      }\n      {!person?.avatar &&\n        <Avatar className={classes.large} />\n      }\n      <Typography variant=\"body1\" color=\"textPrimary\" component=\"p\">\n        {person?.field1 && t(getPersonKey(person.field1, person.id))}\n      </Typography>\n      <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n        {person?.field2 && t(getPersonKey(person.field2, person.id))}\n      </Typography>\n      <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n        {person?.field3 && t(getPersonKey(person.field3, person.id))}\n      </Typography>\n    </>\n  );\n})\n\n/***\n * Component which renders coin tokens and handles dragging events\n */\nconst MonetizedToken = memo(function MonetizedToken({ type, name, boxName }) {\n\n  const style = {\n    cursor: 'move',\n  }\n\n  const [{ isDragging }, drag, preview] = useDrag(\n    () => ({\n      type,\n      item: { name, boxName },\n      collect: (monitor) => ({\n        isDragging: !!monitor.isDragging(),\n      }),\n    }),\n    [name],\n  )\n  return (\n    <Grid item>\n      <DragPreviewImage connect={preview} src={process.env.PUBLIC_URL + \"/images/token-large.png\"} />\n      <span ref={drag} className='token-span' style={{ ...style, opacity: isDragging ? 0.5 : 1,}}> \n        <MonetizationOnIcon fontSize={isDragging? 'large':'medium'} /> \n      </span>\n    </Grid>\n\n  )\n})","import React, { useEffect, useState, Fragment, useCallback, } from 'react';\nimport { Typography, Button, Grid, Dialog, DialogTitle, \n          DialogContent, DialogContentText, DialogActions } from '@material-ui/core';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { TouchBackend } from 'react-dnd-touch-backend';\nimport { useTranslation } from 'react-i18next';\nimport { shuffle } from './utils/random';\nimport { ItemTypes, RepositoryBox } from './components/allotmentBox';\n\n//css\nimport \"./ultimatum.css\";\n\n\nexport default function Ultimatum({ content, onStore, onNotification }) {\n  //content:   text , tokens , trials , opponentTypes, useOpponentTypes, personsPrefix\n\n  const { t } = useTranslation();\n  const { tokens, trials, useOpponentTypes, opponentTypes, text, personsPrefix, dialogOptionalText, persons } = content;\n\n  //const theme = (languages[lang].direction === 'rtl') ? rtlTheme : ltrTheme;\n  //const classes = useStyles(theme);\n  \n  const [state, setState] = useState({\n    finished: false,\n    trial: null,\n    totalScore: 0,\n    dialogIsOpen: false,\n    trialResponses: [],\n    taskStartedAt: Date.now(),\n  });\n  const [boxes, setBoxes] = useState(\n    [\n      { name: ItemTypes.OPPONENT, amount: 0, accepts: [ItemTypes.POT, ItemTypes.PLAYER] },\n      { name: ItemTypes.POT, amount: tokens, accepts: [ItemTypes.PLAYER, ItemTypes.OPPONENT] },\n      { name: ItemTypes.PLAYER, amount: 0, accepts: [ItemTypes.POT, ItemTypes.OPPONENT] },\n    ]\n  )\n  const [shuffledPersons, setShuffledPersons] = useState(undefined);\n\n  // on mount and unmount\n  useEffect(() => {\n    // Nothing yet\n  }, []);\n\n  // when finished, store responses and proceed to the next view\n  useEffect(() => {\n    if (state.finished && !state.dialogIsOpen) {\n      const now = Date.now()\n      // add timestamps\n      let response = { trials: state.trialResponses };\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = now;\n      response.taskDuration = now - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n  }, [state, onStore, content]);\n\n /**\n   * Filters persons to return only the persons that have any of the given tags \n   * @param {*persons} persons persons to be filtered by their tags\n   * @param {*} tags tags used to select the persons which their tags has at least one the tags given\n   * @returns \n   */\n  const filterPersonsByTags = (persons, tags) => {\n    if (useOpponentTypes !== true)\n      return persons;\n    const filterredPersons = persons.filter(person => { return checkPersonHasTags(person, tags) });\n      return filterredPersons;\n  }\n\n  /**\n   * Checks if the given person has any of the the given tags\n   * @returns true if the person has any of the given tags\n   */\n  function checkPersonHasTags(person, tags) {\n    var checkResult = false;\n    for (let i = 0; i < person.tags.length; i++) {\n      if (tags.inclue(person.tags[i]))\n        checkResult = true;\n    }\n    return checkResult;\n  }\n\n  const finishTrialAction = () => {\n    canFinishTrial() ? newTrial() : onNotification(t('ultimatum.errors.required'));\n  }\n\n  /***\n   * this function shows if this trial can be finished by the participant\n   */\n  const canFinishTrial = () => {\n    let result = false;\n    boxes.forEach((box) => {\n      if (box.name === ItemTypes.POT && box.amount === 0)\n        result = true;\n    });\n    return result;\n  }\n\n  /***\n   * Activated when player has droped a token (item that is dragged and name of the dropped box) by setting setBoxes\n   */\n  const handleDrop = useCallback(\n    (name, item) => {\n      // item is the entity that is dropped and has {name, boxName}\n      // name is the name of the repositoryBox that entity has been dropped into\n      const fromBox = item.boxName;\n      const destBox = name;\n      //console.log('dropped on: ',destBox);\n      //console.log('from : ',fromBox);\n      setBoxes(boxes.map(item => {\n        if (item.name === fromBox) {\n          return { ...item, amount: item.amount - 1 };\n        } else if (item.name === destBox) {\n          return { ...item, amount: item.amount + 1 };\n        } else {\n          return item;\n        }\n      }));\n    },\n    [boxes],\n  )\n\n  /***\n   * Starts the task for the first time\n   */\n  const startTask = () => {\n    let filterredPersons = filterPersonsByTags(persons, opponentTypes);\n    setShuffledPersons(shuffle(filterredPersons));\n    setState({\n      ...state,\n      trial: 0,\n      trialResponses: [],\n      taskStartedAt: Date.now() //timestamp\n    });\n  }\n\n  /**\n   * Store trial responses, then proceed to the next trial or finish the game\n   */\n  const newTrial = () => {\n    if (!canFinishTrial()) {\n      console.log('it should never come to this, because before calling newTrial, canFinishTrial has been checked!!!!');\n      onNotification(t('ultimatum.errors.required'));\n      return;\n    }\n    const playerShare = boxes.find(box => box.name === ItemTypes.PLAYER).amount;\n    let accepted = true;\n    if(shuffledPersons[personIndex]?.minAcceptable > (tokens-playerShare))\n      accepted = false;\n    setState({\n      ...state,\n      trialResponses: [...state.trialResponses, {\n        trial: state.trial,\n        playerShare: playerShare,\n        score: accepted ? playerShare : 0,\n        opponentShare: tokens - playerShare,\n        opponent: shuffledPersons[personIndex],\n        result: accepted ? \"accepted\" : \"rejected\"\n      }],\n      finished: (state.trial >= trials - 1),\n      trial: state.trial + 1,\n      totalScore: state.totalScore + (accepted ? playerShare : 0),\n      dialogIsOpen: true,\n    });\n\n    // when the trial finished the tokens in boxes should reset\n    setBoxes(\n      [\n        { name: ItemTypes.OPPONENT, amount: 0, accepts: [ItemTypes.POT, ItemTypes.PLAYER] },\n        { name: ItemTypes.POT, amount: tokens, accepts: [ItemTypes.PLAYER, ItemTypes.OPPONENT] },\n        { name: ItemTypes.PLAYER, amount: 0, accepts: [ItemTypes.POT, ItemTypes.OPPONENT] },\n      ]\n    );\n  }\n\n  if (state.trial === null) {\n    console.log('ultimatum starting...');\n    startTask();\n    return;\n  }\n\n  // If persons are less than the number of trials it should fill the array\n  var personIndex = state.trial;\n  if (state.trial !== null && state.trial >= shuffledPersons.length) {\n    personIndex = state.trial % shuffledPersons.length;\n  }\n\n  /**\n   * render a dialog that shows trial summary.\n   */\n  const renderDialog = () => {\n    return (\n      <Dialog\n        open={state.dialogIsOpen}\n        onClose={() => setState({ ...state, dialogIsOpen: false })}\n        disableEscapeKeyDown\n        aria-labelledby=\"dialog-title\"\n      >\n        {/* // fix error h6 is nested in h2 */}\n        <DialogTitle disableTypography id=\"dialog-title\">\n          <Typography variant='h6' color={state.trialResponses[state.trialResponses.length - 1].result==='accepted'?'primary':'error'}>\n            <b>\n            {state.trialResponses[state.trialResponses.length - 1].result==='accepted' ? \n              t('ultimatum.dialog_title.accepted')\n              :t('ultimatum.dialog_title.rejected')\n            }\n            </b>\n          </Typography>\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            {t('ultimatum.trial_score_report', {decision: state.trialResponses[state.trialResponses.length - 1].result, score: state.trialResponses[state.trialResponses.length - 1].score })}\n            {t('ultimatum.total_score_report', { score: state.trialResponses.map(r => r.score).reduce((a, b) => a + b, 0) })}\n            <br /> <br />\n            {!state.finished && dialogOptionalText ? t(dialogOptionalText) : t('ultimatum.dialog_optional_text_default')}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setState({ ...state, dialogIsOpen: false })} color=\"primary\" autoFocus size='large'>\n            {state.trial <= trials - 1 ? t('ultimatum.next_trial') : t('next')}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }  \n\n  const isTouchScreen = () => {\n    return ( 'ontouchstart' in window ) ||\n           ( navigator.maxTouchPoints > 0 ) ||\n           ( navigator.msMaxTouchPoints > 0 );\n  }\n  const dndBackend = isTouchScreen() ? TouchBackend : HTML5Backend;\n  /***\n   * Main render part of the ultimatum experiment\n   *\n   */\n  return (\n    <Fragment>\n      {state.dialogIsOpen && renderDialog() }\n      <Grid container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='ultimatum-container'>\n        <Grid item>\n          <Typography variant=\"body2\">{t(text)}</Typography>\n        </Grid>\n        {/* Boxes container */}\n        <Grid item container spacing={2} alignItems='stretch' justifyContent='space-between' className='boxes-container'>\n          <DndProvider backend={dndBackend} options={isTouchScreen()?{enableMouseEvents: true}:{}}>\n            {boxes.map(({name, amount, accepts}, index) => (\n              <RepositoryBox\n                accept={accepts}\n                name={name}\n                amount={amount}\n                onDrop={(item) => handleDrop(name, item)}\n                key={index}\n                person={shuffledPersons[personIndex]}\n                personsPrefix={personsPrefix}\n              />\n            ))}\n          </DndProvider>\n        </Grid>\n        {/* Labels and actions */}\n        <Grid item container direction='row' justifyContent=\"space-around\" alignItems='center'>\n          <Grid item xs={4}><Grid container direction='column' justifyContent=\"space-around\" alignItems='center'>\n            <Typography  variant='body2'>{t('ultimatum.trial_label',{trial:state.trial+1, trials:trials})}</Typography>\n          </Grid></Grid>\n\n          <Grid item xs={4}><Grid container direction='column' justifyContent=\"space-around\" alignItems='center'>\n            <Button size='large' color={canFinishTrial()?'primary':'default'} variant={canFinishTrial()?'contained':'outlined'} onClick={finishTrialAction}>{t('ultimatum.finish.button')}</Button>\n          </Grid></Grid>\n\n          <Grid item xs={4}><Grid container direction='column' justifyContent=\"space-around\" alignItems='center'>\n            <Typography variant=\"body2\">{t('ultimatum.total_points',{score:state.totalScore})}</Typography>\n          </Grid></Grid>\n        </Grid>\n      </Grid>\n    </Fragment>\n  );\n}\n","import React, { useEffect, useState, Fragment, useCallback } from 'react';\nimport { Typography, Button, Grid, Dialog, DialogTitle, DialogContent,\n          DialogContentText, DialogActions,\n          Container,\n          CircularProgress,\n          Box} from '@material-ui/core';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { TouchBackend } from 'react-dnd-touch-backend';\nimport { useTranslation } from 'react-i18next';\nimport { shuffle } from './utils/random';\nimport { ItemTypes, RepositoryBox } from './components/allotmentBox';\n\n//css\nimport \"./dictator.css\";\n\nexport default function Dictator({ content, onStore, onNotification }) {\n\n  const { t } = useTranslation();\n  const { tokens, trials, useOpponentTypes, opponentTypes, text, personsPrefix, persons } = content;\n\n  //const theme = (languages[lang].direction === 'rtl') ? rtlTheme : ltrTheme;\n  //const classes = useStyles(theme);\n\n  const [state, setState] = useState({\n    finished: false,\n    trial: null,\n    totalScore: 0,\n    dialogIsOpen: false,\n    trialResponses: [],\n    taskStartedAt: Date.now(),\n    collectionState: 0 // 0: not started, 1: started, 2: done\n  });\n  const [boxes, setBoxes] = useState(\n    [\n      { name: ItemTypes.OPPONENT, amount: 0, accepts: [ItemTypes.POT, ItemTypes.PLAYER] },\n      { name: ItemTypes.POT, amount: tokens, accepts: [ItemTypes.PLAYER, ItemTypes.OPPONENT] },\n      { name: ItemTypes.PLAYER, amount: 0, accepts: [ItemTypes.POT, ItemTypes.OPPONENT] },\n    ]\n  )\n  const [shuffledPersons, setShuffledPersons] = useState(undefined);\n  const [matchmakingCompleted, setMatchmakingCompleted] = useState(false);\n  const [matchmakingTimer, setMatchmakingTimer] = useState(null);\n\n  // on mount and unmount\n  useEffect(() => {\n    // Nothing yet\n  }, []);\n\n  // when finished, store responses and proceed to the next view\n  useEffect(() => {\n    if (state.finished && !state.dialogIsOpen) {\n      const now = Date.now()\n      // add timestamps\n      let response = { trials: state.trialResponses };\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = now;\n      response.taskDuration = now - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n  }, [state, onStore, content]);\n\n  useEffect(() => {\n    // When dialog opens, start the timer\n    if (state.dialogIsOpen) {\n      setMatchmakingCompleted(false);\n      const timer = setTimeout(() => {\n        setMatchmakingCompleted(true);\n      }, 5000);\n      setMatchmakingTimer(timer);\n    } else {\n      // When dialog closes, clear the timer and reset the state\n      if (matchmakingTimer) {\n        clearTimeout(matchmakingTimer);\n      }\n      setMatchmakingCompleted(false);\n    }\n\n    // Cleanup function\n    return () => {\n      if (matchmakingTimer) {\n        clearTimeout(matchmakingTimer);\n      }\n    };\n  }, [state.dialogIsOpen]); // Only run when dialog opens/closes\n\n /**\n   * Filters persons to return only the persons that have any of the given tags\n   * @param {*persons} persons persons to be filtered by their tags\n   * @param {*} tags tags used to select the persons which their tags has at least one the tags given\n   * @returns\n   */\n  const filterPersonsByTags = (persons, tags) => {\n    if (useOpponentTypes !== true)\n      return persons;\n    const filterredPersons = persons.filter(person => { return checkPersonHasTags(person, tags) });\n      return filterredPersons;\n  }\n\n  /**\n   * Checks if the given person has any of the the given tags\n   * @returns true if the person has any of the given tags\n   */\n  function checkPersonHasTags(person, tags) {\n    var checkResult = false;\n    for (let i = 0; i < person.tags.length; i++) {\n      if (tags.inclue(person.tags[i]))\n        checkResult = true;\n    }\n    return checkResult;\n  }\n\n  const finishTrialAction = () => {\n    canFinishTrial() ? newTrial() : onNotification(t('dictator.errors.required'));\n  }\n\n  /***\n   * this function shows if this trial can be finished by the participant\n   */\n  const canFinishTrial = () => {\n    let result = false;\n    boxes.forEach((box) => {\n      if (box.name === ItemTypes.POT && box.amount === 0)\n        result = true;\n    });\n    return result;\n  }\n\n  /***\n   * Activated when player has droped a token (item that is dragged and name of the dropped box) by setting setBoxes\n   */\n  const handleDrop = useCallback(\n    (name, item) => {\n      // item is the entity that is dropped and has {name, boxName}\n      // name is the name of the repositoryBox that entity has been dropped into\n      const fromBox = item.boxName;\n      const destBox = name;\n      //console.log('dropped on: ',destBox);\n      //console.log('from : ',fromBox);\n      setBoxes(boxes.map(item => {\n        if (item.name === fromBox) {\n          return { ...item, amount: item.amount - 1 };\n        } else if (item.name === destBox) {\n          return { ...item, amount: item.amount + 1 };\n        } else {\n          return item;\n        }\n      }));\n    },\n    [boxes],\n  )\n\n  /***\n   * Starts the task for the first time\n   */\n  const startTask = () => {\n    let filterredPersons = filterPersonsByTags(persons, opponentTypes);\n    setShuffledPersons(shuffle(filterredPersons));\n    setState({\n      ...state,\n      trial: 0,\n      trialResponses: [],\n      taskStartedAt: Date.now() //timestamp\n    });\n  }\n\n  /**\n   * Store trial responses, then proceed to the next trial or finish the game\n   */\n  const newTrial = () => {\n    if (!canFinishTrial()) {\n      console.log('it should never come to this, because before calling newTrial, canFinishTrial has been checked!!!!');\n      onNotification(t('dictator.errors.required'));\n      return;\n    }\n    const playerShare = boxes.find(box => box.name === ItemTypes.PLAYER).amount;\n    setState({\n      ...state,\n      trialResponses: [...state.trialResponses, {\n        trial: state.trial,\n        playerShare: playerShare,\n        opponentShare: tokens - playerShare,\n        opponent: shuffledPersons[personIndex]\n      }],\n      finished: (state.trial >= trials - 1),\n      trial: state.trial + 1,\n      totalScore: state.totalScore + playerShare,\n      dialogIsOpen: true,\n    });\n\n    // when the trial finished the tokens in boxes should reset\n    setBoxes(\n      [\n        { name: ItemTypes.OPPONENT, amount: 0, accepts: [ItemTypes.POT, ItemTypes.PLAYER] },\n        { name: ItemTypes.POT, amount: tokens, accepts: [ItemTypes.PLAYER, ItemTypes.OPPONENT] },\n        { name: ItemTypes.PLAYER, amount: 0, accepts: [ItemTypes.POT, ItemTypes.OPPONENT] },\n      ]\n    );\n  }\n\n  if (state.trial === null) {\n    console.log('dictator starting...');\n    startTask();\n    return;\n  }\n\n  // If persons are less than the number of trials it should fill the array\n  var personIndex = state.trial;\n  if (state.trial !== null && state.trial >= shuffledPersons.length) {\n    personIndex = state.trial % shuffledPersons.length;\n  }\n\n  /**\n   * render a dialog that shows trial summary.\n   */\n  const renderDialog = () => {\n    return (\n      <Dialog\n        open={state.dialogIsOpen}\n        onClose={() => setState({ ...state, dialogIsOpen: false })}\n        disableEscapeKeyDown\n        aria-labelledby=\"dialog-title\"\n        className='margined-dialog'\n        id='collect-dialog'\n      >\n        <DialogTitle id=\"dialog-title\"><b>{t('dictator.dialog_title')}</b></DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            {t('dictator.trial_score_report', { score: state.trialResponses[state.trialResponses.length - 1].playerShare })}\n            {t('dictator.total_score_report', { score: state.trialResponses.map(r => r.playerShare).reduce((a, b) => a + b, 0) })}\n            <Container id=\"matchmaking-container\" style={{\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n              justifyContent: 'center',\n              minHeight: '200px' // Gives some vertical space for centering\n            }}>\n              <Box id=\"matchmaking-loading\" className={matchmakingCompleted ? 'hide' : ''}>\n                {/* Center the spinner horizontally using container styles */}\n                <Box display=\"flex\" justifyContent=\"center\" width=\"100%\">\n                  <CircularProgress />\n                </Box>\n                <Box mt={2}>\n                  <Typography variant='body1'>{t('dictator.waiting_for_opponent')}</Typography>\n                </Box>\n              </Box>\n              <Box id=\"matchmaking-result\" className={matchmakingCompleted ? '' : 'hide'}>\n                <Typography variant='body1' style={{paddingBottom: '16px'}}>{t('dictator.matchmaking_result')}</Typography>\n                <Typography variant='body1' style={{paddingBottom: '16px'}}>{t('dictator.matchmaking_result_text')}</Typography>\n\n              </Box>\n            </Container>\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setState({ ...state, dialogIsOpen: false })} disabled={!matchmakingCompleted} color=\"primary\" autoFocus size='large'>\n            {state.trial <= trials - 1 ? t('dictator.next_trial') : t('next')}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n\n  const isTouchScreen = () => {\n    return ( 'ontouchstart' in window ) ||\n           ( navigator.maxTouchPoints > 0 ) ||\n           ( navigator.msMaxTouchPoints > 0 );\n  }\n  const dndBackend = isTouchScreen() ? TouchBackend : HTML5Backend;\n\n  /***\n   * Main render part of the dictator experiment\n   *\n   */\n  return (\n    <Fragment>\n      {state.dialogIsOpen && renderDialog() }\n      <Grid container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start'>\n        <Grid item>\n          <Typography variant=\"body2\">{t(text)}</Typography>\n        </Grid>\n        {/* Boxes container */}\n        <Grid item container spacing={2} alignItems='stretch' justifyContent='space-between' className='boxes-container'>\n          <DndProvider backend={dndBackend} options={isTouchScreen()?{enableMouseEvents: true}:{}}>\n            {boxes.map(({name, amount, accepts}, index) => (\n              <RepositoryBox\n                accept={accepts}\n                name={name}\n                amount={amount}\n                onDrop={(item) => handleDrop(name, item)}\n                key={index}\n                person={shuffledPersons[personIndex]}\n                personsPrefix={personsPrefix}\n              />\n            ))}\n          </DndProvider>\n        </Grid>\n        {/* Labels and actions */}\n        <Grid item container direction='row' justifyContent=\"space-around\" alignItems='center'>\n          <Grid item xs={4}><Grid container direction='column' justifyContent=\"space-around\" alignItems='center'>\n            <Typography variant='body2'>{t('dictator.trial_label',{trial:state.trial+1, trials:trials})}</Typography>\n          </Grid></Grid>\n\n          <Grid item xs={4}><Grid container direction='column' justifyContent=\"space-around\" alignItems='center'>\n            <Button size='large' color='primary' variant='outlined' onClick={finishTrialAction}>{t('dictator.finish.button')}</Button>\n          </Grid></Grid>\n\n          <Grid item xs={4}><Grid container direction='column' justifyContent=\"space-around\" alignItems='center'>\n            <Typography variant=\"body2\">{t('dictator.total_points',{score:state.totalScore})}</Typography>\n          </Grid></Grid>\n        </Grid>\n      </Grid>\n    </Fragment>\n  );\n}","import React, { useState, useEffect, Fragment } from 'react';\n\n\nimport { Button, Grid, Divider } from '@material-ui/core';\n\nimport {\n  Star,\n  RadioButtonUnchecked as Circle,\n  Add,\n  Check as Correct,\n  Clear as Incorrect\n} from '@material-ui/icons';\n\nimport Markdown from 'react-markdown/with-html';\n\nimport { shuffle } from './utils/random';\nimport { useTranslation } from 'react-i18next';\n\nimport './taskswitch.css';\n\n//FIXME these are realtime variables, so I keep them out of the component's state.\nlet clock\n\nexport default function TaskSwitch({ content, onStore, onProgress }) {\n\n  const { t } = useTranslation();\n  const { text, trials, stimuliDuration, fixationDuration, timeoutsBeforeReset, feedbackDuration } = content;\n\n  const [state, setState] = useState({\n    finished: false,\n    trialResponses: [],\n    taskStartedAt: null,\n    taskFinishedAt: null,\n    taskDuration: null,\n    step: null,\n    type: null,\n    correct: null,\n    stimuli: null,\n    trialStartedAt: null,\n    respondedAt: null,\n    trial: null,\n    timeouts: 0\n  })\n\n\n  useEffect(() => {\n    /**\n     * callback to handle keypress events\n     */\n    const handleKeyPress = (event) => {\n      const { key, keyCode } = event;\n\n      // press space to start the task\n      if (state.trial === null && (keyCode === 32 || key === ' ')) {\n        startTask()\n        return;\n      }\n\n      // ignore invalid keys and invalid trial steps\n      if (state.step !== 'stimuli' || !['ArrowLeft', 'ArrowRight'].includes(key))\n        return;\n\n      const current = state.stimuli[state.trial - 1];\n      let choice = undefined;\n\n      let empty = (key==='ArrowLeft' && current.startsWith('right')) || \n                  (key==='ArrowRight' && current.startsWith('left'));\n      let go = (key==='ArrowLeft' && current.startsWith('left-go')) ||\n              (key==='ArrowRight' && current.startsWith('right-go'));\n\n      choice = current.endsWith('top') ? \n          (go?trials.top.choices.go : (empty?'empty':trials.top.choices.nogo) )\n          :\n          (go?trials.bottom.choices.go : (empty?'empty':trials.bottom.choices.nogo)) ;\n      handleResponse(choice)\n    }\n    \n    window.addEventListener('keydown', handleKeyPress);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n\n  }, [state] // FIXME add missin dependencies\n  );\n\n  useEffect(() => {\n    // generate stimuli stream\n    if (state.stimuli===null) {\n      let stim = [...Array(trials.total).keys()].map((i,t) => {\n        if(i<trials.top.total){\n          if(i<trials.top.leftGo)\n            return 'left-go-top'\n          if (i<trials.top.go)\n            return 'right-go-top'\n          if (i<trials.top.go + (trials.top.left - trials.top.leftGo))\n            return 'left-nogo-top'\n          return 'right-nogo-top'\n        }else{\n          if(i<trials.top.total+trials.bottom.leftGo)\n            return 'left-go-bottom'\n          if(i<trials.top.total+trials.bottom.go)\n            return 'right-go-bottom'\n          if (i<trials.top.total+ trials.bottom.go + (trials.bottom.left - trials.bottom.leftGo))\n            return 'left-nogo-bottom'\n          return 'right-nogo-bottom'\n        }\n      }); \n      setState({...state, stimuli: shuffle(stim)});\n    }\n  }, [state]);\n\n  useEffect(() => {\n    // # FIXATION\n    if (state.step === 'fixation') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        setState({\n          ...state,\n          trial: state.trial + 1,\n          trialStartedAt: Date.now(),\n          step: 'stimuli'\n        });\n      }, fixationDuration);\n    }\n\n    // # FEEDBACK\n    if (state.step === 'feedback') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        setState({ ...state, step: 'fixation' })\n      }, feedbackDuration)\n    }\n\n    if (state.step === 'stimuli') {\n      clearTimeout(clock);\n\n      if (state.timeouts < timeoutsBeforeReset) {\n        clock = setTimeout(() => {\n          setState({\n            ...state,\n            trialResponses: [...state.trialResponses, {\n              'trial': state.trial,\n              'stimuli': state.stimuli[state.trial - 1],\n              'choice': null,\n              'correct': null,\n              'respondedAt': null,\n              'trialStartedAt': state.trialStartedAt,\n              'rt': null\n            }],\n            timeouts: state.timeouts + 1,\n            correct: false,\n            step: (feedbackDuration > 0) ? 'feedback' : 'fixation'\n          });\n        }, stimuliDuration)\n      } else {\n        setState({ ...state, step: 'reset', timeouts: 0 })\n      }\n    }\n\n\n    onProgress(100.0 * state.trial / trials.total)\n\n    if (state.trial > trials.total) {\n      console.log('------------ FINISHED -------')\n      onProgress(100.0)\n      setState({ ...state, finished: true, taskFinishedAt: Date.now() })\n    }\n\n    // on finish\n    if (state.finished) {\n      clearTimeout(clock);\n\n      // timestamps\n      let response = { trials: state.trialResponses };\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = state.taskFinishedAt;\n      response.taskDuration = state.taskFinishedAt - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n\n  }, [state]);\n\n\n  const startTask = () => {\n    setState({\n      ...state,\n      trialResponses: [],\n      trial: 0,\n      timeouts: 0,\n      step: 'fixation',\n      taskStartedAt: Date.now()\n    })\n  }\n\n  const handleResponse = (choice) => {\n    const respondedAt = Date.now(); //timestamp\n\n    clearTimeout(clock);\n\n    const _correct = getCorrect(state.stimuli[state.trial - 1]);\n    console.log('correct answer = %s for choice %s , in stimuli %o', _correct, choice, state.stimuli[state.trial - 1]);\n\n    setState({\n      ...state,\n      correct: _correct === choice,\n      respondedAt: respondedAt,\n      trialResponses: [...state.trialResponses, {\n        'trial': state.trial,\n        'stimuli': state.stimuli[state.trial - 1],\n        'choice': choice,\n        'correct': _correct === choice,\n        'respondedAt': respondedAt,\n        'trialStartedAt': state.trialStartedAt,\n        'rt': respondedAt - state.trialStartedAt\n      }],\n      step: (feedbackDuration > 0) ? 'feedback' : 'fixation'\n    })\n  }\n\n  function getCorrect(stimuli){\n    const choices = stimuli.endsWith('top') ? trials.top.choices : trials.bottom.choices;\n    return stimuli.includes('nogo') ? 'empty' : choices.go;\n  }\n\n  const renderStimulus = (stimulus, selectable = true) => {\n    return (\n      <Fragment>\n      {stimulus==='empty' && selectable && <div onClick={() => handleResponse('empty')} className='ts-stimulus'> </div>}\n      {stimulus==='empty' && !selectable && <div className='ts-stimulus ts-inactive'> </div>}\n      {stimulus==='star' && <div onClick={() => handleResponse('star')} className='ts-stimulus'><Star fontSize='large' className='yellow' /></div>}\n      {stimulus==='circle' && <div onClick={() => handleResponse('circle')} className='ts-stimulus'><Circle fontSize='large' className='blue' /></div>}\n      {stimulus==='blue-star' && <div onClick={() => handleResponse('blue-star')} className='ts-stimulus'><Star fontSize='large' className='blue' /></div>}\n      {stimulus==='yellow-circle' && <div onClick={() => handleResponse('yellow-circle')} className='ts-stimulus'><Star fontSize='large' className='yellow' /></div>}\n      </Fragment>\n    );\n  }\n\n  /**\n   * \n   * @param {*} trialType type of trial\n   * @param {*} pos 0 for top, 1 for bottom\n   * @returns renders a row of stimuli\n   */\n  const renderStimuliRow = (trialType, pos) =>{\n    const choices = trialType.endsWith('top') ? trials.top.choices : trials.bottom.choices;\n    return (\n      <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        {pos===0 && trialType.endsWith('bottom') && renderStimulus('empty',false)}\n        {pos===0 && trialType.endsWith('top') && trialType.startsWith('left-go') && renderStimulus(choices.go)}\n        {pos===0 && trialType.endsWith('top') && trialType.startsWith('left-nogo') && renderStimulus(choices.nogo)}\n        {pos===0 && trialType.endsWith('top') && (!trialType.includes('left-go')  && !trialType.includes('left-nogo')) && renderStimulus('empty')}\n        {pos===1 && trialType.endsWith('top') && renderStimulus('empty',false)}\n        {pos===1 && trialType.endsWith('bottom') && trialType.startsWith('left-go') && renderStimulus(choices.go)}\n        {pos===1 && trialType.endsWith('bottom') && trialType.startsWith('left-nogo') && renderStimulus(choices.nogo)}\n        {pos===1 && trialType.endsWith('bottom') && (!trialType.startsWith('left-go') && !trialType.startsWith('left-nogo')) && renderStimulus('empty')}\n        <Divider orientation='vertical' flexItem />\n        {pos===0 && trialType.endsWith('bottom') && renderStimulus('empty',false)}\n        {pos===0 && trialType.endsWith('top') && trialType.startsWith('right-go') && renderStimulus(choices.go)}\n        {pos===0 && trialType.endsWith('top') && trialType.startsWith('right-nogo') && renderStimulus(choices.nogo)}\n        {pos===0 && trialType.endsWith('top') && (!trialType.includes('right-go')  && !trialType.includes('right-nogo')) && renderStimulus('empty')}\n        {pos===1 && trialType.endsWith('top') && renderStimulus('empty',false)}\n        {pos===1 && trialType.endsWith('bottom') && trialType.startsWith('right-go') && renderStimulus(choices.go)}\n        {pos===1 && trialType.endsWith('bottom') && trialType.startsWith('right-nogo') && renderStimulus(choices.nogo)}\n        {pos===1 && trialType.endsWith('bottom') && (!trialType.startsWith('right-go') && !trialType.startsWith('right-nogo')) && renderStimulus('empty')}\n      </Grid>\n    )\n  }\n  const renderStimuli = (trialType) => {\n    //console.log(\"renderStimuli: \",trialType);\n    if(!trialType)\n      return;\n    return (\n      <Grid item container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='ts-stimulus-container'>\n        {renderStimuliRow(trialType,0)}\n        <Grid item> <Divider orientation='horizontal' /> </Grid>\n        {renderStimuliRow(trialType,1)}\n      </Grid>\n    )\n  }\n\n  const renderFeedback = () => {\n    return (\n      <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        {state.correct && <Correct fontSize='large' className='correct ts-icon' />}\n        {!state.correct && <Incorrect fontSize='large' className='incorrect ts-icon' />}\n      </Grid>\n    )\n  }\n\n  const renderFixation = () => {\n    return (\n      <Grid item container direction=\"row\" justifyContent=\"space-around\" alignItems=\"center\">\n        <Add fontSize='large' className='fixation ts-icon' />\n      </Grid>\n    );\n  }\n\n  // show reset screen on timeouts reaching a threshold\n  if (state.step === 'reset') {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('taskswitch.too_many_timeouts')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' color='secondary' onClick={() => startTask()}>{t('taskswitch.restart')}</Button>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  // start screen\n  if (state.trial === null) {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('taskswitch.are_you_ready')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' onClick={() => startTask()}>{t('taskswitch.start')}</Button>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  return (\n    <Grid item container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='ts-container'>\n      <Grid item>\n        <Markdown source={t(text)} escapeHtml={false} className='markdown-text' />\n      </Grid>\n\n      {state.step === 'stimuli' && renderStimuli(state.stimuli[state.trial - 1])}\n      {state.step === 'feedback' && renderFeedback()}\n      {state.step === 'fixation' && renderFixation()}\n\n    </Grid>\n  );\n}\n","import React, { useState, useEffect, Fragment } from 'react';\n\n\nimport { Button, Grid, Divider } from '@material-ui/core';\n\nimport {\n  Star,\n  RadioButtonUnchecked as Circle,\n  Add,\n  Check as Correct,\n  Clear as Incorrect\n} from '@material-ui/icons';\n\nimport Markdown from 'react-markdown/with-html';\n\nimport { shuffle } from './utils/random';\nimport { useTranslation } from 'react-i18next';\n\nimport './simplified_taskswitch.css';\n\n//FIXME these are realtime variables, so I keep them out of the component's state.\nlet clock\n\nexport default function SimplifiedTaskSwitch({ content, onStore, onProgress }) {\n\n  const { t } = useTranslation();\n  const { text, trials, stimuliDuration, fixationDuration, timeoutsBeforeReset, feedbackDuration } = content;\n\n  const [state, setState] = useState({\n    finished: false,\n    trialResponses: [],\n    taskStartedAt: null,\n    taskFinishedAt: null,\n    taskDuration: null,\n    step: null,\n    type: null,\n    correct: null,\n    stimuli: null,\n    trialStartedAt: null,\n    respondedAt: null,\n    trial: null,\n    timeouts: 0\n  })\n\n\n  useEffect(() => {\n    console.log('useEffect -> before handleKeyPress, it has no dependency');\n    /**\n     * callback to handle keypress events\n     */\n    const handleKeyPress = (event) => {\n      const { key, keyCode } = event;\n\n      // press space to start the task\n      if (state.trial === null && (keyCode === 32 || key === ' ')) {\n        startTask()\n        return;\n      }\n\n      // ignore invalid keys and invalid trial steps\n      if (state.step !== 'stimuli' || !['ArrowLeft', 'ArrowRight'].includes(key))\n        return;\n\n      const current = state.stimuli[state.trial - 1];\n      let choice = undefined;\n\n      if (key === 'ArrowLeft')\n        choice = current.pos > 1 ? 2 : 0;\n      if (key === 'ArrowRight')\n        choice = current.pos > 1 ? 3 : 1;\n\n      handleResponse(choice)\n\n    }\n    window.addEventListener('keydown', handleKeyPress);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n  }, [state] // FIXME add missin dependencies\n  );\n\n  useEffect(() => {\n\n    console.log(state.stimuli);\n    // generate stimuli stream : stimuli:{pos: [0 top-left, 1 top-right, 2 bott-left, 3 bott-right]  , figure:'figureA/B' , color: 'blue/yellow }\n    if (state.stimuli === null) {\n      let stim = [...Array(trials.total).keys()].map((i, t) => {\n        let stimuliProperties = {\n          pos: 0, // 0 top-left, 1 top-right, 2 bott-left, 3 bott-right]\n          figure: 0, // 0 'figureA' , 1 'figureB' color: 'blue/yellow }\n          color: 0 // 0 colorA , 1 colorB\n        };\n        if (i < trials.typeA) {\n          stimuliProperties.pos = (i < trials.left) ? 0 : 1;\n          stimuliProperties.figure = i < trials.figureA ? 0 : 1;\n          stimuliProperties.color = i < trials.colorA ? 0 : 1;\n        } else {\n          stimuliProperties.pos = (i - trials.typeA) < trials.left ? 2 : 3;\n          stimuliProperties.figure = (i - trials.typeA) < trials.figureA ? 0 : 1;\n          stimuliProperties.color = (i - trials.typeA) < trials.colorA ? 0 : 1;\n        }\n        return stimuliProperties;\n      })\n      setState({ ...state, stimuli: shuffle(stim) });\n    }\n  }, [state.stimuli]);\n\n  useEffect(() => {\n    // # FIXATION\n    if (state.step === 'fixation') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        setState({\n          ...state,\n          trial: state.trial + 1,\n          trialStartedAt: Date.now(),\n          step: 'stimuli'\n        });\n      }, fixationDuration);\n    }\n\n    // # FEEDBACK\n    if (state.step === 'feedback') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        setState({ ...state, step: 'fixation' })\n      }, feedbackDuration)\n    }\n\n    if (state.step === 'stimuli') {\n      clearTimeout(clock);\n\n      if (state.timeouts < timeoutsBeforeReset) {\n        clock = setTimeout(() => {\n          setState({\n            ...state,\n            trialResponses: [...state.trialResponses, {\n              'trial': state.trial,\n              'stimuli': state.stimuli[state.trial - 1],\n              'choice': null,\n              'correct': null,\n              'respondedAt': null,\n              'trialStartedAt': state.trialStartedAt,\n              'rt': null\n            }],\n            timeouts: state.timeouts + 1,\n            correct: false,\n            step: (feedbackDuration > 0) ? 'feedback' : 'fixation'\n          });\n        }, stimuliDuration)\n      } else {\n        setState({ ...state, step: 'reset', timeouts: 0 })\n      }\n    }\n\n\n    onProgress(100.0 * state.trial / trials.total)\n\n    if (state.trial > trials.total) {\n      console.log('------------ FINISHED -------')\n      onProgress(100.0)\n      setState({ ...state, finished: true, taskFinishedAt: Date.now() })\n    }\n\n    // on finish\n    if (state.finished) {\n      clearTimeout(clock);\n\n      // timestamps\n      let response = { trials: state.trialResponses };\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = state.taskFinishedAt;\n      response.taskDuration = state.taskFinishedAt - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n\n  }, [state]);\n\n\n  const startTask = () => {\n    setState({\n      ...state,\n      trialResponses: [],\n      trial: 0,\n      timeouts: 0,\n      step: 'fixation',\n      taskStartedAt: Date.now()\n    })\n  }\n\n  const handleResponse = (choice) => {\n    const respondedAt = Date.now(); //timestamp\n\n    clearTimeout(clock);\n\n    const _correct = getCrorrectFromStimuli(state.stimuli[state.trial - 1]);\n    console.log('correct answer = %d for choice %d , in stimuli %o', _correct, choice, state.stimuli[state.trial - 1]);\n\n    setState({\n      ...state,\n      correct: _correct === choice,\n      respondedAt: respondedAt,\n      trialResponses: [...state.trialResponses, {\n        'trial': state.trial,\n        'stimuli': state.stimuli[state.trial - 1],\n        'type': state.stimuli[state.trial - 1].pos < 2 ? 0 : 1,\n        'choice': choice,\n        'correct': _correct === choice,\n        'respondedAt': respondedAt,\n        'trialStartedAt': state.trialStartedAt,\n        'rt': respondedAt - state.trialStartedAt\n      }],\n      step: (feedbackDuration > 0) ? 'feedback' : 'fixation'\n    })\n  }\n\n  function getCrorrectFromStimuli(stimuli) {\n    if (stimuli.pos < 2) {\n      if (stimuli.figure === 0)\n        return stimuli.pos;\n      return 1 - stimuli.pos;\n    }\n    if (stimuli.pos > 1) {\n      if (stimuli.color === 0)\n        return stimuli.pos;\n      return stimuli.pos === 2 ? 3 : 2;\n    }\n  }\n\n  const renderStimulus = (stimulus, pos) => {\n    return (\n      <Fragment>\n        <div onClick={() => handleResponse(pos)} className='ts-stimulus'>\n          {stimulus === '0-0' && <Star fontSize='large' className='yellow' />}\n          {stimulus === '1-0' && <Circle fontSize='large' className='yellow' />}\n          {stimulus === '0-1' && <Star fontSize='large' className='blue' />}\n          {stimulus === '1-1' && <Circle fontSize='large' className='blue' />}\n        </div>\n      </Fragment>\n    );\n  }\n\n  const renderStimuliRow = (draw, stimuli, i, j) => {\n    if (draw === false)\n      return (\n        <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n          {renderStimulus('empty', i)}\n          <Divider orientation='vertical' flexItem />\n          {renderStimulus('empty', j)}\n        </Grid>\n      );\n    return (\n      <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        {stimuli?.pos === i && renderStimulus(stimuli.figure + '-' + stimuli.color, stimuli.pos)}\n        {stimuli?.pos === j && renderStimulus('empty', i)}\n        <Divider orientation='vertical' flexItem />\n        {stimuli?.pos === i && renderStimulus('empty', j)}\n        {stimuli?.pos === j && renderStimulus(stimuli.figure + '-' + stimuli.color, stimuli.pos)}\n      </Grid>\n    )\n  }\n  const renderStimuli = (stimuli) => {\n    return (\n      <Grid item container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='ts-stimulus-container'>\n        {stimuli?.pos < 2 && renderStimuliRow(true, stimuli, 0, 1)}\n        {stimuli?.pos > 1 && renderStimuliRow(false)}\n        <Grid item> <Divider orientation='horizontal' /> </Grid>\n        {stimuli?.pos < 2 && renderStimuliRow(false)}\n        {stimuli?.pos > 1 && renderStimuliRow(true, stimuli, 2, 3)}\n      </Grid>\n    )\n  }\n\n  const renderFeedback = () => {\n    return (\n      <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        {state.correct && <Correct fontSize='large' className='correct ts-icon' />}\n        {!state.correct && <Incorrect fontSize='large' className='incorrect ts-icon' />}\n      </Grid>\n    )\n\n  }\n\n  const renderFixation = () => {\n    return (\n      <Grid item container direction=\"row\" justifyContent=\"space-around\" alignItems=\"center\">\n        <Add fontSize='large' className='fixation ts-icon' />\n      </Grid>\n    );\n  }\n\n  // show reset screen on timeouts reaching a threshold\n  if (state.step === 'reset') {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('taskswitch.too_many_timeouts')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' color='secondary' onClick={() => startTask()}>{t('taskswitch.restart')}</Button>\n        </Grid>\n      </Grid>\n\n    )\n  }\n\n  // start screen\n  if (state.trial === null) {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('taskswitch.are_you_ready')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' onClick={() => startTask()}>{t('taskswitch.start')}</Button>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  return (\n    <Grid item container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='ts-container'>\n      <Grid item>\n        <Markdown source={t(text)} escapeHtml={false} className='markdown-text' />\n      </Grid>\n\n      {state.step === 'stimuli' && renderStimuli(state.stimuli[state.trial - 1])}\n      {state.step === 'feedback' && renderFeedback()}\n      {state.step === 'fixation' && renderFixation()}\n\n    </Grid>\n  );\n}\n","import React, { useEffect, useState, Fragment } from 'react';\nimport { Box, Button, Grid, Typography } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport Markdown from 'react-markdown/with-html';\nimport { \n  Star, \n  RadioButtonUnchecked as Circle,\n  CheckBoxOutlineBlank as Rectangle,\n  ChangeHistory as Triangle,\n  PanTool as Hand,\n  SportsSoccer as Ball,\n  Watch,\n  School,\n  FreeBreakfast as Cup,\n  Block,\n  Check as Correct,\n  Clear as Incorrect,\n  Add\n} from '@material-ui/icons';\nimport { shuffle } from './utils/random';\n\n//css\nimport \"./nback.css\";\n\n//FIXME these are realtime variables, so I keep them out of the component's state.\nlet clock\n\nexport default function NBack({content, onStore, onNotification, onProgress}) {\n  //props: title, text  \n  \n  const { t } = useTranslation();\n  \n  const { text, trials, stimuliDuration, fixationDuration, feedbackDuration, nback, stimuli } = content;\n  \n  const _noresponse = 'noresponse';\n\n  const iconFigures = {\n    star: Star,\n    circle: Circle,\n    triangle: Triangle,\n    rectangle: Rectangle,\n    hand: Hand,\n    ball: Ball,\n    watch: Watch,\n    school: School,\n    cup: Cup\n  };\n\n  const [state, setState] = useState({\n    finished: false,\n    trial: null,\n    step: null,\n    trialResponses: [],\n    taskStartedAt: null,\n    taskFinishedAt: null,\n    taskDuration: null,\n    trialStartedAt: null,\n    respondedAt: null,\n    stimuli: null\n  });\n\n  useEffect(() => {\n    /**\n     * callback to handle keypress events\n     */\n    const handleKeyPress = (event) => {\n      const { key, keyCode } = event;\n\n      // press space to start the task\n      if (state.trial === null && (keyCode===32 || key===' ')) {\n        startTask()\n        return;\n      }\n\n      // ignore invalid keys and invalid trial steps\n      if (state.step !== 'stimuli' || !(keyCode === 32 || key === ' '))\n        return;\n\n      const current = state.stimuli[state.trial - 1];\n      handleResponse(current);\n    }\n    window.addEventListener('keydown', handleKeyPress);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n\n  },[state]);\n\n  useEffect(() => {\n    // console.log(\"use effect for generating stimuli: \", state.stimuli);\n    // generate stimuli stream\n    if (state.stimuli===null) {\n      let figureIndex = 0;\n      let figureTotal =0;\n      let stim = [...Array(trials).keys()].map((i,t) => {\n        let figure = stimuli[figureIndex];\n        if(figureTotal<figure.amount){\n          figureTotal++;\n          return {\"type\": figure.type, \"name\": figure.name};\n        }else{\n          figureIndex++;\n          figureTotal = 1;\n          if(figureIndex>=stimuli.length){\n            console.log('error in figure numbers and total trials, reseting figures. Index: %d , length: %d', figureIndex, stimuli?.length);\n            figureIndex = 0;\n          }\n          figure = stimuli[figureIndex];\n          return {\"type\": figure.type, \"name\": figure.name};\n        }\n      });\n      setState({...state, stimuli: shuffle(stim)});\n    }\n\n    // check if it is finished\n    if (state.trial > trials) {\n      console.log('------------ FINISHED -------')\n      onProgress(100.0)\n      setState({ ...state, finished: true, taskFinishedAt: Date.now() })\n    }\n\n    // # FIXATION\n    if (state.step === 'fixation') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        setState({\n          ...state,\n          trial: state.trial + 1,\n          trialStartedAt: Date.now(),\n          step: 'stimuli'\n        });\n      }, fixationDuration);\n    }\n    \n    // # FEEDBACK\n    if (state.step === 'feedback') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        setState({ ...state, step: 'fixation' })\n      }, feedbackDuration)\n    }\n\n    // # STIMULI\n    if (state.step === 'stimuli') {\n      clearTimeout(clock); \n      clock = setTimeout(() => {\n        const respondedAt = Date.now(); //timestamp\n        //console.log(\"trial: %d  - stimulus: %o\",state.trial,state.stimuli[state.trial-1]);\n        const _correct = state.trial>nback ? state.stimuli[state.trial - 1]?.name!==state.stimuli[state.trial - (nback+1)]?.name : true ;\n        setState({\n          ...state,\n          correct: _correct,\n          respondedAt: respondedAt,\n          trialResponses: [...state.trialResponses, {\n            'trial': state.trial,\n            'stimuli': state.stimuli[state.trial - 1],\n            'choice': _noresponse,\n            'correct': _correct,\n            'respondedAt': respondedAt,\n            'trialStartedAt': state.trialStartedAt,\n            'rt': null\n          }],\n          step: (feedbackDuration > 0) ? 'feedback' : 'fixation'\n        });\n      }, stimuliDuration)\n    }\n\n    // Set progress\n    onProgress(100.0 * state.trial / trials)\n\n    // on finish\n    if (state.finished) {\n      clearTimeout(clock);\n\n      // timestamps\n      let response = { trials: state.trialResponses };\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = state.taskFinishedAt;\n      response.taskDuration = state.taskFinishedAt - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n\n  }, [state] );\n\n  /**\n   * Starts the task\n   */\n  const startTask = () => {\n    setState({\n      ...state,\n      trialResponses: [],\n      trial: 0,\n      step: 'fixation',\n      taskStartedAt: Date.now()\n    })\n    console.log('task started. stimuli: %o', state.stimuli);\n  }\n\n  /**\n   * handles user response\n   * @param {*} selected \n   */\n  const handleResponse = (selected) => {\n    if(state.trial<=nback){\n      return onNotification(t('nback.invalid.selection.notification'));\n    }\n\n    const respondedAt = Date.now(); //timestamp\n    clearTimeout(clock);\n\n    //console.log(\"trial: %d  - stimulus: %o  -  selected: %o\",state.trial,state.stimuli[state.trial-1],selected);\n    //if(state.trial>nback)\n    // console.log(\"stimulus1 : %o  -  stimulus2 : %o  -  comp result: %s\",state.stimuli[state.trial - 1],state.stimuli[state.trial - (nback+1)],state.stimuli[state.trial - 1].name!==state.stimuli[state.trial - (nback+1)].name);\n\n    const _correct = state.trial>nback ? state.stimuli[state.trial - 1]?.name===state.stimuli[state.trial - (nback+1)]?.name : false ;\n\n    setState({\n      ...state,\n      correct: _correct,\n      respondedAt: respondedAt,\n      trialResponses: [...state.trialResponses, {\n        'trial': state.trial,\n        'stimuli': state.stimuli[state.trial - 1],\n        'choice': selected,\n        'correct': _correct,\n        'respondedAt': respondedAt,\n        'trialStartedAt': state.trialStartedAt,\n        'rt': respondedAt - state.trialStartedAt\n      }],\n      step: (feedbackDuration > 0) ? 'feedback' : 'fixation'\n    });\n    //console.log('handle resp: %o , after setState', selected);\n  }\n\n  /**\n   * Renders the given stimulus, if type is icon it uses iconFigures to render, and if type is letter it uses Typography element\n   * @param {*} stimulus \n   * @returns html element of the stimuli\n   */\n  const renderStimulus = (stimulus) => {\n    console.log('renderFigure: ',stimulus);\n    if(stimulus===null || stimulus===undefined){\n      console.log('figure is null, state:',state);\n      return(\n        <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        </Grid>\n      )\n    }\n    if(stimulus.type===\"icon\"){\n      if(!iconFigures[stimulus.name]){\n        return(\n          <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n            <Fragment>\n              <Box onClick={() => handleResponse(stimulus)} className='single-stimulus single-stimulus-icon'>\n                <Block fontSize='large' className='yellow single-stimulus-icon' />\n              </Box>\n            </Fragment>\n          </Grid>\n        );\n      }\n      const FigureCompoentnt = iconFigures[stimulus.name];\n      return(\n        <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n          <Box onClick={() => handleResponse(stimulus)} className='single-stimulus single-stimulus-icon'>\n            <FigureCompoentnt fontSize='large' className='yellow single-stimulus-icon' />\n          </Box>\n        </Grid>\n      );\n    }else if(stimulus.type===\"letter\"){\n      return(\n        <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n          <Box onClick={() => handleResponse(stimulus)} className='single-stimulus single-stimulus-letter' textAlign=\"center\">\n            <Typography type='span' className='yellow single-stimuli-letter'> {stimulus.name} </Typography>\n          </Box>\n        </Grid>\n      );\n    }\n  }\n\n  /**\n   * Renders feedback\n   */\n  const renderFeedback = () => {\n    return (\n      <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        {state.correct && <Correct fontSize='large' className='correct single-stimulus-icon' />}\n        {!state.correct && <Incorrect fontSize='large' className='incorrect single-stimulus-icon' />}\n      </Grid>\n    )\n  }\n\n  /**\n   * Renders fixation element\n   */\n  const renderFixation = () => {\n    return (\n      <Grid item container direction=\"row\" justifyContent=\"space-around\" alignItems=\"center\">\n        <Add fontSize='large' className='stimulus-fixation single-stimulus-icon' />\n      </Grid>\n    );\n  }\n\n  // start screen\n  if (state.trial === null) {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('nback.are_you_ready')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' onClick={() => startTask()}>{t('nback.start')}</Button>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  return (\n    <Grid container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='nback-container'>\n      <Grid item>\n        <Markdown source={t(text)} escapeHtml={false} className='markdown-text' />\n      </Grid>\n      <Grid item container direction='row' justifyContent='center' alignItems='center' className='nback-main-container'>\n        {state.step === 'stimuli'  && renderStimulus(state.stimuli[state.trial-1])}\n        {state.step === 'feedback' && state.trial>nback && renderFeedback()}\n        {state.step === 'fixation' && renderFixation()}\n      </Grid>\n    </Grid>\n  );\n}\n","import React, {useState, useEffect, useCallback, Fragment, useRef} from 'react';\n\n\nimport { Button, Grid, Typography, Divider, Box} from '@material-ui/core';\n\nimport { \n  Star, \n  RadioButtonUnchecked as Circle,\n  CheckBoxOutlineBlank as Rectangle,\n  ChangeHistory as Triangle,\n  PanTool as Hand,\n  SportsSoccer as Ball,\n  Watch,\n  School,\n  FreeBreakfast as Cup,\n  Add,\n  Block,\n  Check as Correct,\n  Clear as Incorrect\n} from '@material-ui/icons';\n\nimport Markdown from 'react-markdown/with-html';\n\nimport { sample, shuffle } from './utils/random';\nimport { useTranslation } from 'react-i18next';\n\nimport './gonogoalt.css';\n\n//FIXME these are realtime variables, so I keep them out of the component's state.\nlet clock\n\nexport default function GoNoGoAlt({content, onStore, onProgress, onNotification}) {\n\n  const { t } = useTranslation();\n  const { text, trials, stimuliDuration, fixationDuration, feedbackDuration, choices } = content;\n  const _noresponse = 'noresponse';\n\n  const iconFigures = {\n    star: Star,\n    circle: Circle,\n    triangle: Triangle,\n    rectangle: Rectangle,\n    hand: Hand,\n    ball: Ball,\n    watch: Watch,\n    school: School,\n    cup: Cup\n  }\n\n  const [state, setState] = useState({\n    finished: false,\n    trial: null,\n    step: null,\n    trialResponses: [],\n    taskStartedAt: null,\n    taskFinishedAt: null,\n    taskDuration: null,\n    trialStartedAt: null,\n    respondedAt: null,\n    stimuli: null,\n    correct: null\n  })\n\n  useEffect(() => {\n    /**\n     * callback to handle keypress events\n     */\n    const handleKeyPress = (event) => {\n      const { key, keyCode } = event;\n\n      // press space to start the task\n      if (state.trial === null && (keyCode===32 || key===' ')) {\n        startTask()\n        return;\n      }\n\n      // ignore invalid keys and invalid trial steps\n      if (state.step !== 'stimuli' || !(keyCode === 32 || key === ' '))\n        return;\n\n      const current = state.stimuli[state.trial - 1];\n      handleResponse(current);\n    }\n    window.addEventListener('keydown', handleKeyPress);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n\n  },[state]);\n\n\n  useEffect(() => {\n\n    // generate stimuli stream\n    if (state.stimuli===null) {\n      console.log(trials);\n      let stim = [...Array(trials.total).keys()].map((i,t) => {\n        if (i<trials.go)\n          return {\"trialType\": \"go\", \"type\": choices.go.type, \"name\":sample(choices.go.names)}\n        else\n          return {\"trialType\": \"nogo\", \"type\": choices.nogo.type, \"name\":sample(choices.nogo.names)}\n      }) \n      setState({...state, stimuli: shuffle(stim)});\n    }\n\n    // # FIXATION\n    if (state.step === 'fixation') {\n      clearTimeout(clock);  \n      clock = setTimeout(() => {\n          setState({\n            ...state, \n            trial: state.trial+1, \n            trialStartedAt: Date.now(), \n            step: 'stimuli'\n          });\n        }, fixationDuration);\n    }\n\n    // # FEEDBACK\n    if (state.step === 'feedback') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n          setState({...state, step: 'fixation'})\n        }, feedbackDuration)\n    }\n\n    // # STIMULI\n    if (state.step === 'stimuli') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        const respondedAt = Date.now(); //timestamp\n        console.log('stimuli step timeout. stimuli: %o', state.stimuli[state.trial-1]);\n        const _correct =  state.stimuli[state.trial-1]?.trialType?.endsWith('nogo');\n        setState({\n          ...state,\n          correct: _correct,\n          respondedAt: respondedAt,\n          trialResponses: [...state.trialResponses, {\n            'trial': state.trial,\n            'stimuli': state.stimuli[state.trial-1],\n            'choice': _noresponse,\n            'correct': _correct,\n            'respondedAt': respondedAt,\n            'trialStartedAt': state.trialStartedAt,\n            'rt': null\n          }],\n          step: (feedbackDuration>0)?'feedback':'fixation'\n        });\n      }, stimuliDuration)\n    }\n\n    // Set progress\n    onProgress(100.0 * state.trial / trials.total)\n  \n    // check if task is finished\n    if (state.trial>trials.total) {\n      console.log('------------ FINISHED -------')\n      onProgress(100.0)\n      setState({...state, finished: true, taskFinishedAt: Date.now()})\n    }\n\n    // on finish\n    if (state.finished) {\n      clearTimeout(clock);\n      \n      // timestamps\n      let response = {trials: state.trialResponses};\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = state.taskFinishedAt;\n      response.taskDuration = state.taskFinishedAt - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n\n  },[state]);\n\n  const startTask = () => {\n    setState({\n      ...state, \n      trialResponses: [], \n      trial: 0, \n      step: 'fixation', \n      taskStartedAt: Date.now()\n    })\n    console.log('task started. stimuli: %o', state.stimuli)\n  }\n\n  /**\n   * handles user response\n   * @param {*} selected \n   */\n  const handleResponse = (selected) => {\n    const respondedAt = Date.now(); //timestamp\n    clearTimeout(clock);\n\n    const _correct = !state.stimuli[state.trial-1]?.trialType?.endsWith('nogo')\n\n    setState({\n      ...state,\n      correct: _correct,\n      respondedAt: respondedAt,\n      trialResponses: [...state.trialResponses, {\n        'trial': state.trial,\n        'stimuli': state.stimuli[state.trial-1],\n        'choice': selected,\n        'correct': _correct,\n        'respondedAt': respondedAt,\n        'trialStartedAt': state.trialStartedAt,\n        'rt': respondedAt - state.trialStartedAt\n      }],\n      step: (feedbackDuration>0)?'feedback':'fixation'\n    })\n  }\n\n  /**\n   * Renders the given stimulus. If type is icon it uses iconFigures to render, and if type is letter it uses Typography element\n   * @param {*} stimulus \n   * @returns html element of the stimuli\n   */\n  const renderStimulus = (stimulus) => {\n    console.log('renderStimulus: ',stimulus);\n    if(stimulus===null || stimulus===undefined){\n      console.log('figure is null, state:',state);\n      return(\n        <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        </Grid>\n      )\n    }\n    if(stimulus.type===\"icon\"){\n      if(!iconFigures[stimulus.name]){\n        return(\n          <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n            <Fragment>\n              <Box onClick={() => handleResponse(stimulus)} className='single-stimulus single-stimulus-icon'>\n                <Block fontSize='large' className='yellow single-stimulus-icon' />\n              </Box>\n            </Fragment>\n          </Grid>\n        );\n      }\n      const FigureCompoentnt = iconFigures[stimulus.name];\n      return(\n        <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n          <Box onClick={() => handleResponse(stimulus)} className='single-stimulus single-stimulus-icon'>\n            <FigureCompoentnt fontSize='large' className='yellow single-stimulus-icon' />\n          </Box>\n        </Grid>\n      );\n    }else if(stimulus.type===\"letter\"){\n      return(\n        <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n          <Box onClick={() => handleResponse(stimulus)} className='single-stimulus single-stimulus-letter' textAlign=\"center\">\n            <Typography type='span' className='yellow single-stimuli-letter'> {stimulus.name} </Typography>\n          </Box>\n        </Grid>\n      );\n    }\n  }\n\n  /**\n   * Renders feedback\n   */\n  const renderFeedback = () => {\n    return (\n      <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        {state.correct && <Correct fontSize='large' className='correct single-stimulus-icon' />}\n        {!state.correct && <Incorrect fontSize='large' className='incorrect single-stimulus-icon' />}\n      </Grid>\n    )\n  }\n\n  /**\n   * Renders fixation element\n   */\n  const renderFixation = () => {\n    return (\n      <Grid item container direction=\"row\" justifyContent=\"space-around\" alignItems=\"center\">\n        <Add fontSize='large' className='single-stimulus-fixation single-stimulus-icon' />\n      </Grid>\n    );\n  }\n\n  // start screen\n  if (state.trial === null) {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('gonogoalt.are_you_ready')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' onClick={() => startTask()}>{t('gonogoalt.start')}</Button>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  return (\n    <Grid item container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='gonogoalt-container'>\n      <Grid item>\n        <Markdown source={t(text)} escapeHtml={false} className='markdown-text' />\n      </Grid>\n      <Grid item container direction='row' justifyContent='center' alignItems='center' className='nback-main-container'>\n        {state.step === 'stimuli'  && renderStimulus(state.stimuli[state.trial-1])}\n        {state.step === 'feedback' && renderFeedback()}\n        {state.step === 'fixation' && renderFixation()}\n      </Grid>\n    </Grid>\n  );\n\n}\n","import React, {useRef, useState, useEffect} from 'react';\n\nimport {useParams,useLocation} from 'react-router-dom';\n\nimport {Container, ThemeProvider, CssBaseline, LinearProgress, Grid, Paper, Snackbar} from '@material-ui/core';\nimport {Alert} from '@material-ui/lab';\n\nimport {ltrTheme, rtlTheme} from './utils/theme';\nimport {languages} from './utils/i18n';\n\nimport Navigation from './navigation';\nimport Text from './text';\nimport Prolific from './prolific'\nimport Matrix from './matrix';\nimport Submission from './submission';\nimport BART from './bart';\nimport GoNoGo from './gonogo';\nimport Stroop from './stroop';\nimport Ultimatum from './ultimatum';\nimport Dictator from './dictator';\nimport { useTranslation } from 'react-i18next';\nimport TaskSwitch from './taskswitch';\nimport SimplifiedTaskSwitch from './simplified_taskswitch';\nimport NBack from './nback';\nimport GoNoGoAlt from './gonogoalt';\nimport ReactGA from \"react-ga4\";\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nexport default function Study(props) {\n\n  ReactGA.initialize(\"G-YFD0H08757\");\n  const {t, i18n} = useTranslation();\n  let {lang, studyId} = useParams();\n\n  // prolific shits\n  let query = useQuery();\n\n  const theme = (languages[lang].direction === 'rtl')?rtlTheme:ltrTheme;\n  const responseIsValid = useRef(false);\n\n  const [state, setState] = useState({\n    subject: undefined,\n    session: undefined,\n    progress: 0,\n    finished: false,\n    loading: false,\n    view: {},\n    currentViewIndex: 0,\n    responses: [],\n    experiment: {}\n  })\n\n  const [notification, setNotification] = useState(undefined);\n\n  const storeData = (data, autoNext=false) => {\n    console.log('study.storeData', data);\n\n    if (autoNext) {\n      onNext();\n    }\n    \n    setState(prev => {\n      return {\n        ...prev,\n        responses: [...prev.responses, data],\n        loading: false\n      }\n    });\n  }\n\n  const updateViewProgress = (currentViewProgressPct) => {\n\n    const currentViewProgress = currentViewProgressPct  / 100.0\n\n    setState(prev => {\n      return {\n        ...prev,\n        progress: 100 * (prev.currentViewIndex + currentViewProgress) / \n                  prev.experiment.views.length\n                  \n      }\n    });\n  }\n\n  const onNext = () => {\n\n    if ((state.view.required || state.view.requiredQuestions?.length>0) && !responseIsValid.current) {\n      setNotification(t('errors.required'))\n      return;\n    }\n\n    responseIsValid.current = false;\n\n    setState(prev => {\n      const nextViewIndex = prev.currentViewIndex + 1;\n\n      if (nextViewIndex < prev.experiment.views.length) {  \n        return {\n          ...prev,\n          loading: true,\n          progress: 100 * nextViewIndex / prev.experiment.views.length,\n          view: prev.experiment.views[nextViewIndex],\n          currentViewIndex: nextViewIndex\n        }\n      } else { //finished\n        return {\n          ...prev,\n          progress: 100,\n          finished: true,\n          loading: false\n        }\n      }\n    })\n\n  }\n  \n  const renderView = (view) => {\n    \n    if (state.finished) {\n      return (\n        <Submission submission={{\n          PROLIFIC_PID: query.get('PROLIFIC_PID'),\n          STUDY_ID: query.get('STUDY_ID'),\n          SESSION_ID: query.get('SESSION_ID'),\n          startedAt: state.startedAt,\n          responses: state.responses}}\n          studyId={studyId} submissionNote={state.experiment.submissionNote} />\n      );\n    }\n\n    switch(view?.type) {\n      case 'text':\n        return <Text onStore={storeData} content={view} key={view.id} onValidate={(r) => responseIsValid.current = r} />;\n      case 'prolific':\n        return <Prolific onStore={storeData} content={view} key={view.id} onValidate={(r) => responseIsValid.current = r} />;\n      case 'bart':\n        return <BART onStore={storeData} content={view} key={view.id} />;\n      case 'gonogo': \n        return <GoNoGo onStore={storeData} onProgress={updateViewProgress} content={view} key={view.id} />;\n      case 'stroop': \n        return <Stroop onStore={storeData} content={view} key={view.id} />;\n      case 'matrix':\n        return <Matrix onStore={storeData} content={view} key={view.id} onValidate={(r) => responseIsValid.current = r} />\n      case 'ultimatum':\n        return <Ultimatum onStore={storeData} content={view} key={view.id} onNotification={setNotification} />;\n      case 'dictator':\n        return <Dictator onStore={storeData} content={view} key={view.id} onNotification={setNotification} />;\n      case 'taskswitch':\n        return <TaskSwitch onStore={storeData} onProgress={updateViewProgress} content={view} key={view.id} onNotification={setNotification} />;\n      case 'simplified_taskswitch':\n        return <SimplifiedTaskSwitch onStore={storeData} onProgress={updateViewProgress} content={view} key={view.id} onNotification={setNotification} />;\n      case 'nback':\n        return <NBack onStore={storeData} onProgress={updateViewProgress} content={view} key={view.id} onNotification={setNotification} />;\n      case 'gonogoalt':\n        return <GoNoGoAlt onStore={storeData} onProgress={updateViewProgress} content={view} key={view.id} onNotification={setNotification} />;\n      default:\n        return <div>Not Implemented!</div>;\n    }\n\n  }\n  \n  const startExperiment = (experiment) => {\n    console.log(\"starting experiment\", experiment);\n    console.log(\"prolific pid : \",query.get('PROLIFIC_PID'))\n    setState(prev => {\n      return {\n        ...prev,\n        startedAt: Date.now(),\n        experiment: experiment,\n        currentViewIndex: 0,\n        view: experiment.views[0]\n      }\n    });\n\n    if (process.env.NODE_ENV === 'production') {\n      ReactGA.send({ hitType: \"pageview\", page: window.location.pathname , title: \"window?.title\" });\n    }\n\n  }\n\n  //load experiment\n  useEffect(() => {\n    i18n.changeLanguage(lang);\n    fetch(process.env.PUBLIC_URL + `/experiments/${studyId}.json`)\n      .then(resp => resp.json())\n      .then(experiment => startExperiment(experiment));\n  },[studyId]);\n\n  //render\n  return (\n\n    <ThemeProvider theme={theme}>\n      <div dir={languages[lang].direction}>\n        <CssBaseline />\n\n        <LinearProgress variant=\"determinate\" value={state.progress} />\n\n        <Container maxWidth=\"sm\" className='study-container'>\n          <Grid container\n            spacing={2}\n            direction=\"column\"\n            justifyContent=\"flex-start\"\n            alignItems=\"stretch\"\n            className='study-grid-container'\n          >\n            <Snackbar \n              open={notification !== undefined} \n              autoHideDuration={5000} \n              onClose={() => setNotification(undefined)}\n            >\n              <Alert onClose={() => setNotification(undefined)} severity=\"error\">{t(notification)}</Alert>\n            </Snackbar>\n\n            <Grid item>\n              <Paper className='view-container'>\n              {!state.finished && state.loading && <div>{t('loading')}</div>}\n              {!state.loading && renderView(state.view)}\n              </Paper>\n            </Grid>\n            {!['gonogo','bart','stroop','ultimatum','dictator','taskswitch','simplified_taskswitch','nback','gonogoalt'].includes(state.view.type) && !state.loading &&\n            <Grid item>\n              <Navigation onNext={onNext} finished={state.finished} redirectTo={state.experiment.redirectTo} />\n            </Grid>\n            }\n          </Grid>\n        </Container>\n      </div>\n    </ThemeProvider>\n  );\n}\n","import React from 'react';\n\nexport default function About() {\n  return (\n    <div className=\"about\">\n      Hello!\n    </div>\n  );\n}\n","import React from 'react';\n\nimport {useParams, Link} from 'react-router-dom';\nimport {useTranslation} from 'react-i18next';\n\nimport {ltrTheme} from './utils/theme';\n\nimport {Grid, Paper, Button, ThemeProvider, CssBaseline, Container} from '@material-ui/core';\n\nimport Markdown from 'react-markdown/with-html';\n\nimport {languages} from './utils/i18n';\n\nimport './index.css'\n\nexport default function LanguageSelector(props) {\n\n  const { t } = useTranslation();\n  let {studyId} = useParams();\n\n\n  return (\n    <ThemeProvider theme={ltrTheme}>\n      <CssBaseline />\n\n      <Container maxWidth=\"sm\" className='study-container'>\n        <Grid item container\n          spacing={2}\n          direction=\"column\"\n          justifyContent=\"flex-start\"\n          alignItems=\"stretch\"\n        >\n          <Paper className='languages-container'>\n\n          <Markdown source={t('language_selector.text')} escapeHtml={false}  className='markdown-text' />\n          <Grid container direction='row' spacing={3} justifyContent='space-around'>\n          {Object.entries(languages).map(([key, val]) => \n            <Grid item key={key} xs={4}>\n              <Button component={Link} to={`/${studyId}/${key}`} fullWidth variant='outlined'>{val.title}</Button>\n            </Grid>\n          )}\n          </Grid>\n          </Paper>\n        </Grid>\n      </Container>\n    </ThemeProvider>\n  );\n}\n","import React, { useEffect } from 'react';\nimport ReactGA from 'react-ga4';\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\n//main components\nimport Study from './study';\nimport About from './about';\nimport LanguageSelector from './language_selector';\n\nexport default function AppRouter() {\n  useEffect(() => {\n    // Send pageview with a custom path\n    ReactGA.send({ hitType: \"pageview\", page: window.location.pathname });\n  }, [window.location.pathname]);\n\n  return (\n    <Router basename=\"/\">\n        <Switch>\n          <Route exact path=\"/\"><About /></Route>\n          <Route path=\"/:studyId/:lang\"><Study /></Route>\n          <Route path=\"/:studyId\"><LanguageSelector /></Route>\n          <Route path=\"/about\"><About /></Route>\n        </Switch>\n    </Router>\n  );\n}\n","import React, {Suspense} from 'react';\nimport ReactDOM from 'react-dom';\nimport i18n from './utils/i18n';\nimport AppRouter from './router';\nimport {I18nextProvider} from 'react-i18next';\nimport ReactGA from 'react-ga4';\n\n//css\nimport './index.css';\n\n// Initialize google analytics\nReactGA.initialize('G-YFD0H08757');\n\nReactDOM.render(\n\n  <Suspense fallback=\"loading\">\n  <I18nextProvider i18n={i18n}>\n    <AppRouter />\n  </I18nextProvider>\n  </Suspense>\n  , document.getElementById('root'));\n"],"sourceRoot":""}