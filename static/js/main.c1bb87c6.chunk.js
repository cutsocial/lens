(this.webpackJsonplens=this.webpackJsonplens||[]).push([[0],{131:function(e,t,a){},136:function(e,t,a){},275:function(e,t,a){},276:function(e,t,a){},284:function(e,t,a){},285:function(e,t,a){},286:function(e,t,a){},287:function(e,t,a){},288:function(e,t,a){},289:function(e,t,a){},290:function(e,t,a){},291:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(17),i=a.n(o),s=a(104),l=a(56),c=a(137);const r={en:{title:"English",direction:"ltr"},fa:{title:"\u0641\u0627\u0631\u0633\u06cc",direction:"rtl"},ar:{title:"\u0639\u0631\u0628\u06cc",direction:"rtl"}};s.a.use(c.a).use(l.e).init({lng:"en",fallbackLng:"en",debug:!1,keySeparator:!1,backend:{loadPath:"/locales/{{lng}}.json"}});var d=s.a,u=a(46),b=a.n(u),m=a(54),j=a(22),p=a(3),h=a(361),g=a(362),O=a(363),x=a(352),f=a(328),y=a(374),v=a(332),S=a(371),k=a(147),w=a(376);const A=Object(k.a)({palette:{type:"dark",primary:{main:"#039be5"},secondary:{main:"#f06292"}},typography:{fontFamily:["Vazir","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),N=Object(k.a)({direction:"rtl",palette:{type:"dark",primary:{main:"#039be5"},secondary:{main:"#f06292"}},typography:{fontFamily:["Vazir","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),C=Object(w.a)(A),I=Object(w.a)(N);var T=a(331),R=a(375),D=a(1);function M(e){let{finished:t,redirectTo:a,onNext:n}=e;const{t:o}=Object(R.a)();return Object(D.jsx)(f.a,{container:!0,direction:"row",justifyContent:"flex-end",children:Object(D.jsxs)(f.a,{item:!0,children:[!t&&Object(D.jsx)(T.a,{variant:"contained",color:"primary",onClick:n,children:o("next")}),t&&a&&Object(D.jsx)(T.a,{variant:"contained",color:"primary",href:a,children:o("finish_and_redirect")})]})})}var E=a(365),F=a(369),P=a(15),_=a.n(P);var L=[{code:"AD",label:"Andorra",phone:"376"},{code:"AE",label:"United Arab Emirates",phone:"971"},{code:"AF",label:"Afghanistan",phone:"93"},{code:"AG",label:"Antigua and Barbuda",phone:"1-268"},{code:"AI",label:"Anguilla",phone:"1-264"},{code:"AL",label:"Albania",phone:"355"},{code:"AM",label:"Armenia",phone:"374"},{code:"AO",label:"Angola",phone:"244"},{code:"AQ",label:"Antarctica",phone:"672"},{code:"AR",label:"Argentina",phone:"54"},{code:"AS",label:"American Samoa",phone:"1-684"},{code:"AT",label:"Austria",phone:"43"},{code:"AU",label:"Australia",phone:"61",suggested:!0},{code:"AW",label:"Aruba",phone:"297"},{code:"AX",label:"Alland Islands",phone:"358"},{code:"AZ",label:"Azerbaijan",phone:"994"},{code:"BA",label:"Bosnia and Herzegovina",phone:"387"},{code:"BB",label:"Barbados",phone:"1-246"},{code:"BD",label:"Bangladesh",phone:"880"},{code:"BE",label:"Belgium",phone:"32"},{code:"BF",label:"Burkina Faso",phone:"226"},{code:"BG",label:"Bulgaria",phone:"359"},{code:"BH",label:"Bahrain",phone:"973"},{code:"BI",label:"Burundi",phone:"257"},{code:"BJ",label:"Benin",phone:"229"},{code:"BL",label:"Saint Barthelemy",phone:"590"},{code:"BM",label:"Bermuda",phone:"1-441"},{code:"BN",label:"Brunei Darussalam",phone:"673"},{code:"BO",label:"Bolivia",phone:"591"},{code:"BR",label:"Brazil",phone:"55"},{code:"BS",label:"Bahamas",phone:"1-242"},{code:"BT",label:"Bhutan",phone:"975"},{code:"BV",label:"Bouvet Island",phone:"47"},{code:"BW",label:"Botswana",phone:"267"},{code:"BY",label:"Belarus",phone:"375"},{code:"BZ",label:"Belize",phone:"501"},{code:"CA",label:"Canada",phone:"1",suggested:!0},{code:"CC",label:"Cocos (Keeling) Islands",phone:"61"},{code:"CD",label:"Congo, Democratic Republic of the",phone:"243"},{code:"CF",label:"Central African Republic",phone:"236"},{code:"CG",label:"Congo, Republic of the",phone:"242"},{code:"CH",label:"Switzerland",phone:"41"},{code:"CI",label:"Cote d'Ivoire",phone:"225"},{code:"CK",label:"Cook Islands",phone:"682"},{code:"CL",label:"Chile",phone:"56"},{code:"CM",label:"Cameroon",phone:"237"},{code:"CN",label:"China",phone:"86"},{code:"CO",label:"Colombia",phone:"57"},{code:"CR",label:"Costa Rica",phone:"506"},{code:"CU",label:"Cuba",phone:"53"},{code:"CV",label:"Cape Verde",phone:"238"},{code:"CW",label:"Curacao",phone:"599"},{code:"CX",label:"Christmas Island",phone:"61"},{code:"CY",label:"Cyprus",phone:"357"},{code:"CZ",label:"Czech Republic",phone:"420"},{code:"DE",label:"Germany",phone:"49",suggested:!0},{code:"DJ",label:"Djibouti",phone:"253"},{code:"DK",label:"Denmark",phone:"45"},{code:"DM",label:"Dominica",phone:"1-767"},{code:"DO",label:"Dominican Republic",phone:"1-809"},{code:"DZ",label:"Algeria",phone:"213"},{code:"EC",label:"Ecuador",phone:"593"},{code:"EE",label:"Estonia",phone:"372"},{code:"EG",label:"Egypt",phone:"20"},{code:"EH",label:"Western Sahara",phone:"212"},{code:"ER",label:"Eritrea",phone:"291"},{code:"ES",label:"Spain",phone:"34"},{code:"ET",label:"Ethiopia",phone:"251"},{code:"FI",label:"Finland",phone:"358"},{code:"FJ",label:"Fiji",phone:"679"},{code:"FK",label:"Falkland Islands (Malvinas)",phone:"500"},{code:"FM",label:"Micronesia, Federated States of",phone:"691"},{code:"FO",label:"Faroe Islands",phone:"298"},{code:"FR",label:"France",phone:"33",suggested:!0},{code:"GA",label:"Gabon",phone:"241"},{code:"GB",label:"United Kingdom",phone:"44"},{code:"GD",label:"Grenada",phone:"1-473"},{code:"GE",label:"Georgia",phone:"995"},{code:"GF",label:"French Guiana",phone:"594"},{code:"GG",label:"Guernsey",phone:"44"},{code:"GH",label:"Ghana",phone:"233"},{code:"GI",label:"Gibraltar",phone:"350"},{code:"GL",label:"Greenland",phone:"299"},{code:"GM",label:"Gambia",phone:"220"},{code:"GN",label:"Guinea",phone:"224"},{code:"GP",label:"Guadeloupe",phone:"590"},{code:"GQ",label:"Equatorial Guinea",phone:"240"},{code:"GR",label:"Greece",phone:"30"},{code:"GS",label:"South Georgia and the South Sandwich Islands",phone:"500"},{code:"GT",label:"Guatemala",phone:"502"},{code:"GU",label:"Guam",phone:"1-671"},{code:"GW",label:"Guinea-Bissau",phone:"245"},{code:"GY",label:"Guyana",phone:"592"},{code:"HK",label:"Hong Kong",phone:"852"},{code:"HM",label:"Heard Island and McDonald Islands",phone:"672"},{code:"HN",label:"Honduras",phone:"504"},{code:"HR",label:"Croatia",phone:"385"},{code:"HT",label:"Haiti",phone:"509"},{code:"HU",label:"Hungary",phone:"36"},{code:"ID",label:"Indonesia",phone:"62"},{code:"IE",label:"Ireland",phone:"353"},{code:"IL",label:"Israel",phone:"972"},{code:"IM",label:"Isle of Man",phone:"44"},{code:"IN",label:"India",phone:"91"},{code:"IO",label:"British Indian Ocean Territory",phone:"246"},{code:"IQ",label:"Iraq",phone:"964"},{code:"IR",label:"Iran, Islamic Republic of",phone:"98"},{code:"IS",label:"Iceland",phone:"354"},{code:"IT",label:"Italy",phone:"39"},{code:"JE",label:"Jersey",phone:"44"},{code:"JM",label:"Jamaica",phone:"1-876"},{code:"JO",label:"Jordan",phone:"962"},{code:"JP",label:"Japan",phone:"81",suggested:!0},{code:"KE",label:"Kenya",phone:"254"},{code:"KG",label:"Kyrgyzstan",phone:"996"},{code:"KH",label:"Cambodia",phone:"855"},{code:"KI",label:"Kiribati",phone:"686"},{code:"KM",label:"Comoros",phone:"269"},{code:"KN",label:"Saint Kitts and Nevis",phone:"1-869"},{code:"KP",label:"Korea, Democratic People's Republic of",phone:"850"},{code:"KR",label:"Korea, Republic of",phone:"82"},{code:"KW",label:"Kuwait",phone:"965"},{code:"KY",label:"Cayman Islands",phone:"1-345"},{code:"KZ",label:"Kazakhstan",phone:"7"},{code:"LA",label:"Lao People's Democratic Republic",phone:"856"},{code:"LB",label:"Lebanon",phone:"961"},{code:"LC",label:"Saint Lucia",phone:"1-758"},{code:"LI",label:"Liechtenstein",phone:"423"},{code:"LK",label:"Sri Lanka",phone:"94"},{code:"LR",label:"Liberia",phone:"231"},{code:"LS",label:"Lesotho",phone:"266"},{code:"LT",label:"Lithuania",phone:"370"},{code:"LU",label:"Luxembourg",phone:"352"},{code:"LV",label:"Latvia",phone:"371"},{code:"LY",label:"Libya",phone:"218"},{code:"MA",label:"Morocco",phone:"212"},{code:"MC",label:"Monaco",phone:"377"},{code:"MD",label:"Moldova, Republic of",phone:"373"},{code:"ME",label:"Montenegro",phone:"382"},{code:"MF",label:"Saint Martin (French part)",phone:"590"},{code:"MG",label:"Madagascar",phone:"261"},{code:"MH",label:"Marshall Islands",phone:"692"},{code:"MK",label:"Macedonia, the Former Yugoslav Republic of",phone:"389"},{code:"ML",label:"Mali",phone:"223"},{code:"MM",label:"Myanmar",phone:"95"},{code:"MN",label:"Mongolia",phone:"976"},{code:"MO",label:"Macao",phone:"853"},{code:"MP",label:"Northern Mariana Islands",phone:"1-670"},{code:"MQ",label:"Martinique",phone:"596"},{code:"MR",label:"Mauritania",phone:"222"},{code:"MS",label:"Montserrat",phone:"1-664"},{code:"MT",label:"Malta",phone:"356"},{code:"MU",label:"Mauritius",phone:"230"},{code:"MV",label:"Maldives",phone:"960"},{code:"MW",label:"Malawi",phone:"265"},{code:"MX",label:"Mexico",phone:"52"},{code:"MY",label:"Malaysia",phone:"60"},{code:"MZ",label:"Mozambique",phone:"258"},{code:"NA",label:"Namibia",phone:"264"},{code:"NC",label:"New Caledonia",phone:"687"},{code:"NE",label:"Niger",phone:"227"},{code:"NF",label:"Norfolk Island",phone:"672"},{code:"NG",label:"Nigeria",phone:"234"},{code:"NI",label:"Nicaragua",phone:"505"},{code:"NL",label:"Netherlands",phone:"31"},{code:"NO",label:"Norway",phone:"47"},{code:"NP",label:"Nepal",phone:"977"},{code:"NR",label:"Nauru",phone:"674"},{code:"NU",label:"Niue",phone:"683"},{code:"NZ",label:"New Zealand",phone:"64"},{code:"OM",label:"Oman",phone:"968"},{code:"PA",label:"Panama",phone:"507"},{code:"PE",label:"Peru",phone:"51"},{code:"PF",label:"French Polynesia",phone:"689"},{code:"PG",label:"Papua New Guinea",phone:"675"},{code:"PH",label:"Philippines",phone:"63"},{code:"PK",label:"Pakistan",phone:"92"},{code:"PL",label:"Poland",phone:"48"},{code:"PM",label:"Saint Pierre and Miquelon",phone:"508"},{code:"PN",label:"Pitcairn",phone:"870"},{code:"PR",label:"Puerto Rico",phone:"1"},{code:"PS",label:"Palestine, State of",phone:"970"},{code:"PT",label:"Portugal",phone:"351"},{code:"PW",label:"Palau",phone:"680"},{code:"PY",label:"Paraguay",phone:"595"},{code:"QA",label:"Qatar",phone:"974"},{code:"RE",label:"Reunion",phone:"262"},{code:"RO",label:"Romania",phone:"40"},{code:"RS",label:"Serbia",phone:"381"},{code:"RU",label:"Russian Federation",phone:"7"},{code:"RW",label:"Rwanda",phone:"250"},{code:"SA",label:"Saudi Arabia",phone:"966"},{code:"SB",label:"Solomon Islands",phone:"677"},{code:"SC",label:"Seychelles",phone:"248"},{code:"SD",label:"Sudan",phone:"249"},{code:"SE",label:"Sweden",phone:"46"},{code:"SG",label:"Singapore",phone:"65"},{code:"SH",label:"Saint Helena",phone:"290"},{code:"SI",label:"Slovenia",phone:"386"},{code:"SJ",label:"Svalbard and Jan Mayen",phone:"47"},{code:"SK",label:"Slovakia",phone:"421"},{code:"SL",label:"Sierra Leone",phone:"232"},{code:"SM",label:"San Marino",phone:"378"},{code:"SN",label:"Senegal",phone:"221"},{code:"SO",label:"Somalia",phone:"252"},{code:"SR",label:"Suriname",phone:"597"},{code:"SS",label:"South Sudan",phone:"211"},{code:"ST",label:"Sao Tome and Principe",phone:"239"},{code:"SV",label:"El Salvador",phone:"503"},{code:"SX",label:"Sint Maarten (Dutch part)",phone:"1-721"},{code:"SY",label:"Syrian Arab Republic",phone:"963"},{code:"SZ",label:"Swaziland",phone:"268"},{code:"TC",label:"Turks and Caicos Islands",phone:"1-649"},{code:"TD",label:"Chad",phone:"235"},{code:"TF",label:"French Southern Territories",phone:"262"},{code:"TG",label:"Togo",phone:"228"},{code:"TH",label:"Thailand",phone:"66"},{code:"TJ",label:"Tajikistan",phone:"992"},{code:"TK",label:"Tokelau",phone:"690"},{code:"TL",label:"Timor-Leste",phone:"670"},{code:"TM",label:"Turkmenistan",phone:"993"},{code:"TN",label:"Tunisia",phone:"216"},{code:"TO",label:"Tonga",phone:"676"},{code:"TR",label:"Turkey",phone:"90"},{code:"TT",label:"Trinidad and Tobago",phone:"1-868"},{code:"TV",label:"Tuvalu",phone:"688"},{code:"TW",label:"Taiwan, Province of China",phone:"886"},{code:"TZ",label:"United Republic of Tanzania",phone:"255"},{code:"UA",label:"Ukraine",phone:"380"},{code:"UG",label:"Uganda",phone:"256"},{code:"US",label:"United States",phone:"1",suggested:!0},{code:"UY",label:"Uruguay",phone:"598"},{code:"UZ",label:"Uzbekistan",phone:"998"},{code:"VA",label:"Holy See (Vatican City State)",phone:"379"},{code:"VC",label:"Saint Vincent and the Grenadines",phone:"1-784"},{code:"VE",label:"Venezuela",phone:"58"},{code:"VG",label:"British Virgin Islands",phone:"1-284"},{code:"VI",label:"US Virgin Islands",phone:"1-340"},{code:"VN",label:"Vietnam",phone:"84"},{code:"VU",label:"Vanuatu",phone:"678"},{code:"WF",label:"Wallis and Futuna",phone:"681"},{code:"WS",label:"Samoa",phone:"685"},{code:"XK",label:"Kosovo",phone:"383"},{code:"YE",label:"Yemen",phone:"967"},{code:"YT",label:"Mayotte",phone:"262"},{code:"ZA",label:"South Africa",phone:"27"},{code:"ZM",label:"Zambia",phone:"260"},{code:"ZW",label:"Zimbabwe",phone:"263"}];a(131);function z(e){let{content:t,onStore:a,onValidate:o}=e;const{t:i}=Object(R.a)(),s=Object(n.useRef)(null),[l,c]=Object(n.useState)({value:null});Object(n.useEffect)(()=>()=>{var e;a({view:t,response:(null===(e=s.current)||void 0===e?void 0:e.code)||s.current})},[]);const r=(e,t)=>{s.current=t,c(Object(p.a)(Object(p.a)({},l),{},{value:t}));const a=(null===t||void 0===t?void 0:t.code)||s.current;console.log(a),o(void 0!==a&&a.length>0)},d=()=>Object(D.jsx)(F.a,{id:"country-select",options:L,autoHighlight:!0,onChange:(e,t)=>r(0,t),value:l.value,getOptionLabel:e=>e.label,noOptionsText:i("text.no_options"),renderOption:e=>{return Object(D.jsxs)(n.Fragment,{children:[Object(D.jsx)("span",{children:(t=e.code,"undefined"!==typeof String.fromCodePoint?t.toUpperCase().replace(/./g,e=>String.fromCodePoint(e.charCodeAt(0)+127397)):t)})," ",e.label]});var t},renderInput:e=>Object(D.jsx)(E.a,Object(p.a)(Object(p.a)({},e),{},{label:i("text.choose_a_country"),variant:"outlined",inputProps:Object(p.a)(Object(p.a)({},e.inputProps),{},{autoComplete:"new-password"}),className:"country-select"}))});return Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"Text-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:i(t.text),escapeHtml:!1,className:"markdown-text"})}),!t.instruction&&Object(D.jsxs)(f.a,{item:!0,children:["countries"===t.autoComplete&&Object(D.jsx)(d,{}),!t.autoComplete&&Object(D.jsx)(E.a,{label:i(t.placeholder),variant:"filled",fullWidth:!0,onChange:e=>r(0,e.target.value)})]})]})}function G(e){var t;let{content:a,onStore:o,onValidate:i}=e;const{t:s}=Object(R.a)();let l=new URLSearchParams(Object(j.f)().search);const c=Object(n.useRef)(null),[r,d]=Object(n.useState)({value:null});Object(n.useEffect)(()=>()=>{var e;o({view:a,response:(null===(e=c.current)||void 0===e?void 0:e.code)||c.current})},[c]);var u,b=null;!0===(null===a||void 0===a?void 0:a.getUrlContent)?null!==(null===a||void 0===a?void 0:a.paramNameAsContent)&&(null===(u=a.paramNameAsContent)||void 0===u?void 0:u.length)>0&&(console.log(null===a||void 0===a?void 0:a.paramNameAsContent),b=l.get(a.paramNameAsContent),console.log(b)):null!==(null===a||void 0===a?void 0:a.content)&&(null===a||void 0===a||null===(t=a.content)||void 0===t?void 0:t.length)>0&&(b=a.content);if(!(null==r.value&&null!==b&&b.length>0))return Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"Text-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:s(a.text),escapeHtml:!1,className:"markdown-text"})}),!a.instruction&&Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(E.a,{label:s(a.placeholder),defaultValue:null!=b?b:void 0,variant:"filled",fullWidth:!0,onChange:e=>((e,t)=>{c.current=t,d(Object(p.a)(Object(p.a)({},r),{},{value:t}));const a=(null===t||void 0===t?void 0:t.code)||c.current;console.log(a),i(void 0!==a&&a.length>0)})(0,e.target.value)})})]});d({value:b})}var W=a(334),B=a(377),H=a(335),K=a(370),V=a(378),U=a(336);function J(e){const{children:t,open:a,value:n}=e;return Object(D.jsx)(W.a,{open:a,enterTouchDelay:0,placement:"top",title:n,arrow:!0,children:t})}function q(e){let{content:t,onStore:a,onValidate:o}=e;const{t:i}=Object(R.a)(),{questions:s,choices:l,direction:c,text:r,slider:d,showMidMark:u}=t,b=Object(n.useRef)({values:Array.from({length:s.length})});Object(n.useEffect)(()=>(t.requiredQuestions.length>0&&o(!1),window.scrollTo({top:0,behavior:"smooth"}),()=>{a({view:t,response:b.current})}),[]);const m=(e,t)=>Object(D.jsxs)(f.a,{item:!0,container:!0,xs:!0,className:"matrix-slider",children:[Object(D.jsx)(B.a,{defaultValue:b.current.values[t],value:b.current.values[t],valueLabelFormat:t=>i(e[t-1]),"aria-labelledby":"question"+t,ValueLabelComponent:J,onChangeCommitted:(e,a)=>j(e,t,a),step:1,min:1,max:e.length,valueLabelDisplay:"on"}),Object(D.jsxs)(f.a,{container:!0,direction:"row",alignItems:"stretch",justify:"space-between",children:[Object(D.jsx)(f.a,{item:!0,className:"mark",children:Object(D.jsx)("em",{children:i(e[0])})}),u&&Object(D.jsx)(f.a,{item:!0,className:"mark",children:Object(D.jsx)("em",{children:i(e[Math.floor(e.length/2)])})}),Object(D.jsx)(f.a,{item:!0,className:"mark",children:Object(D.jsx)("em",{children:i(e[e.length-1])})})]})]},t),j=(e,a,n)=>{b.current.values[a]=e.target.value||n,console.log(b.current.values[a]);const i=b.current.values.filter((e,a)=>t.requiredQuestions.includes(a)&&(null===e||void 0===e)).length;o(0===i)},p=(e,t)=>Object(D.jsxs)(f.a,{item:!0,className:"matrix-question-container",children:[Object(D.jsx)(_.a,{source:i(e),escapeHtml:!1,className:"markdown-text"}),d&&m(l,t),!d&&Object(D.jsx)(V.a,{name:"q".concat(t),value:b.current.values[t],onChange:e=>j(e,t),children:Object(D.jsx)(f.a,{container:!0,direction:"vertical"===c?"column":"row",alignItems:"flex-start",justify:"space-between",children:l.map((e,t)=>((e,t)=>Object(D.jsx)(f.a,{item:!0,xs:!0,children:Object(D.jsx)(H.a,{control:Object(D.jsx)(K.a,{}),value:e,label:i(e),labelPlacement:"vertical"===c?"end":"bottom"})},t))(e,t))})})]},t);return Object(D.jsxs)(f.a,{container:!0,direction:"column",alignItems:"stretch",justifyContent:"flex-start",className:"Text-container",children:[r&&Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:i(r),escapeHtml:!1,className:"markdown-text"})}),s.map((e,t)=>p(e,t)).reduce((e,t)=>[e,Object(D.jsx)(U.a,{className:"matrix-spacer"},Math.random().toString()),t])]})}function Y(e){let{submission:t,studyId:a,submissionNote:o}=e;const{t:i}=Object(R.a)(),s="https://server.cut.social/api/v1/".concat(a,"/responses"),[l,c]=Object(n.useState)({submissionCode:void 0,debug:!1});function r(e){var t;return!(!e||"prolific ID"!==(null===e||void 0===e||null===(t=e.view)||void 0===t?void 0:t.id))}return Object(n.useEffect)(()=>{if(void 0===l.submissionCode){const e=(()=>{let e=null;const a=t.responses.filter(r);return a.length>0&&(e=a[0].response),e})();b.a.event({category:"info",action:"submission_insert, pid : "+e,label:"info submission insert"}),fetch(s,{method:"post",mode:"cors",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>c(Object(p.a)(Object(p.a)({},l),{},{submissionCode:e.submissionCode}))).catch(a=>(b.a.event({category:"error",action:"submission_insert_error, pid : "+e+"  error:"+a+"  stringify:"+JSON.stringify(a),label:"info submission insert: "+JSON.stringify(t)}),console.error("Error:",a)))}},[l]),Object(D.jsxs)(f.a,{container:!0,direction:"column",className:"Text-container",children:[l.submissionCode&&Object(D.jsx)(f.a,{item:!0,xs:!0,className:"submission-container",children:Object(D.jsx)(_.a,{source:i(o,{submissionCode:l.submissionCode}),escapeHtml:!1,className:"markdown-text"})}),l.debug&&Object(D.jsx)(f.a,{item:!0,xs:!0,children:Object(D.jsx)("pre",{children:JSON.stringify(t,null,2)})})]})}var Z=a(106),Q=a(373),X=a(337),$=a(338),ee=a(339),te=a(340);a(275);function ae(e){let{content:t,onStore:a}=e;const{t:o}=Object(R.a)(),{reward:i,maxPumps:s,safePumps:l,trials:c}=t,[r,d]=Object(n.useState)({pumps:0,finished:!1,trial:1,totalScore:0,trialResponses:[],dialogIsOpen:!1,taskStartedAt:Date.now(),showTooltip:!0}),u=e=>{for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e};Object(n.useEffect)(()=>(r.randomNumbers=u(Array.from({length:s},(e,t)=>t+1)),document.body.style["touch-action"]="none",document.documentElement.style["touch-action"]="none",()=>{document.body.style["touch-action"]=null,document.documentElement.style["touch-action"]=null}),[]),Object(n.useEffect)(()=>{if(r.finished&&!r.dialogIsOpen){const e=Date.now();let n={trials:r.trialResponses};n.taskStartedAt=r.taskStartedAt,n.taskFinishedAt=e,n.taskDuration=e-r.taskStartedAt,a({view:t,response:n},!0)}},[r]);const b=(e,t)=>{d(Object(p.a)(Object(p.a)({},r),{},{dialogIsOpen:!0,trialResponses:[...r.trialResponses,{trial:r.trial,pumps:r.pumps,score:e?r.pumps*i:0,result:e?"cashed":"exploded"}],showTooltip:!0,finished:r.trial>=c,pumps:0,trial:r.trial+1,totalScore:r.totalScore+(e?r.pumps*i:0),randomNumbers:u(Array.from({length:s},(e,t)=>t+1))}))},m=(e,t)=>{let a=Math.sqrt(500*(e+1)/Math.PI);return console.log(a),Math.ceil(2*a)};return Object(D.jsxs)(n.Fragment,{children:[r.dialogIsOpen&&Object(D.jsxs)(Q.a,{open:r.dialogIsOpen,onClose:()=>d(Object(p.a)(Object(p.a)({},r),{},{dialogIsOpen:!1})),disableBackdropClick:!0,disableEscapeKeyDown:!0,"aria-labelledby":"dialog-title",children:[Object(D.jsx)(X.a,{id:"dialog-title",children:Object(D.jsx)("b",{children:"cashed"===r.trialResponses[r.trialResponses.length-1].result?o("bart.cashed_title"):o("bart.exploded_title")})}),Object(D.jsx)($.a,{children:Object(D.jsxs)(ee.a,{children:[o("bart.trial_score_report",{score:r.trialResponses[r.trialResponses.length-1].score}),o("bart.total_score_report",{score:r.trialResponses.map(e=>e.score).reduce((e,t)=>e+t,0)})]})}),Object(D.jsx)(te.a,{children:Object(D.jsx)(T.a,{onClick:()=>d(Object(p.a)(Object(p.a)({},r),{},{dialogIsOpen:!1})),color:"primary",autoFocus:!0,size:"large",children:r.trial<=c?o("bart.next_trial"):o("next")})})]}),Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,justify:"space-between",alignItems:"stretch",className:"bart-container",children:[Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",children:[r.trial<=c&&Object(D.jsx)(f.a,{item:!0,children:Object(D.jsxs)(f.a,{container:!0,direction:"column",justify:"space-around",alignItems:"center",children:[o("bart.next_reward"),Object(D.jsx)(Z.a,{variant:"h4",children:r.pumps*i})]})}),r.trial<=c&&Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(f.a,{container:!0,direction:"column",justify:"space-around",alignItems:"center",children:Object(D.jsx)(Z.a,{color:"textSecondary",variant:"caption",children:o("bart.trial_label",{trial:r.trial,trials:c})})})}),Object(D.jsx)(f.a,{item:!0,children:Object(D.jsxs)(f.a,{container:!0,direction:"column",justify:"space-around",alignItems:"center",children:[o("bart.total_points"),Object(D.jsx)(Z.a,{variant:"h4",children:r.totalScore})]})})]}),Object(D.jsx)(f.a,{item:!0,container:!0,direction:"column",alignContent:"center",alignItems:"center",children:Object(D.jsx)(W.a,{title:o("bart.balloon_tooltip"),arrow:!0,open:!r.dialogIsOpen&&r.showTooltip,children:Object(D.jsx)("div",{className:"bubble-container",style:{cursor:"pointer",width:m(r.pumps),height:m(r.pumps),transition:0===r.pumps?"":"width 1s, height 1s"},onClick:()=>{const e=l>0&&r.pumps<l;let t=Math.floor(Math.random()*r.randomNumbers.length),a=r.randomNumbers.splice(t,e?0:1);console.log("random number: ",a[0],"(must be 1 to explode)"),1===a[0]?b(!1):d(Object(p.a)(Object(p.a)({},r),{},{showTooltip:!1,pumps:r.pumps+1}))},children:Object(D.jsx)("figure",{className:"bubble"})})})}),Object(D.jsx)(f.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",children:Object(D.jsx)(T.a,{size:"large",color:"primary",variant:"outlined",onClick:()=>{b(!0)},children:o("bart.cash")})})]})]})}var ne=a(341),oe=a(342),ie=a(343),se=a(344),le=a(345);const ce=function(e){return e[Math.floor(Math.random()*e.length)]},re=e=>{const t=e.slice();for(let a=e.length-1;a>0;a--){const e=Math.floor(Math.random()*(a+1));[t[a],t[e]]=[t[e],t[a]]}return t};a(276);let de;function ue(e){let{content:t,onStore:a,onProgress:o}=e;const{t:i}=Object(R.a)(),{text:s,trials:l,stimuliDuration:c,fixationDuration:r,choices:d,timeoutsBeforeReset:u,feedbackDuration:b}=t,[m,j]=Object(n.useState)({finished:!1,trialResponses:[],taskStartedAt:null,taskFinishedAt:null,taskDuration:null,step:null,correct:null,stimuli:null,trialStartedAt:null,respondedAt:null,trial:null,timeouts:0}),h=e=>{const{key:t,keyCode:a}=e;if(null===m.trial&&(32===a||" "===t))return void g();if("stimuli"!==m.step||!["ArrowLeft","ArrowRight"].includes(t))return;const n=m.stimuli[m.trial-1];let o,i="ArrowLeft"===t&&n.startsWith("right")||"ArrowRight"===t&&n.startsWith("left");o="ArrowLeft"===t&&"left-go"===n||"ArrowRight"===t&&"right-go"===n?d.go:i?"empty":d.nogo,O(o)};Object(n.useEffect)(()=>(window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}),[h]),Object(n.useEffect)(()=>{if(null===m.stimuli){let e=[...Array(l.total).keys()].map((e,t)=>e<l.leftGo?"left-go":e<l.go?"right-go":e<l.go+(l.left-l.leftGo)?"left-nogo":"right-nogo");j(Object(p.a)(Object(p.a)({},m),{},{stimuli:re(e)}))}if("fixation"===m.step&&(clearTimeout(de),de=setTimeout(()=>{j(Object(p.a)(Object(p.a)({},m),{},{trial:m.trial+1,trialStartedAt:Date.now(),step:"stimuli"}))},r)),"feedback"===m.step&&(clearTimeout(de),de=setTimeout(()=>{j(Object(p.a)(Object(p.a)({},m),{},{step:"fixation"}))},b)),"stimuli"===m.step&&(clearTimeout(de),m.timeouts<u?de=setTimeout(()=>{j(Object(p.a)(Object(p.a)({},m),{},{trialResponses:[...m.trialResponses,{trial:m.trial,stimuli:m.stimuli[m.trial-1],choice:null,correct:null,respondedAt:null,trialStartedAt:m.trialStartedAt,rt:null}],timeouts:m.timeouts+1,correct:!1,step:b>0?"feedback":"fixation"}))},c):j(Object(p.a)(Object(p.a)({},m),{},{step:"reset",timeouts:0}))),o(100*m.trial/l.total),m.trial>l.total&&(console.log("------------ FINISHED -------"),o(100),j(Object(p.a)(Object(p.a)({},m),{},{finished:!0,taskFinishedAt:Date.now()}))),m.finished){clearTimeout(de);let e={trials:m.trialResponses};e.taskStartedAt=m.taskStartedAt,e.taskFinishedAt=m.taskFinishedAt,e.taskDuration=m.taskFinishedAt-m.taskStartedAt,a({view:t,response:e},!0)}},[m]);const g=()=>{j(Object(p.a)(Object(p.a)({},m),{},{trialResponses:[],trial:0,timeouts:0,step:"fixation",taskStartedAt:Date.now()}))},O=e=>{const t=Date.now();clearTimeout(de);const a=e===d.go&&!m.stimuli[m.trial-1].endsWith("nogo")||"empty"===e&&m.stimuli[m.trial-1].endsWith("nogo");j(Object(p.a)(Object(p.a)({},m),{},{correct:a,respondedAt:t,trialResponses:[...m.trialResponses,{trial:m.trial,stimuli:m.stimuli[m.trial-1],choice:e,correct:a,respondedAt:t,trialStartedAt:m.trialStartedAt,rt:t-m.trialStartedAt}],step:b>0?"feedback":"fixation"}))},x=e=>Object(D.jsxs)(n.Fragment,{children:["star"===e&&Object(D.jsx)("div",{onClick:()=>O("star"),className:"gng-stimulus",children:Object(D.jsx)(ne.a,{fontSize:"large",className:"yellow"})}),"empty"===e&&Object(D.jsx)("div",{onClick:()=>O("empty"),className:"gng-stimulus",children:" "}),"circle"===e&&Object(D.jsx)("div",{onClick:()=>O("circle"),className:"gng-stimulus",children:Object(D.jsx)(oe.a,{fontSize:"large",className:"blue"})}),"blue-star"===e&&Object(D.jsx)("div",{onClick:()=>O("blue-star"),className:"gng-stimulus",children:Object(D.jsx)(ne.a,{fontSize:"large",className:"blue"})}),"yellow-circle"===e&&Object(D.jsx)("div",{onClick:()=>O("yellow-circle"),className:"gng-stimulus",children:Object(D.jsx)(ne.a,{fontSize:"large",className:"yellow"})})]});return"reset"===m.step?Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:i("gonogo.too_many_timeouts"),escapeHtml:!1,className:"markdown-text"})}),Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(T.a,{variant:"outlined",color:"secondary",onClick:()=>g(),children:i("gonogo.restart")})})]}):null===m.trial?Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:i("gonogo.are_you_ready"),escapeHtml:!1,className:"markdown-text"})}),Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(T.a,{variant:"outlined",onClick:()=>g(),children:i("gonogo.start")})})]}):Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"gonogo-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:i(s),escapeHtml:!1,className:"markdown-text"})}),"stimuli"===m.step&&(y=m.stimuli[m.trial-1],Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:["left-go"===y&&x(d.go),"left-nogo"===y&&x(d.nogo),"left-go"!==y&&"left-nogo"!==y&&x("empty"),Object(D.jsx)(U.a,{orientation:"vertical",flexItem:!0}),"right-go"===y&&x(d.go),"right-nogo"===y&&x(d.nogo),"right-go"!==y&&"right-nogo"!==y&&x("empty")]})),"feedback"===m.step&&Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[m.correct&&Object(D.jsx)(ie.a,{fontSize:"large",className:"correct gng-icon"}),!m.correct&&Object(D.jsx)(se.a,{fontSize:"large",className:"incorrect gng-icon"})]}),"fixation"===m.step&&Object(D.jsx)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(le.a,{fontSize:"large",className:"fixation gng-icon"})})]});var y}var be=e=>{for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e};a(277),a(284);let me;function je(e){let{content:t,onStore:a}=e;const{rule:o,colors:i,words:s,trials:l,randomizeTrials:c,randomizeChoices:r,stimulusDuration:d,fixationDuration:u,timeoutsBeforeReset:b,feedbackDuration:m}=t,{t:j}=Object(R.a)(),[h,g]=Object(n.useState)({trialResponses:[],finished:!1,trial:null,step:null,correct:null,timeouts:0,stimuli:null}),O=e=>{const{key:t,keyCode:a}=e;if(null===h.trial&&(32===a||" "===t))return void y();if("stimulus"!==h.step||!["ArrowLeft","ArrowRight"].includes(t))return;let n=h.stimuli[h.trial-1].choices,o=h.stimuli[h.trial-1].stimulus,i="ArrowLeft"===t?n[0]:n[1];v(i,o)};Object(n.useEffect)(()=>(window.addEventListener("keydown",O),()=>{window.removeEventListener("keydown",O)}),[O]);const x=e=>{let t=c?be(e):e;return r&&(t=t.map(e=>{let t=Object.assign({},e);return t.choices=be(e.choices),t})),t};Object(n.useEffect)(()=>{if(null===h.stimuli&&g(Object(p.a)(Object(p.a)({},h),{},{stimuli:x(l)})),"fixation"===h.step&&(clearTimeout(me),me=setTimeout(()=>{g(Object(p.a)(Object(p.a)({},h),{},{step:"stimulus",trial:h.trial+1,trialStartedAt:Date.now()}))},u)),"feedback"===h.step&&(clearTimeout(me),me=setTimeout(()=>{g(Object(p.a)(Object(p.a)({},h),{},{step:"fixation"}))},m)),"stimulus"===h.step&&(clearTimeout(me),h.timeouts<b?me=setTimeout(()=>{g(Object(p.a)(Object(p.a)({},h),{},{step:m>0?"feedback":"fixation",trialResponses:[...h.trialResponses,{trial:h.trial,stimulus:h.stimuli[h.trial-1].stimulus,choice:null,correct:null,respondedAt:null,trialStartedAt:h.trialStartedAt,rt:null}],timeouts:h.timeouts+1,correct:!1}))},d):g(Object(p.a)(Object(p.a)({},h),{},{step:"reset",timeouts:0}))),h.trial>l.length&&g(Object(p.a)(Object(p.a)({},h),{},{finished:!0,taskFinishedAt:Date.now()})),h.finished){clearTimeout(me);let e={trials:h.trialResponses};e.taskStartedAt=h.taskStartedAt,e.taskFinishedAt=h.taskFinishedAt,e.taskDuration=h.taskFinishedAt-h.taskStartedAt,a({view:t,response:e},!0)}},[h]);const y=()=>{g(Object(p.a)(Object(p.a)({},h),{},{trial:0,timeouts:0,trialResponses:[],step:"fixation",taskStartedAt:Date.now()}))},v=(e,t)=>{let a=Date.now();clearTimeout(me);let[n,o]=e.split(""),[i,s]=t.split(""),l=n===s;g(Object(p.a)(Object(p.a)({},h),{},{step:m>0?"feedback":"fixation",correct:l,trialResponses:[...h.trialResponses,{trial:h.trial,stimulus:h.stimuli[h.trial-1].stimulus,choice:e,correct:l,respondedAt:a,trialStartedAt:h.trialStartedAt,rt:a-h.trialStartedAt}]}))};return"reset"===h.step?Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justify:"flex-start",className:"Text-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:j("stroop.too_many_timeouts"),escapeHtml:!1,className:"markdown-text"})}),Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(T.a,{variant:"outlined",color:"secondary",onClick:()=>y(),children:j("stroop.restart")})})]}):null===h.trial?Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:j("stroop.are_you_ready"),escapeHtml:!1,className:"markdown-text"})}),Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(T.a,{variant:"outlined",onClick:()=>y(),children:j("stroop.start")})})]}):Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"stretch",justify:"flex-start",className:"stroop-container stroop-board",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:j(o),escapeHtml:!1,className:"markdown-text"})}),h.trial<=l.length&&"stimulus"===h.step&&(e=>{let[t,a]=e.split("");return Object(D.jsx)(f.a,{container:!0,item:!0,direction:"column",alignItems:"center",justify:"flex-start",children:Object(D.jsx)(Z.a,{className:"stroop-stimulus",variant:"h1",style:{color:i[a]},children:j(s[t])})})})(h.stimuli[h.trial-1].stimulus),h.trial<=l.length&&"stimulus"===h.step&&(S=h.stimuli[h.trial-1].choices,k=h.stimuli[h.trial-1].stimulus,Object(D.jsx)(f.a,{container:!0,direction:"row",justify:"space-between",spacing:2,alignItems:"stretch",className:"stroop-choices",children:S.map((e,t)=>{let[a,n]=e.split("");return Object(D.jsx)(f.a,{item:!0,xs:!0,children:Object(D.jsx)(T.a,{style:{color:i[n]},onClick:()=>v(e,k),size:"large",fullWidth:!0,variant:"outlined",children:j(s[a])})},t)})})),"feedback"===h.step&&(h.correct,Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",children:[h.correct&&Object(D.jsx)(ie.a,{fontSize:"large",className:"correct gng-icon"}),!h.correct&&Object(D.jsx)(se.a,{fontSize:"large",className:"incorrect gng-icon"})]})),"fixation"===h.step&&Object(D.jsx)(f.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",children:Object(D.jsx)(le.a,{fontSize:"large",className:"fixation gng-icon"})})]});var S,k}var pe=a(351),he=a(86),ge=a(87),Oe=a(367),xe=a(368),fe=a(350),ye=a(146),ve=a.n(ye),Se=a(90),ke=a(347),we=a(348),Ae=a(346),Ne=a(379);const Ce="opponent",Ie="pot",Te="player",Re=Object(Ae.a)(e=>({root:{flexGrow:0},paper:{padding:e.spacing(2)},medium:{width:e.spacing(3),height:e.spacing(3)},large:{width:e.spacing(4),height:e.spacing(4)},grey:{color:e.palette.getContrastText(Se.a[400]),backgroundColor:Se.a[400]},tealDark:{color:e.palette.getContrastText(ke.a[800]),backgroundColor:ke.a[800]},blueG:{color:e.palette.getContrastText(we.a[800]),backgroundColor:we.a[800]},height100:{height:"100%"}}));var De=void 0,Me=void 0;const Ee=Object(n.memo)(function(e){let{name:t,amount:a,onDrop:n,accept:o,person:i,personsPrefix:s}=e,{lang:l}=Object(j.g)();De=l,Me=s,console.log(Me);const{t:c}=Object(R.a)(),d="rtl"===r[De].direction?I:C,u=Re(d),[{canDrop:b,isOver:m},h]=Object(Oe.a)({accept:o,drop:n,collect:e=>({isOver:e.isOver(),canDrop:e.canDrop()})});let g="#222";b&&m?g="darkgreen":b&&(g=we.a[800]);const O=[];for(let r=0;r<a;r++)O.push(Object(D.jsx)(_e,{type:t,name:t+r.toString(),boxName:t},t+r.toString()));return Object(D.jsx)(f.a,{item:!0,xs:12,children:Object(D.jsx)(v.a,{ref:h,className:u.paper,style:Object(p.a)(Object(p.a)({},{height:"128px"}),{},{backgroundColor:g}),elevation:3,children:Object(D.jsxs)(f.a,{container:!0,alignItems:"center",direction:"row",className:u.height100,children:[Object(D.jsxs)(f.a,{item:!0,xs:4,children:[t===Ce&&Object(D.jsx)(Pe,{person:i}),t!==Ce&&Object(D.jsx)(Z.a,{children:c("dictator."+t)})]}),Object(D.jsx)(f.a,{item:!0,xs:7,children:Object(D.jsx)(f.a,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",children:O})}),Object(D.jsx)(f.a,{item:!0,xs:1,children:Object(D.jsx)(f.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:Object(D.jsx)(Ne.a,{className:"".concat(u.grey," ").concat(u.large),children:a})})})]})})})});function Fe(e,t){return console.log(Me),Me+t+"."+e}const Pe=Object(n.memo)(function(e){let{person:t}=e;const{t:a}=Object(R.a)(),n="rtl"===r[De].direction?I:C,o=Re(n);return Object(D.jsxs)(D.Fragment,{children:[(null===t||void 0===t?void 0:t.avatar)&&Object(D.jsx)(Ne.a,{alt:a(Fe(t.field1,t.id)),src:"/images/"+t.avatar,className:o.large}),!(null!==t&&void 0!==t&&t.avatar)&&Object(D.jsx)(Ne.a,{className:o.large}),Object(D.jsx)(Z.a,{variant:"body1",color:"textPrimary",component:"p",children:(null===t||void 0===t?void 0:t.field1)&&a(Fe(t.field1,t.id))}),Object(D.jsx)(Z.a,{variant:"body2",color:"textSecondary",component:"p",children:(null===t||void 0===t?void 0:t.field2)&&a(Fe(t.field2,t.id))}),Object(D.jsx)(Z.a,{variant:"body2",color:"textSecondary",component:"p",children:(null===t||void 0===t?void 0:t.field3)&&a(Fe(t.field3,t.id))})]})}),_e=Object(n.memo)(function(e){let{type:t,name:a,boxName:n}=e;const[{isDragging:o},i,s]=Object(xe.a)(()=>({type:t,item:{name:a,boxName:n},collect:e=>({isDragging:!!e.isDragging()})}),[a]);return Object(D.jsxs)(f.a,{item:!0,children:[Object(D.jsx)(fe.a,{connect:s,src:"/images/token-large.png"}),Object(D.jsx)("span",{ref:i,className:"token-span",style:Object(p.a)(Object(p.a)({},{cursor:"move"}),{},{opacity:o?.5:1}),children:Object(D.jsx)(ve.a,{fontSize:o?"large":"medium"})})]})});a(285);function Le(e){let{content:t,onStore:a,onNotification:o}=e;const{t:i}=Object(R.a)(),{tokens:s,trials:l,useOpponentTypes:c,opponentTypes:r,text:d,personsPrefix:u,dialogOptionalText:b,persons:m}=t,[j,h]=Object(n.useState)({finished:!1,trial:null,totalScore:0,dialogIsOpen:!1,trialResponses:[],taskStartedAt:Date.now()}),[g,O]=Object(n.useState)([{name:Ce,amount:0,accepts:[Ie,Te]},{name:Ie,amount:s,accepts:[Te,Ce]},{name:Te,amount:0,accepts:[Ie,Ce]}]),[x,y]=Object(n.useState)(void 0);Object(n.useEffect)(()=>{},[]),Object(n.useEffect)(()=>{if(j.finished&&!j.dialogIsOpen){const e=Date.now();let n={trials:j.trialResponses};n.taskStartedAt=j.taskStartedAt,n.taskFinishedAt=e,n.taskDuration=e-j.taskStartedAt,a({view:t,response:n},!0)}},[j,a,t]);const v=()=>{let e=!1;return g.forEach(t=>{t.name===Ie&&0===t.amount&&(e=!0)}),e},S=Object(n.useCallback)((e,t)=>{const a=t.boxName,n=e;O(g.map(e=>e.name===a?Object(p.a)(Object(p.a)({},e),{},{amount:e.amount-1}):e.name===n?Object(p.a)(Object(p.a)({},e),{},{amount:e.amount+1}):e))},[g]),k=()=>{let e=((e,t)=>{if(!0!==c)return e;const a=e.filter(e=>function(e,t){var a=!1;for(let n=0;n<e.tags.length;n++)t.inclue(e.tags[n])&&(a=!0);return a}(e,t));return a})(m,r);y(re(e)),h(Object(p.a)(Object(p.a)({},j),{},{trial:0,trialResponses:[],taskStartedAt:Date.now()}))},w=()=>{var e;if(!v())return console.log("it should never come to this, because before calling newTrial, canFinishTrial has been checked!!!!"),void o(i("ultimatum.errors.required"));const t=g.find(e=>e.name===Te).amount;let a=!0;(null===(e=x[A])||void 0===e?void 0:e.minAcceptable)>s-t&&(a=!1),h(Object(p.a)(Object(p.a)({},j),{},{trialResponses:[...j.trialResponses,{trial:j.trial,playerShare:t,score:a?t:0,opponentShare:s-t,opponent:x[A],result:a?"accepted":"rejected"}],finished:j.trial>=l-1,trial:j.trial+1,totalScore:j.totalScore+(a?t:0),dialogIsOpen:!0})),O([{name:Ce,amount:0,accepts:[Ie,Te]},{name:Ie,amount:s,accepts:[Te,Ce]},{name:Te,amount:0,accepts:[Ie,Ce]}])};if(null===j.trial)return console.log("ultimatum starting..."),void k();var A=j.trial;null!==j.trial&&j.trial>=x.length&&(A=j.trial%x.length);const N=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,C=N()?ge.a:he.a;return Object(D.jsxs)(n.Fragment,{children:[j.dialogIsOpen&&Object(D.jsxs)(Q.a,{open:j.dialogIsOpen,onClose:()=>h(Object(p.a)(Object(p.a)({},j),{},{dialogIsOpen:!1})),disableEscapeKeyDown:!0,"aria-labelledby":"dialog-title",children:[Object(D.jsx)(X.a,{disableTypography:!0,id:"dialog-title",children:Object(D.jsx)(Z.a,{variant:"h6",color:"accepted"===j.trialResponses[j.trialResponses.length-1].result?"primary":"error",children:Object(D.jsx)("b",{children:"accepted"===j.trialResponses[j.trialResponses.length-1].result?i("ultimatum.dialog_title.accepted"):i("ultimatum.dialog_title.rejected")})})}),Object(D.jsx)($.a,{children:Object(D.jsxs)(ee.a,{children:[i("ultimatum.trial_score_report",{decision:j.trialResponses[j.trialResponses.length-1].result,score:j.trialResponses[j.trialResponses.length-1].score}),i("ultimatum.total_score_report",{score:j.trialResponses.map(e=>e.score).reduce((e,t)=>e+t,0)}),Object(D.jsx)("br",{})," ",Object(D.jsx)("br",{}),!j.finished&&b?i(b):i("ultimatum.dialog_optional_text_default")]})}),Object(D.jsx)(te.a,{children:Object(D.jsx)(T.a,{onClick:()=>h(Object(p.a)(Object(p.a)({},j),{},{dialogIsOpen:!1})),color:"primary",autoFocus:!0,size:"large",children:j.trial<=l-1?i("ultimatum.next_trial"):i("next")})})]}),Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"ultimatum-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(Z.a,{variant:"body2",children:i(d)})}),Object(D.jsx)(f.a,{item:!0,container:!0,spacing:2,alignItems:"stretch",justifyContent:"space-between",className:"boxes-container",children:Object(D.jsx)(pe.a,{backend:C,options:N()?{enableMouseEvents:!0}:{},children:g.map((e,t)=>{let{name:a,amount:n,accepts:o}=e;return Object(D.jsx)(Ee,{accept:o,name:a,amount:n,onDrop:e=>S(a,e),person:x[A],personsPrefix:u},t)})})}),Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[Object(D.jsx)(f.a,{item:!0,xs:4,children:Object(D.jsx)(f.a,{container:!0,direction:"column",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(Z.a,{variant:"body2",children:i("ultimatum.trial_label",{trial:j.trial+1,trials:l})})})}),Object(D.jsx)(f.a,{item:!0,xs:4,children:Object(D.jsx)(f.a,{container:!0,direction:"column",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(T.a,{size:"large",color:v()?"primary":"default",variant:v()?"contained":"outlined",onClick:()=>{v()?w():o(i("ultimatum.errors.required"))},children:i("ultimatum.finish.button")})})}),Object(D.jsx)(f.a,{item:!0,xs:4,children:Object(D.jsx)(f.a,{container:!0,direction:"column",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(Z.a,{variant:"body2",children:i("ultimatum.total_points",{score:j.totalScore})})})})]})]})]})}var ze=a(366),Ge=a(132);a(286);function We(e){let{content:t,onStore:a,onNotification:o}=e;const{t:i}=Object(R.a)(),{tokens:s,trials:l,useOpponentTypes:c,opponentTypes:r,text:d,personsPrefix:u,persons:b}=t,[m,j]=Object(n.useState)({finished:!1,trial:null,totalScore:0,dialogIsOpen:!1,trialResponses:[],taskStartedAt:Date.now(),collectionState:0}),[h,g]=Object(n.useState)([{name:Ce,amount:0,accepts:[Ie,Te]},{name:Ie,amount:s,accepts:[Te,Ce]},{name:Te,amount:0,accepts:[Ie,Ce]}]),[O,y]=Object(n.useState)(void 0),[v,S]=Object(n.useState)(!1),[k,w]=Object(n.useState)(null);Object(n.useEffect)(()=>{},[]),Object(n.useEffect)(()=>{if(m.finished&&!m.dialogIsOpen){const e=Date.now();let n={trials:m.trialResponses};n.taskStartedAt=m.taskStartedAt,n.taskFinishedAt=e,n.taskDuration=e-m.taskStartedAt,a({view:t,response:n},!0)}},[m,a,t]),Object(n.useEffect)(()=>{if(m.dialogIsOpen){S(!1);const e=setTimeout(()=>{S(!0)},5e3);w(e)}else k&&clearTimeout(k),S(!1);return()=>{k&&clearTimeout(k)}},[m.dialogIsOpen]);const A=()=>{let e=!1;return h.forEach(t=>{t.name===Ie&&0===t.amount&&(e=!0)}),e},N=Object(n.useCallback)((e,t)=>{const a=t.boxName,n=e;g(h.map(e=>e.name===a?Object(p.a)(Object(p.a)({},e),{},{amount:e.amount-1}):e.name===n?Object(p.a)(Object(p.a)({},e),{},{amount:e.amount+1}):e))},[h]),C=()=>{let e=((e,t)=>{if(!0!==c)return e;const a=e.filter(e=>function(e,t){var a=!1;for(let n=0;n<e.tags.length;n++)t.inclue(e.tags[n])&&(a=!0);return a}(e,t));return a})(b,r);y(re(e)),j(Object(p.a)(Object(p.a)({},m),{},{trial:0,trialResponses:[],taskStartedAt:Date.now()}))},I=()=>{if(!A())return console.log("it should never come to this, because before calling newTrial, canFinishTrial has been checked!!!!"),void o(i("dictator.errors.required"));const e=h.find(e=>e.name===Te).amount;j(Object(p.a)(Object(p.a)({},m),{},{trialResponses:[...m.trialResponses,{trial:m.trial,playerShare:e,opponentShare:s-e,opponent:O[M]}],finished:m.trial>=l-1,trial:m.trial+1,totalScore:m.totalScore+e,dialogIsOpen:!0})),g([{name:Ce,amount:0,accepts:[Ie,Te]},{name:Ie,amount:s,accepts:[Te,Ce]},{name:Te,amount:0,accepts:[Ie,Ce]}])};if(null===m.trial)return console.log("dictator starting..."),void C();var M=m.trial;null!==m.trial&&m.trial>=O.length&&(M=m.trial%O.length);const E=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,F=E()?ge.a:he.a;return Object(D.jsxs)(n.Fragment,{children:[m.dialogIsOpen&&Object(D.jsxs)(Q.a,{open:m.dialogIsOpen,onClose:()=>j(Object(p.a)(Object(p.a)({},m),{},{dialogIsOpen:!1})),disableEscapeKeyDown:!0,"aria-labelledby":"dialog-title",className:"margined-dialog",id:"collect-dialog",children:[Object(D.jsx)(X.a,{id:"dialog-title",children:Object(D.jsx)("b",{children:i("dictator.dialog_title")})}),Object(D.jsx)($.a,{children:Object(D.jsxs)(ee.a,{children:[i("dictator.trial_score_report",{score:m.trialResponses[m.trialResponses.length-1].playerShare}),i("dictator.total_score_report",{score:m.trialResponses.map(e=>e.playerShare).reduce((e,t)=>e+t,0)}),Object(D.jsxs)(x.a,{id:"matchmaking-container",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"200px"},children:[Object(D.jsxs)(ze.a,{id:"matchmaking-loading",className:v?"hide":"",children:[Object(D.jsx)(ze.a,{display:"flex",justifyContent:"center",width:"100%",children:Object(D.jsx)(Ge.a,{})}),Object(D.jsx)(ze.a,{mt:2,children:Object(D.jsx)(Z.a,{variant:"body1",children:i("dictator.waiting_for_opponent")})})]}),Object(D.jsxs)(ze.a,{id:"matchmaking-result",className:v?"":"hide",children:[Object(D.jsx)(Z.a,{variant:"body1",style:{paddingBottom:"16px"},children:i("dictator.matchmaking_result")}),Object(D.jsx)(Z.a,{variant:"body1",style:{paddingBottom:"16px"},children:i("dictator.matchmaking_result_text")})]})]})]})}),Object(D.jsx)(te.a,{children:Object(D.jsx)(T.a,{onClick:()=>j(Object(p.a)(Object(p.a)({},m),{},{dialogIsOpen:!1})),disabled:!v,color:"primary",autoFocus:!0,size:"large",children:m.trial<=l-1?i("dictator.next_trial"):i("next")})})]}),Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(Z.a,{variant:"body2",children:i(d)})}),Object(D.jsx)(f.a,{item:!0,container:!0,spacing:2,alignItems:"stretch",justifyContent:"space-between",className:"boxes-container",children:Object(D.jsx)(pe.a,{backend:F,options:E()?{enableMouseEvents:!0}:{},children:h.map((e,t)=>{let{name:a,amount:n,accepts:o}=e;return Object(D.jsx)(Ee,{accept:o,name:a,amount:n,onDrop:e=>N(a,e),person:O[M],personsPrefix:u},t)})})}),Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[Object(D.jsx)(f.a,{item:!0,xs:4,children:Object(D.jsx)(f.a,{container:!0,direction:"column",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(Z.a,{variant:"body2",children:i("dictator.trial_label",{trial:m.trial+1,trials:l})})})}),Object(D.jsx)(f.a,{item:!0,xs:4,children:Object(D.jsx)(f.a,{container:!0,direction:"column",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(T.a,{size:"large",color:"primary",variant:"outlined",onClick:()=>{A()?I():o(i("dictator.errors.required"))},children:i("dictator.finish.button")})})}),Object(D.jsx)(f.a,{item:!0,xs:4,children:Object(D.jsx)(f.a,{container:!0,direction:"column",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(Z.a,{variant:"body2",children:i("dictator.total_points",{score:m.totalScore})})})})]})]})]})}a(287);let Be;function He(e){let{content:t,onStore:a,onProgress:o}=e;const{t:i}=Object(R.a)(),{text:s,trials:l,stimuliDuration:c,fixationDuration:r,timeoutsBeforeReset:d,feedbackDuration:u}=t,[b,m]=Object(n.useState)({finished:!1,trialResponses:[],taskStartedAt:null,taskFinishedAt:null,taskDuration:null,step:null,type:null,correct:null,stimuli:null,trialStartedAt:null,respondedAt:null,trial:null,timeouts:0});Object(n.useEffect)(()=>{const e=e=>{const{key:t,keyCode:a}=e;if(null===b.trial&&(32===a||" "===t))return void j();if("stimuli"!==b.step||!["ArrowLeft","ArrowRight"].includes(t))return;const n=b.stimuli[b.trial-1];let o,i="ArrowLeft"===t&&n.startsWith("right")||"ArrowRight"===t&&n.startsWith("left"),s="ArrowLeft"===t&&n.startsWith("left-go")||"ArrowRight"===t&&n.startsWith("right-go");o=n.endsWith("top")?s?l.top.choices.go:i?"empty":l.top.choices.nogo:s?l.bottom.choices.go:i?"empty":l.bottom.choices.nogo,h(o)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[b]),Object(n.useEffect)(()=>{if(null===b.stimuli){let e=[...Array(l.total).keys()].map((e,t)=>e<l.top.total?e<l.top.leftGo?"left-go-top":e<l.top.go?"right-go-top":e<l.top.go+(l.top.left-l.top.leftGo)?"left-nogo-top":"right-nogo-top":e<l.top.total+l.bottom.leftGo?"left-go-bottom":e<l.top.total+l.bottom.go?"right-go-bottom":e<l.top.total+l.bottom.go+(l.bottom.left-l.bottom.leftGo)?"left-nogo-bottom":"right-nogo-bottom");m(Object(p.a)(Object(p.a)({},b),{},{stimuli:re(e)}))}},[b]),Object(n.useEffect)(()=>{if("fixation"===b.step&&(clearTimeout(Be),Be=setTimeout(()=>{m(Object(p.a)(Object(p.a)({},b),{},{trial:b.trial+1,trialStartedAt:Date.now(),step:"stimuli"}))},r)),"feedback"===b.step&&(clearTimeout(Be),Be=setTimeout(()=>{m(Object(p.a)(Object(p.a)({},b),{},{step:"fixation"}))},u)),"stimuli"===b.step&&(clearTimeout(Be),b.timeouts<d?Be=setTimeout(()=>{m(Object(p.a)(Object(p.a)({},b),{},{trialResponses:[...b.trialResponses,{trial:b.trial,stimuli:b.stimuli[b.trial-1],choice:null,correct:null,respondedAt:null,trialStartedAt:b.trialStartedAt,rt:null}],timeouts:b.timeouts+1,correct:!1,step:u>0?"feedback":"fixation"}))},c):m(Object(p.a)(Object(p.a)({},b),{},{step:"reset",timeouts:0}))),o(100*b.trial/l.total),b.trial>l.total&&(console.log("------------ FINISHED -------"),o(100),m(Object(p.a)(Object(p.a)({},b),{},{finished:!0,taskFinishedAt:Date.now()}))),b.finished){clearTimeout(Be);let e={trials:b.trialResponses};e.taskStartedAt=b.taskStartedAt,e.taskFinishedAt=b.taskFinishedAt,e.taskDuration=b.taskFinishedAt-b.taskStartedAt,a({view:t,response:e},!0)}},[b]);const j=()=>{m(Object(p.a)(Object(p.a)({},b),{},{trialResponses:[],trial:0,timeouts:0,step:"fixation",taskStartedAt:Date.now()}))},h=e=>{const t=Date.now();clearTimeout(Be);const a=function(e){const t=e.endsWith("top")?l.top.choices:l.bottom.choices;return e.includes("nogo")?"empty":t.go}(b.stimuli[b.trial-1]);console.log("correct answer = %s for choice %s , in stimuli %o",a,e,b.stimuli[b.trial-1]),m(Object(p.a)(Object(p.a)({},b),{},{correct:a===e,respondedAt:t,trialResponses:[...b.trialResponses,{trial:b.trial,stimuli:b.stimuli[b.trial-1],choice:e,correct:a===e,respondedAt:t,trialStartedAt:b.trialStartedAt,rt:t-b.trialStartedAt}],step:u>0?"feedback":"fixation"}))};const g=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(D.jsxs)(n.Fragment,{children:["empty"===e&&t&&Object(D.jsx)("div",{onClick:()=>h("empty"),className:"ts-stimulus",children:" "}),"empty"===e&&!t&&Object(D.jsx)("div",{className:"ts-stimulus ts-inactive",children:" "}),"star"===e&&Object(D.jsx)("div",{onClick:()=>h("star"),className:"ts-stimulus",children:Object(D.jsx)(ne.a,{fontSize:"large",className:"yellow"})}),"circle"===e&&Object(D.jsx)("div",{onClick:()=>h("circle"),className:"ts-stimulus",children:Object(D.jsx)(oe.a,{fontSize:"large",className:"blue"})}),"blue-star"===e&&Object(D.jsx)("div",{onClick:()=>h("blue-star"),className:"ts-stimulus",children:Object(D.jsx)(ne.a,{fontSize:"large",className:"blue"})}),"yellow-circle"===e&&Object(D.jsx)("div",{onClick:()=>h("yellow-circle"),className:"ts-stimulus",children:Object(D.jsx)(ne.a,{fontSize:"large",className:"yellow"})})]})},O=(e,t)=>{const a=e.endsWith("top")?l.top.choices:l.bottom.choices;return Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[0===t&&e.endsWith("bottom")&&g("empty",!1),0===t&&e.endsWith("top")&&e.startsWith("left-go")&&g(a.go),0===t&&e.endsWith("top")&&e.startsWith("left-nogo")&&g(a.nogo),0===t&&e.endsWith("top")&&!e.includes("left-go")&&!e.includes("left-nogo")&&g("empty"),1===t&&e.endsWith("top")&&g("empty",!1),1===t&&e.endsWith("bottom")&&e.startsWith("left-go")&&g(a.go),1===t&&e.endsWith("bottom")&&e.startsWith("left-nogo")&&g(a.nogo),1===t&&e.endsWith("bottom")&&!e.startsWith("left-go")&&!e.startsWith("left-nogo")&&g("empty"),Object(D.jsx)(U.a,{orientation:"vertical",flexItem:!0}),0===t&&e.endsWith("bottom")&&g("empty",!1),0===t&&e.endsWith("top")&&e.startsWith("right-go")&&g(a.go),0===t&&e.endsWith("top")&&e.startsWith("right-nogo")&&g(a.nogo),0===t&&e.endsWith("top")&&!e.includes("right-go")&&!e.includes("right-nogo")&&g("empty"),1===t&&e.endsWith("top")&&g("empty",!1),1===t&&e.endsWith("bottom")&&e.startsWith("right-go")&&g(a.go),1===t&&e.endsWith("bottom")&&e.startsWith("right-nogo")&&g(a.nogo),1===t&&e.endsWith("bottom")&&!e.startsWith("right-go")&&!e.startsWith("right-nogo")&&g("empty")]})};return"reset"===b.step?Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:i("taskswitch.too_many_timeouts"),escapeHtml:!1,className:"markdown-text"})}),Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(T.a,{variant:"outlined",color:"secondary",onClick:()=>j(),children:i("taskswitch.restart")})})]}):null===b.trial?Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:i("taskswitch.are_you_ready"),escapeHtml:!1,className:"markdown-text"})}),Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(T.a,{variant:"outlined",onClick:()=>j(),children:i("taskswitch.start")})})]}):Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"ts-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:i(s),escapeHtml:!1,className:"markdown-text"})}),"stimuli"===b.step&&(e=>{if(e)return Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"ts-stimulus-container",children:[O(e,0),Object(D.jsxs)(f.a,{item:!0,children:[" ",Object(D.jsx)(U.a,{orientation:"horizontal"})," "]}),O(e,1)]})})(b.stimuli[b.trial-1]),"feedback"===b.step&&Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[b.correct&&Object(D.jsx)(ie.a,{fontSize:"large",className:"correct ts-icon"}),!b.correct&&Object(D.jsx)(se.a,{fontSize:"large",className:"incorrect ts-icon"})]}),"fixation"===b.step&&Object(D.jsx)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(le.a,{fontSize:"large",className:"fixation ts-icon"})})]})}a(288);let Ke;function Ve(e){let{content:t,onStore:a,onProgress:o}=e;const{t:i}=Object(R.a)(),{text:s,trials:l,stimuliDuration:c,fixationDuration:r,timeoutsBeforeReset:d,feedbackDuration:u}=t,[b,m]=Object(n.useState)({finished:!1,trialResponses:[],taskStartedAt:null,taskFinishedAt:null,taskDuration:null,step:null,type:null,correct:null,stimuli:null,trialStartedAt:null,respondedAt:null,trial:null,timeouts:0});Object(n.useEffect)(()=>{console.log("useEffect -> before handleKeyPress, it has no dependency");const e=e=>{const{key:t,keyCode:a}=e;if(null===b.trial&&(32===a||" "===t))return void j();if("stimuli"!==b.step||!["ArrowLeft","ArrowRight"].includes(t))return;const n=b.stimuli[b.trial-1];let o;"ArrowLeft"===t&&(o=n.pos>1?2:0),"ArrowRight"===t&&(o=n.pos>1?3:1),h(o)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[b]),Object(n.useEffect)(()=>{if(console.log(b.stimuli),null===b.stimuli){let e=[...Array(l.total).keys()].map((e,t)=>{let a={pos:0,figure:0,color:0};return e<l.typeA?(a.pos=e<l.left?0:1,a.figure=e<l.figureA?0:1,a.color=e<l.colorA?0:1):(a.pos=e-l.typeA<l.left?2:3,a.figure=e-l.typeA<l.figureA?0:1,a.color=e-l.typeA<l.colorA?0:1),a});m(Object(p.a)(Object(p.a)({},b),{},{stimuli:re(e)}))}},[b.stimuli]),Object(n.useEffect)(()=>{if("fixation"===b.step&&(clearTimeout(Ke),Ke=setTimeout(()=>{m(Object(p.a)(Object(p.a)({},b),{},{trial:b.trial+1,trialStartedAt:Date.now(),step:"stimuli"}))},r)),"feedback"===b.step&&(clearTimeout(Ke),Ke=setTimeout(()=>{m(Object(p.a)(Object(p.a)({},b),{},{step:"fixation"}))},u)),"stimuli"===b.step&&(clearTimeout(Ke),b.timeouts<d?Ke=setTimeout(()=>{m(Object(p.a)(Object(p.a)({},b),{},{trialResponses:[...b.trialResponses,{trial:b.trial,stimuli:b.stimuli[b.trial-1],choice:null,correct:null,respondedAt:null,trialStartedAt:b.trialStartedAt,rt:null}],timeouts:b.timeouts+1,correct:!1,step:u>0?"feedback":"fixation"}))},c):m(Object(p.a)(Object(p.a)({},b),{},{step:"reset",timeouts:0}))),o(100*b.trial/l.total),b.trial>l.total&&(console.log("------------ FINISHED -------"),o(100),m(Object(p.a)(Object(p.a)({},b),{},{finished:!0,taskFinishedAt:Date.now()}))),b.finished){clearTimeout(Ke);let e={trials:b.trialResponses};e.taskStartedAt=b.taskStartedAt,e.taskFinishedAt=b.taskFinishedAt,e.taskDuration=b.taskFinishedAt-b.taskStartedAt,a({view:t,response:e},!0)}},[b]);const j=()=>{m(Object(p.a)(Object(p.a)({},b),{},{trialResponses:[],trial:0,timeouts:0,step:"fixation",taskStartedAt:Date.now()}))},h=e=>{const t=Date.now();clearTimeout(Ke);const a=function(e){if(e.pos<2)return 0===e.figure?e.pos:1-e.pos;if(e.pos>1)return 0===e.color?e.pos:2===e.pos?3:2}(b.stimuli[b.trial-1]);console.log("correct answer = %d for choice %d , in stimuli %o",a,e,b.stimuli[b.trial-1]),m(Object(p.a)(Object(p.a)({},b),{},{correct:a===e,respondedAt:t,trialResponses:[...b.trialResponses,{trial:b.trial,stimuli:b.stimuli[b.trial-1],type:b.stimuli[b.trial-1].pos<2?0:1,choice:e,correct:a===e,respondedAt:t,trialStartedAt:b.trialStartedAt,rt:t-b.trialStartedAt}],step:u>0?"feedback":"fixation"}))};const g=(e,t)=>Object(D.jsx)(n.Fragment,{children:Object(D.jsxs)("div",{onClick:()=>h(t),className:"ts-stimulus",children:["0-0"===e&&Object(D.jsx)(ne.a,{fontSize:"large",className:"yellow"}),"1-0"===e&&Object(D.jsx)(oe.a,{fontSize:"large",className:"yellow"}),"0-1"===e&&Object(D.jsx)(ne.a,{fontSize:"large",className:"blue"}),"1-1"===e&&Object(D.jsx)(oe.a,{fontSize:"large",className:"blue"})]})}),O=(e,t,a,n)=>!1===e?Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[g("empty",a),Object(D.jsx)(U.a,{orientation:"vertical",flexItem:!0}),g("empty",n)]}):Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[(null===t||void 0===t?void 0:t.pos)===a&&g(t.figure+"-"+t.color,t.pos),(null===t||void 0===t?void 0:t.pos)===n&&g("empty",a),Object(D.jsx)(U.a,{orientation:"vertical",flexItem:!0}),(null===t||void 0===t?void 0:t.pos)===a&&g("empty",n),(null===t||void 0===t?void 0:t.pos)===n&&g(t.figure+"-"+t.color,t.pos)]});return"reset"===b.step?Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:i("taskswitch.too_many_timeouts"),escapeHtml:!1,className:"markdown-text"})}),Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(T.a,{variant:"outlined",color:"secondary",onClick:()=>j(),children:i("taskswitch.restart")})})]}):null===b.trial?Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:i("taskswitch.are_you_ready"),escapeHtml:!1,className:"markdown-text"})}),Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(T.a,{variant:"outlined",onClick:()=>j(),children:i("taskswitch.start")})})]}):Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"ts-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:i(s),escapeHtml:!1,className:"markdown-text"})}),"stimuli"===b.step&&(x=b.stimuli[b.trial-1],Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"ts-stimulus-container",children:[(null===x||void 0===x?void 0:x.pos)<2&&O(!0,x,0,1),(null===x||void 0===x?void 0:x.pos)>1&&O(!1),Object(D.jsxs)(f.a,{item:!0,children:[" ",Object(D.jsx)(U.a,{orientation:"horizontal"})," "]}),(null===x||void 0===x?void 0:x.pos)<2&&O(!1),(null===x||void 0===x?void 0:x.pos)>1&&O(!0,x,2,3)]})),"feedback"===b.step&&Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[b.correct&&Object(D.jsx)(ie.a,{fontSize:"large",className:"correct ts-icon"}),!b.correct&&Object(D.jsx)(se.a,{fontSize:"large",className:"incorrect ts-icon"})]}),"fixation"===b.step&&Object(D.jsx)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(le.a,{fontSize:"large",className:"fixation ts-icon"})})]});var x}var Ue=a(353),Je=a(354),qe=a(355),Ye=a(356),Ze=a(357),Qe=a(358),Xe=a(359),$e=a(360);a(289);let et;function tt(e){let{content:t,onStore:a,onNotification:o,onProgress:i}=e;const{t:s}=Object(R.a)(),{text:l,trials:c,stimuliDuration:r,fixationDuration:d,feedbackDuration:u,nback:b,stimuli:m}=t,j={star:ne.a,circle:oe.a,triangle:Ue.a,rectangle:Je.a,hand:qe.a,ball:Ye.a,watch:Ze.a,school:Qe.a,cup:Xe.a},[h,g]=Object(n.useState)({finished:!1,trial:null,step:null,trialResponses:[],taskStartedAt:null,taskFinishedAt:null,taskDuration:null,trialStartedAt:null,respondedAt:null,stimuli:null});Object(n.useEffect)(()=>{const e=e=>{const{key:t,keyCode:a}=e;if(null===h.trial&&(32===a||" "===t))return void O();if("stimuli"!==h.step||32!==a&&" "!==t)return;const n=h.stimuli[h.trial-1];x(n)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[h]),Object(n.useEffect)(()=>{if(null===h.stimuli){let e=0,t=0,a=[...Array(c).keys()].map((a,n)=>{let o=m[e];return t<o.amount?(t++,{type:o.type,name:o.name}):(e++,t=1,e>=m.length&&(console.log("error in figure numbers and total trials, reseting figures. Index: %d , length: %d",e,null===m||void 0===m?void 0:m.length),e=0),o=m[e],{type:o.type,name:o.name})});g(Object(p.a)(Object(p.a)({},h),{},{stimuli:re(a)}))}if(h.trial>c&&(console.log("------------ FINISHED -------"),i(100),g(Object(p.a)(Object(p.a)({},h),{},{finished:!0,taskFinishedAt:Date.now()}))),"fixation"===h.step&&(clearTimeout(et),et=setTimeout(()=>{g(Object(p.a)(Object(p.a)({},h),{},{trial:h.trial+1,trialStartedAt:Date.now(),step:"stimuli"}))},d)),"feedback"===h.step&&(clearTimeout(et),et=setTimeout(()=>{g(Object(p.a)(Object(p.a)({},h),{},{step:"fixation"}))},u)),"stimuli"===h.step&&(clearTimeout(et),et=setTimeout(()=>{var e,t;const a=Date.now(),n=!(h.trial>b)||(null===(e=h.stimuli[h.trial-1])||void 0===e?void 0:e.name)!==(null===(t=h.stimuli[h.trial-(b+1)])||void 0===t?void 0:t.name);g(Object(p.a)(Object(p.a)({},h),{},{correct:n,respondedAt:a,trialResponses:[...h.trialResponses,{trial:h.trial,stimuli:h.stimuli[h.trial-1],choice:"noresponse",correct:n,respondedAt:a,trialStartedAt:h.trialStartedAt,rt:null}],step:u>0?"feedback":"fixation"}))},r)),i(100*h.trial/c),h.finished){clearTimeout(et);let e={trials:h.trialResponses};e.taskStartedAt=h.taskStartedAt,e.taskFinishedAt=h.taskFinishedAt,e.taskDuration=h.taskFinishedAt-h.taskStartedAt,a({view:t,response:e},!0)}},[h]);const O=()=>{g(Object(p.a)(Object(p.a)({},h),{},{trialResponses:[],trial:0,step:"fixation",taskStartedAt:Date.now()})),console.log("task started. stimuli: %o",h.stimuli)},x=e=>{var t,a;if(h.trial<=b)return o(s("nback.invalid.selection.notification"));const n=Date.now();clearTimeout(et);const i=h.trial>b&&(null===(t=h.stimuli[h.trial-1])||void 0===t?void 0:t.name)===(null===(a=h.stimuli[h.trial-(b+1)])||void 0===a?void 0:a.name);g(Object(p.a)(Object(p.a)({},h),{},{correct:i,respondedAt:n,trialResponses:[...h.trialResponses,{trial:h.trial,stimuli:h.stimuli[h.trial-1],choice:e,correct:i,respondedAt:n,trialStartedAt:h.trialStartedAt,rt:n-h.trialStartedAt}],step:u>0?"feedback":"fixation"}))};return null===h.trial?Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:s("nback.are_you_ready"),escapeHtml:!1,className:"markdown-text"})}),Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(T.a,{variant:"outlined",onClick:()=>O(),children:s("nback.start")})})]}):Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"nback-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:s(l),escapeHtml:!1,className:"markdown-text"})}),Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"center",alignItems:"center",className:"nback-main-container",children:["stimuli"===h.step&&(e=>{if(console.log("renderFigure: ",e),null===e||void 0===e)return console.log("figure is null, state:",h),Object(D.jsx)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center"});if("icon"===e.type){if(!j[e.name])return Object(D.jsx)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(n.Fragment,{children:Object(D.jsx)(ze.a,{onClick:()=>x(e),className:"single-stimulus single-stimulus-icon",children:Object(D.jsx)($e.a,{fontSize:"large",className:"yellow single-stimulus-icon"})})})});const t=j[e.name];return Object(D.jsx)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(ze.a,{onClick:()=>x(e),className:"single-stimulus single-stimulus-icon",children:Object(D.jsx)(t,{fontSize:"large",className:"yellow single-stimulus-icon"})})})}return"letter"===e.type?Object(D.jsx)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(ze.a,{onClick:()=>x(e),className:"single-stimulus single-stimulus-letter",textAlign:"center",children:Object(D.jsxs)(Z.a,{type:"span",className:"yellow single-stimuli-letter",children:[" ",e.name," "]})})}):void 0})(h.stimuli[h.trial-1]),"feedback"===h.step&&h.trial>b&&Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[h.correct&&Object(D.jsx)(ie.a,{fontSize:"large",className:"correct single-stimulus-icon"}),!h.correct&&Object(D.jsx)(se.a,{fontSize:"large",className:"incorrect single-stimulus-icon"})]}),"fixation"===h.step&&Object(D.jsx)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(le.a,{fontSize:"large",className:"stimulus-fixation single-stimulus-icon"})})]})]})}a(290);let at;function nt(e){let{content:t,onStore:a,onProgress:o,onNotification:i}=e;const{t:s}=Object(R.a)(),{text:l,trials:c,stimuliDuration:r,fixationDuration:d,feedbackDuration:u,choices:b}=t,m={star:ne.a,circle:oe.a,triangle:Ue.a,rectangle:Je.a,hand:qe.a,ball:Ye.a,watch:Ze.a,school:Qe.a,cup:Xe.a},[j,h]=Object(n.useState)({finished:!1,trial:null,step:null,trialResponses:[],taskStartedAt:null,taskFinishedAt:null,taskDuration:null,trialStartedAt:null,respondedAt:null,stimuli:null,correct:null});Object(n.useEffect)(()=>{const e=e=>{const{key:t,keyCode:a}=e;if(null===j.trial&&(32===a||" "===t))return void g();if("stimuli"!==j.step||32!==a&&" "!==t)return;const n=j.stimuli[j.trial-1];O(n)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[j]),Object(n.useEffect)(()=>{if(null===j.stimuli){console.log(c);let e=[...Array(c.total).keys()].map((e,t)=>e<c.go?{trialType:"go",type:b.go.type,name:ce(b.go.names)}:{trialType:"nogo",type:b.nogo.type,name:ce(b.nogo.names)});h(Object(p.a)(Object(p.a)({},j),{},{stimuli:re(e)}))}if("fixation"===j.step&&(clearTimeout(at),at=setTimeout(()=>{h(Object(p.a)(Object(p.a)({},j),{},{trial:j.trial+1,trialStartedAt:Date.now(),step:"stimuli"}))},d)),"feedback"===j.step&&(clearTimeout(at),at=setTimeout(()=>{h(Object(p.a)(Object(p.a)({},j),{},{step:"fixation"}))},u)),"stimuli"===j.step&&(clearTimeout(at),at=setTimeout(()=>{var e,t;const a=Date.now();console.log("stimuli step timeout. stimuli: %o",j.stimuli[j.trial-1]);const n=null===(e=j.stimuli[j.trial-1])||void 0===e||null===(t=e.trialType)||void 0===t?void 0:t.endsWith("nogo");h(Object(p.a)(Object(p.a)({},j),{},{correct:n,respondedAt:a,trialResponses:[...j.trialResponses,{trial:j.trial,stimuli:j.stimuli[j.trial-1],choice:"noresponse",correct:n,respondedAt:a,trialStartedAt:j.trialStartedAt,rt:null}],step:u>0?"feedback":"fixation"}))},r)),o(100*j.trial/c.total),j.trial>c.total&&(console.log("------------ FINISHED -------"),o(100),h(Object(p.a)(Object(p.a)({},j),{},{finished:!0,taskFinishedAt:Date.now()}))),j.finished){clearTimeout(at);let e={trials:j.trialResponses};e.taskStartedAt=j.taskStartedAt,e.taskFinishedAt=j.taskFinishedAt,e.taskDuration=j.taskFinishedAt-j.taskStartedAt,a({view:t,response:e},!0)}},[j]);const g=()=>{h(Object(p.a)(Object(p.a)({},j),{},{trialResponses:[],trial:0,step:"fixation",taskStartedAt:Date.now()})),console.log("task started. stimuli: %o",j.stimuli)},O=e=>{var t,a;const n=Date.now();clearTimeout(at);const o=!(null!==(t=j.stimuli[j.trial-1])&&void 0!==t&&null!==(a=t.trialType)&&void 0!==a&&a.endsWith("nogo"));h(Object(p.a)(Object(p.a)({},j),{},{correct:o,respondedAt:n,trialResponses:[...j.trialResponses,{trial:j.trial,stimuli:j.stimuli[j.trial-1],choice:e,correct:o,respondedAt:n,trialStartedAt:j.trialStartedAt,rt:n-j.trialStartedAt}],step:u>0?"feedback":"fixation"}))};return null===j.trial?Object(D.jsxs)(f.a,{container:!0,direction:"column",spacing:2,alignItems:"center",justifyContent:"flex-start",className:"Text-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:s("gonogoalt.are_you_ready"),escapeHtml:!1,className:"markdown-text"})}),Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(T.a,{variant:"outlined",onClick:()=>g(),children:s("gonogoalt.start")})})]}):Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"column",spacing:2,alignItems:"stretch",justifyContent:"flex-start",className:"gonogoalt-container",children:[Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(_.a,{source:s(l),escapeHtml:!1,className:"markdown-text"})}),Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"center",alignItems:"center",className:"nback-main-container",children:["stimuli"===j.step&&(e=>{if(console.log("renderStimulus: ",e),null===e||void 0===e)return console.log("figure is null, state:",j),Object(D.jsx)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center"});if("icon"===e.type){if(!m[e.name])return Object(D.jsx)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(n.Fragment,{children:Object(D.jsx)(ze.a,{onClick:()=>O(e),className:"single-stimulus single-stimulus-icon",children:Object(D.jsx)($e.a,{fontSize:"large",className:"yellow single-stimulus-icon"})})})});const t=m[e.name];return Object(D.jsx)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(ze.a,{onClick:()=>O(e),className:"single-stimulus single-stimulus-icon",children:Object(D.jsx)(t,{fontSize:"large",className:"yellow single-stimulus-icon"})})})}return"letter"===e.type?Object(D.jsx)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(ze.a,{onClick:()=>O(e),className:"single-stimulus single-stimulus-letter",textAlign:"center",children:Object(D.jsxs)(Z.a,{type:"span",className:"yellow single-stimuli-letter",children:[" ",e.name," "]})})}):void 0})(j.stimuli[j.trial-1]),"feedback"===j.step&&Object(D.jsxs)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:[j.correct&&Object(D.jsx)(ie.a,{fontSize:"large",className:"correct single-stimulus-icon"}),!j.correct&&Object(D.jsx)(se.a,{fontSize:"large",className:"incorrect single-stimulus-icon"})]}),"fixation"===j.step&&Object(D.jsx)(f.a,{item:!0,container:!0,direction:"row",justifyContent:"space-around",alignItems:"center",children:Object(D.jsx)(le.a,{fontSize:"large",className:"single-stimulus-fixation single-stimulus-icon"})})]})]})}function ot(e){b.a.initialize("G-YFD0H08757");const{t:t,i18n:a}=Object(R.a)();let{lang:o,studyId:i}=Object(j.g)(),s=new URLSearchParams(Object(j.f)().search);const l="rtl"===r[o].direction?I:C,c=Object(n.useRef)(!1),[d,u]=Object(n.useState)({subject:void 0,session:void 0,progress:0,finished:!1,loading:!1,view:{},currentViewIndex:0,responses:[],experiment:{}}),[m,k]=Object(n.useState)(void 0),w=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("study.storeData",e),t&&N(),u(t=>Object(p.a)(Object(p.a)({},t),{},{responses:[...t.responses,e],loading:!1}))},A=e=>{const t=e/100;u(e=>Object(p.a)(Object(p.a)({},e),{},{progress:100*(e.currentViewIndex+t)/e.experiment.views.length}))},N=()=>{var e;!(d.view.required||(null===(e=d.view.requiredQuestions)||void 0===e?void 0:e.length)>0)||c.current?(c.current=!1,u(e=>{const t=e.currentViewIndex+1;return t<e.experiment.views.length?Object(p.a)(Object(p.a)({},e),{},{loading:!0,progress:100*t/e.experiment.views.length,view:e.experiment.views[t],currentViewIndex:t}):Object(p.a)(Object(p.a)({},e),{},{progress:100,finished:!0,loading:!1})})):k(t("errors.required"))};return Object(n.useEffect)(()=>{a.changeLanguage(o),fetch(""+"/experiments/".concat(i,".json")).then(e=>e.json()).then(e=>(e=>{console.log("starting experiment",e),console.log("prolific pid : ",s.get("PROLIFIC_PID")),u(t=>Object(p.a)(Object(p.a)({},t),{},{startedAt:Date.now(),experiment:e,currentViewIndex:0,view:e.views[0]})),b.a.send({hitType:"pageview",page:window.location.pathname,title:"window?.title"})})(e))},[i]),Object(D.jsx)(h.a,{theme:l,children:Object(D.jsxs)("div",{dir:r[o].direction,children:[Object(D.jsx)(g.a,{}),Object(D.jsx)(O.a,{variant:"determinate",value:d.progress}),Object(D.jsx)(x.a,{maxWidth:"sm",className:"study-container",children:Object(D.jsxs)(f.a,{container:!0,spacing:2,direction:"column",justifyContent:"flex-start",alignItems:"stretch",className:"study-grid-container",children:[Object(D.jsx)(y.a,{open:void 0!==m,autoHideDuration:5e3,onClose:()=>k(void 0),children:Object(D.jsx)(S.a,{onClose:()=>k(void 0),severity:"error",children:t(m)})}),Object(D.jsx)(f.a,{item:!0,children:Object(D.jsxs)(v.a,{className:"view-container",children:[!d.finished&&d.loading&&Object(D.jsx)("div",{children:t("loading")}),!d.loading&&(e=>{if(d.finished)return Object(D.jsx)(Y,{submission:{PROLIFIC_PID:s.get("PROLIFIC_PID"),STUDY_ID:s.get("STUDY_ID"),SESSION_ID:s.get("SESSION_ID"),startedAt:d.startedAt,responses:d.responses},studyId:i,submissionNote:d.experiment.submissionNote});switch(null===e||void 0===e?void 0:e.type){case"text":return Object(D.jsx)(z,{onStore:w,content:e,onValidate:e=>c.current=e},e.id);case"prolific":return Object(D.jsx)(G,{onStore:w,content:e,onValidate:e=>c.current=e},e.id);case"bart":return Object(D.jsx)(ae,{onStore:w,content:e},e.id);case"gonogo":return Object(D.jsx)(ue,{onStore:w,onProgress:A,content:e},e.id);case"stroop":return Object(D.jsx)(je,{onStore:w,content:e},e.id);case"matrix":return Object(D.jsx)(q,{onStore:w,content:e,onValidate:e=>c.current=e},e.id);case"ultimatum":return Object(D.jsx)(Le,{onStore:w,content:e,onNotification:k},e.id);case"dictator":return Object(D.jsx)(We,{onStore:w,content:e,onNotification:k},e.id);case"taskswitch":return Object(D.jsx)(He,{onStore:w,onProgress:A,content:e,onNotification:k},e.id);case"simplified_taskswitch":return Object(D.jsx)(Ve,{onStore:w,onProgress:A,content:e,onNotification:k},e.id);case"nback":return Object(D.jsx)(tt,{onStore:w,onProgress:A,content:e,onNotification:k},e.id);case"gonogoalt":return Object(D.jsx)(nt,{onStore:w,onProgress:A,content:e,onNotification:k},e.id);default:return Object(D.jsx)("div",{children:"Not Implemented!"})}})(d.view)]})}),!["gonogo","bart","stroop","ultimatum","dictator","taskswitch","simplified_taskswitch","nback","gonogoalt"].includes(d.view.type)&&!d.loading&&Object(D.jsx)(f.a,{item:!0,children:Object(D.jsx)(M,{onNext:N,finished:d.finished,redirectTo:d.experiment.redirectTo})})]})})]})})}function it(){return Object(D.jsx)("div",{className:"about",children:"Hello!"})}a(136);function st(e){const{t:t}=Object(R.a)();let{studyId:a}=Object(j.g)();return Object(D.jsxs)(h.a,{theme:C,children:[Object(D.jsx)(g.a,{}),Object(D.jsx)(x.a,{maxWidth:"sm",className:"study-container",children:Object(D.jsx)(f.a,{item:!0,container:!0,spacing:2,direction:"column",justifyContent:"flex-start",alignItems:"stretch",children:Object(D.jsxs)(v.a,{className:"languages-container",children:[Object(D.jsx)(_.a,{source:t("language_selector.text"),escapeHtml:!1,className:"markdown-text"}),Object(D.jsx)(f.a,{container:!0,direction:"row",spacing:3,justifyContent:"space-around",children:Object.entries(r).map(e=>{let[t,n]=e;return Object(D.jsx)(f.a,{item:!0,xs:4,children:Object(D.jsx)(T.a,{component:m.b,to:"/".concat(a,"/").concat(t),fullWidth:!0,variant:"outlined",children:n.title})},t)})})]})})})]})}function lt(){return Object(n.useEffect)(()=>{b.a.send({hitType:"pageview",page:window.location.pathname})},[window.location.pathname]),Object(D.jsx)(m.a,{basename:"/",children:Object(D.jsxs)(j.c,{children:[Object(D.jsx)(j.a,{exact:!0,path:"/",children:Object(D.jsx)(it,{})}),Object(D.jsx)(j.a,{path:"/:studyId/:lang",children:Object(D.jsx)(ot,{})}),Object(D.jsx)(j.a,{path:"/:studyId",children:Object(D.jsx)(st,{})}),Object(D.jsx)(j.a,{path:"/about",children:Object(D.jsx)(it,{})})]})})}var ct=a(364);b.a.initialize("G-YFD0H08757"),i.a.render(Object(D.jsx)(n.Suspense,{fallback:"loading",children:Object(D.jsx)(ct.a,{i18n:d,children:Object(D.jsx)(lt,{})})}),document.getElementById("root"))}},[[291,1,2]]]);
//# sourceMappingURL=main.c1bb87c6.chunk.js.map