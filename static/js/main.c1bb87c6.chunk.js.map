{"version":3,"sources":["utils/i18n.js","utils/theme.js","navigation.js","utils/countries.js","text.js","prolific.js","matrix.js","submission.js","bart.js","utils/random.js","gonogo.js","utils/shuffle.js","stroop.js","components/allotmentBox.js","ultimatum.js","dictator.js","taskswitch.js","simplified_taskswitch.js","nback.js","gonogoalt.js","study.js","about.js","language_selector.js","router.js","index.js"],"names":["languages","title","direction","i18n","use","Backend","initReactI18next","init","lng","fallbackLng","debug","process","keySeparator","backend","loadPath","darkTheme","createMuiTheme","palette","type","primary","main","secondary","typography","fontFamily","join","rtlDarkTheme","ltrTheme","responsiveFontSizes","rtlTheme","Navigation","_ref","finished","redirectTo","onNext","t","useTranslation","_jsx","Grid","container","justifyContent","children","_jsxs","item","Button","variant","color","onClick","href","countries","code","label","phone","suggested","Text","content","onStore","onValidate","response","useRef","state","setState","useState","value","useEffect","_response$current","current","handleChange","e","_objectSpread","resp","console","log","undefined","length","CountryAutoComplete","Autocomplete","id","options","autoHighlight","onChange","v","getOptionLabel","option","noOptionsText","renderOption","Fragment","isoCode","String","fromCodePoint","toUpperCase","replace","char","charCodeAt","renderInput","params","TextField","inputProps","autoComplete","className","spacing","alignItems","Markdown","source","text","escapeHtml","instruction","placeholder","fullWidth","target","Prolific","_content$content","query","URLSearchParams","useLocation","search","_content$paramNameAsC","fieldContent","getUrlContent","paramNameAsContent","get","defaultValue","ValueLabelComponent","props","open","Tooltip","enterTouchDelay","placement","arrow","Matrix","questions","choices","slider","showMidMark","values","Array","from","requiredQuestions","window","scrollTo","top","behavior","renderSlider","index","xs","Slider","valueLabelFormat","onChangeCommitted","step","min","max","valueLabelDisplay","justify","Math","floor","n_null","filter","i","includes","renderQuestion","q","RadioGroup","name","concat","map","c","j","renderChoice","FormControlLabel","control","Radio","labelPlacement","reduce","q1","q2","Divider","random","toString","Submission","submission","studyId","submissionNote","submissionApi","submissionCode","isProlific","_resp$view","view","pid","findProlificId","resps","responses","ReactGA","event","category","action","fetch","method","mode","body","JSON","stringify","headers","then","json","respJson","catch","error","BART","reward","maxPumps","safePumps","trials","pumps","trial","totalScore","trialResponses","dialogIsOpen","taskStartedAt","Date","now","showTooltip","shuffle","a","randomNumbers","_","document","style","documentElement","taskFinishedAt","taskDuration","newTrial","cashed","randomNumber","score","result","balloonSize","rad","sqrt","PI","ceil","Dialog","onClose","disableBackdropClick","disableEscapeKeyDown","DialogTitle","DialogContent","DialogContentText","r","b","DialogActions","autoFocus","size","Typography","alignContent","cursor","width","height","transition","onInflate","isSafe","randomIndex","splice","onCashIn","sample","items","shuffled","slice","rnd","clock","GoNoGo","onProgress","stimuliDuration","fixationDuration","timeoutsBeforeReset","feedbackDuration","correct","stimuli","trialStartedAt","respondedAt","timeouts","handleKeyPress","key","keyCode","startTask","choice","empty","startsWith","go","nogo","handleResponse","addEventListener","removeEventListener","stim","total","keys","leftGo","left","clearTimeout","setTimeout","_correct","endsWith","renderStimulus","stimulus","Star","fontSize","Circle","trialType","orientation","flexItem","Correct","Incorrect","Add","Stroop","rule","colors","words","randomizeTrials","randomizeChoices","stimulusDuration","randomize","_trials","_t","Object","assign","rt","choiceWord","choiceColor","split","stimulusWord","stimulusColor","word","CorrectIcon","IncorrectIcon","renderChoices","ItemTypes","useStyles","makeStyles","theme","root","flexGrow","paper","padding","medium","large","grey","getContrastText","backgroundColor","tealDark","teal","blueG","blueGrey","height100","language","personsLangPrefix","RepositoryBox","memo","amount","onDrop","accept","person","personsPrefix","lang","useParams","classes","canDrop","isOver","drop","useDrop","collect","monitor","tokensList","push","MonetizedToken","boxName","Paper","ref","elevation","OpponentInfoBar","Avatar","getPersonKey","_ref2","_Fragment","avatar","alt","field1","src","component","field2","field3","_ref3","isDragging","drag","preview","useDrag","DragPreviewImage","connect","opacity","MonetizationOnIcon","Ultimatum","onNotification","tokens","useOpponentTypes","opponentTypes","dialogOptionalText","persons","boxes","setBoxes","accepts","shuffledPersons","setShuffledPersons","canFinishTrial","forEach","box","handleDrop","useCallback","fromBox","destBox","filterredPersons","filterPersonsByTags","tags","checkResult","inclue","checkPersonHasTags","_shuffledPersons$pers","playerShare","find","accepted","personIndex","minAcceptable","opponentShare","opponent","isTouchScreen","navigator","maxTouchPoints","msMaxTouchPoints","dndBackend","TouchBackend","HTML5Backend","disableTypography","decision","DndProvider","enableMouseEvents","finishTrialAction","Dictator","collectionState","matchmakingCompleted","setMatchmakingCompleted","matchmakingTimer","setMatchmakingTimer","timer","Container","display","flexDirection","minHeight","Box","CircularProgress","mt","paddingBottom","disabled","TaskSwitch","bottom","getCorrect","selectable","arguments","renderStimuliRow","pos","renderStimuli","SimplifiedTaskSwitch","stimuliProperties","figure","typeA","figureA","colorA","getCrorrectFromStimuli","draw","NBack","nback","iconFigures","star","circle","triangle","Triangle","rectangle","Rectangle","hand","Hand","ball","Ball","watch","Watch","school","School","cup","Cup","figureIndex","figureTotal","_state$stimuli","_state$stimuli2","selected","_state$stimuli3","_state$stimuli4","Block","FigureCompoentnt","textAlign","GoNoGoAlt","names","_state$stimuli$trialT","_state$stimuli2$trial","Study","initialize","responseIsValid","subject","session","progress","loading","currentViewIndex","experiment","notification","setNotification","storeData","data","autoNext","prev","updateViewProgress","currentViewProgressPct","currentViewProgress","views","_state$view$requiredQ","required","nextViewIndex","changeLanguage","startedAt","send","hitType","page","location","pathname","startExperiment","ThemeProvider","dir","CssBaseline","LinearProgress","maxWidth","Snackbar","autoHideDuration","Alert","severity","PROLIFIC_PID","STUDY_ID","SESSION_ID","renderView","About","LanguageSelector","entries","val","Link","to","AppRouter","Router","basename","Switch","Route","exact","path","ReactDOM","render","Suspense","fallback","I18nextProvider","getElementById"],"mappings":"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","file":"static/js/main.c1bb87c6.chunk.js","sourcesContent":["import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport Backend from \"i18next-xhr-backend\";\n\nexport const languages = {\n  'en': {title: 'English', direction: 'ltr'},\n  'fa': {title: '', direction: 'rtl'},\n  'ar': {title: '', direction: 'rtl'}\n}\n\n\ni18n\n  .use(Backend)\n  .use(initReactI18next)\n  .init({\n/*    \n    resources: {\n      en: { translation: en_locale },\n      fa: { translation: fa_locale },\n    },\n*/\n    lng: \"en\",\n    fallbackLng: 'en',\n    debug: process.env.NODE_ENV !== 'production',\n    keySeparator: false,\n    backend: {\n      loadPath: process.env.PUBLIC_URL + '/locales/{{lng}}.json',\n    },\n  });\n\nexport default i18n;","import {createMuiTheme, responsiveFontSizes} from '@material-ui/core';\n\nconst darkTheme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    primary: {\n      main: '#039be5'\n    },\n    secondary: {\n      main: '#f06292'\n    }\n  },\n  typography: {\n    fontFamily: [\n      'Vazir',\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'Roboto',\n      '\"Helvetica Neue\"',\n      'Arial',\n      'sans-serif',\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"',\n    ].join(',')\n  }\n});\n\nconst rtlDarkTheme = createMuiTheme({\n  direction: 'rtl',\n  palette: {\n    type: 'dark',\n    primary: {\n      main: '#039be5'\n    },\n    secondary: {\n      main: '#f06292'\n    }\n  },\n  typography: {\n    fontFamily: [\n      'Vazir',\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'Roboto',\n      '\"Helvetica Neue\"',\n      'Arial',\n      'sans-serif',\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"',\n    ].join(',')\n  }\n})\n\nexport const ltrTheme = responsiveFontSizes(darkTheme);\nexport const rtlTheme = responsiveFontSizes(rtlDarkTheme);\n","import React from 'react';\n\nimport {Button, Grid} from '@material-ui/core';\n\nimport {useTranslation} from 'react-i18next';\n\nexport default function Navigation({finished, redirectTo, onNext}) {\n\n  const {t} = useTranslation();\n\n  return (\n    <Grid container direction='row' justifyContent='flex-end'>\n      <Grid item>\n        {!finished && \n          <Button variant=\"contained\" color=\"primary\" onClick={onNext}>{t('next')}</Button>\n        }\n        {finished && redirectTo &&\n          <Button variant=\"contained\" color=\"primary\" href={redirectTo}>{t('finish_and_redirect')}</Button>        \n        }\n      </Grid>\n\n    </Grid>\n  );\n}","// From https://bitbucket.org/atlassian/atlaskit-mk-2/raw/4ad0e56649c3e6c973e226b7efaeb28cb240ccb0/packages/core/select/src/data/countries.js\nconst countries = [\n  { code: 'AD', label: 'Andorra', phone: '376' },\n  { code: 'AE', label: 'United Arab Emirates', phone: '971' },\n  { code: 'AF', label: 'Afghanistan', phone: '93' },\n  { code: 'AG', label: 'Antigua and Barbuda', phone: '1-268' },\n  { code: 'AI', label: 'Anguilla', phone: '1-264' },\n  { code: 'AL', label: 'Albania', phone: '355' },\n  { code: 'AM', label: 'Armenia', phone: '374' },\n  { code: 'AO', label: 'Angola', phone: '244' },\n  { code: 'AQ', label: 'Antarctica', phone: '672' },\n  { code: 'AR', label: 'Argentina', phone: '54' },\n  { code: 'AS', label: 'American Samoa', phone: '1-684' },\n  { code: 'AT', label: 'Austria', phone: '43' },\n  { code: 'AU', label: 'Australia', phone: '61', suggested: true },\n  { code: 'AW', label: 'Aruba', phone: '297' },\n  { code: 'AX', label: 'Alland Islands', phone: '358' },\n  { code: 'AZ', label: 'Azerbaijan', phone: '994' },\n  { code: 'BA', label: 'Bosnia and Herzegovina', phone: '387' },\n  { code: 'BB', label: 'Barbados', phone: '1-246' },\n  { code: 'BD', label: 'Bangladesh', phone: '880' },\n  { code: 'BE', label: 'Belgium', phone: '32' },\n  { code: 'BF', label: 'Burkina Faso', phone: '226' },\n  { code: 'BG', label: 'Bulgaria', phone: '359' },\n  { code: 'BH', label: 'Bahrain', phone: '973' },\n  { code: 'BI', label: 'Burundi', phone: '257' },\n  { code: 'BJ', label: 'Benin', phone: '229' },\n  { code: 'BL', label: 'Saint Barthelemy', phone: '590' },\n  { code: 'BM', label: 'Bermuda', phone: '1-441' },\n  { code: 'BN', label: 'Brunei Darussalam', phone: '673' },\n  { code: 'BO', label: 'Bolivia', phone: '591' },\n  { code: 'BR', label: 'Brazil', phone: '55' },\n  { code: 'BS', label: 'Bahamas', phone: '1-242' },\n  { code: 'BT', label: 'Bhutan', phone: '975' },\n  { code: 'BV', label: 'Bouvet Island', phone: '47' },\n  { code: 'BW', label: 'Botswana', phone: '267' },\n  { code: 'BY', label: 'Belarus', phone: '375' },\n  { code: 'BZ', label: 'Belize', phone: '501' },\n  { code: 'CA', label: 'Canada', phone: '1', suggested: true },\n  { code: 'CC', label: 'Cocos (Keeling) Islands', phone: '61' },\n  { code: 'CD', label: 'Congo, Democratic Republic of the', phone: '243' },\n  { code: 'CF', label: 'Central African Republic', phone: '236' },\n  { code: 'CG', label: 'Congo, Republic of the', phone: '242' },\n  { code: 'CH', label: 'Switzerland', phone: '41' },\n  { code: 'CI', label: \"Cote d'Ivoire\", phone: '225' },\n  { code: 'CK', label: 'Cook Islands', phone: '682' },\n  { code: 'CL', label: 'Chile', phone: '56' },\n  { code: 'CM', label: 'Cameroon', phone: '237' },\n  { code: 'CN', label: 'China', phone: '86' },\n  { code: 'CO', label: 'Colombia', phone: '57' },\n  { code: 'CR', label: 'Costa Rica', phone: '506' },\n  { code: 'CU', label: 'Cuba', phone: '53' },\n  { code: 'CV', label: 'Cape Verde', phone: '238' },\n  { code: 'CW', label: 'Curacao', phone: '599' },\n  { code: 'CX', label: 'Christmas Island', phone: '61' },\n  { code: 'CY', label: 'Cyprus', phone: '357' },\n  { code: 'CZ', label: 'Czech Republic', phone: '420' },\n  { code: 'DE', label: 'Germany', phone: '49', suggested: true },\n  { code: 'DJ', label: 'Djibouti', phone: '253' },\n  { code: 'DK', label: 'Denmark', phone: '45' },\n  { code: 'DM', label: 'Dominica', phone: '1-767' },\n  { code: 'DO', label: 'Dominican Republic', phone: '1-809' },\n  { code: 'DZ', label: 'Algeria', phone: '213' },\n  { code: 'EC', label: 'Ecuador', phone: '593' },\n  { code: 'EE', label: 'Estonia', phone: '372' },\n  { code: 'EG', label: 'Egypt', phone: '20' },\n  { code: 'EH', label: 'Western Sahara', phone: '212' },\n  { code: 'ER', label: 'Eritrea', phone: '291' },\n  { code: 'ES', label: 'Spain', phone: '34' },\n  { code: 'ET', label: 'Ethiopia', phone: '251' },\n  { code: 'FI', label: 'Finland', phone: '358' },\n  { code: 'FJ', label: 'Fiji', phone: '679' },\n  { code: 'FK', label: 'Falkland Islands (Malvinas)', phone: '500' },\n  { code: 'FM', label: 'Micronesia, Federated States of', phone: '691' },\n  { code: 'FO', label: 'Faroe Islands', phone: '298' },\n  { code: 'FR', label: 'France', phone: '33', suggested: true },\n  { code: 'GA', label: 'Gabon', phone: '241' },\n  { code: 'GB', label: 'United Kingdom', phone: '44' },\n  { code: 'GD', label: 'Grenada', phone: '1-473' },\n  { code: 'GE', label: 'Georgia', phone: '995' },\n  { code: 'GF', label: 'French Guiana', phone: '594' },\n  { code: 'GG', label: 'Guernsey', phone: '44' },\n  { code: 'GH', label: 'Ghana', phone: '233' },\n  { code: 'GI', label: 'Gibraltar', phone: '350' },\n  { code: 'GL', label: 'Greenland', phone: '299' },\n  { code: 'GM', label: 'Gambia', phone: '220' },\n  { code: 'GN', label: 'Guinea', phone: '224' },\n  { code: 'GP', label: 'Guadeloupe', phone: '590' },\n  { code: 'GQ', label: 'Equatorial Guinea', phone: '240' },\n  { code: 'GR', label: 'Greece', phone: '30' },\n  { code: 'GS', label: 'South Georgia and the South Sandwich Islands', phone: '500' },\n  { code: 'GT', label: 'Guatemala', phone: '502' },\n  { code: 'GU', label: 'Guam', phone: '1-671' },\n  { code: 'GW', label: 'Guinea-Bissau', phone: '245' },\n  { code: 'GY', label: 'Guyana', phone: '592' },\n  { code: 'HK', label: 'Hong Kong', phone: '852' },\n  { code: 'HM', label: 'Heard Island and McDonald Islands', phone: '672' },\n  { code: 'HN', label: 'Honduras', phone: '504' },\n  { code: 'HR', label: 'Croatia', phone: '385' },\n  { code: 'HT', label: 'Haiti', phone: '509' },\n  { code: 'HU', label: 'Hungary', phone: '36' },\n  { code: 'ID', label: 'Indonesia', phone: '62' },\n  { code: 'IE', label: 'Ireland', phone: '353' },\n  { code: 'IL', label: 'Israel', phone: '972' },\n  { code: 'IM', label: 'Isle of Man', phone: '44' },\n  { code: 'IN', label: 'India', phone: '91' },\n  { code: 'IO', label: 'British Indian Ocean Territory', phone: '246' },\n  { code: 'IQ', label: 'Iraq', phone: '964' },\n  { code: 'IR', label: 'Iran, Islamic Republic of', phone: '98' },\n  { code: 'IS', label: 'Iceland', phone: '354' },\n  { code: 'IT', label: 'Italy', phone: '39' },\n  { code: 'JE', label: 'Jersey', phone: '44' },\n  { code: 'JM', label: 'Jamaica', phone: '1-876' },\n  { code: 'JO', label: 'Jordan', phone: '962' },\n  { code: 'JP', label: 'Japan', phone: '81', suggested: true },\n  { code: 'KE', label: 'Kenya', phone: '254' },\n  { code: 'KG', label: 'Kyrgyzstan', phone: '996' },\n  { code: 'KH', label: 'Cambodia', phone: '855' },\n  { code: 'KI', label: 'Kiribati', phone: '686' },\n  { code: 'KM', label: 'Comoros', phone: '269' },\n  { code: 'KN', label: 'Saint Kitts and Nevis', phone: '1-869' },\n  { code: 'KP', label: \"Korea, Democratic People's Republic of\", phone: '850' },\n  { code: 'KR', label: 'Korea, Republic of', phone: '82' },\n  { code: 'KW', label: 'Kuwait', phone: '965' },\n  { code: 'KY', label: 'Cayman Islands', phone: '1-345' },\n  { code: 'KZ', label: 'Kazakhstan', phone: '7' },\n  { code: 'LA', label: \"Lao People's Democratic Republic\", phone: '856' },\n  { code: 'LB', label: 'Lebanon', phone: '961' },\n  { code: 'LC', label: 'Saint Lucia', phone: '1-758' },\n  { code: 'LI', label: 'Liechtenstein', phone: '423' },\n  { code: 'LK', label: 'Sri Lanka', phone: '94' },\n  { code: 'LR', label: 'Liberia', phone: '231' },\n  { code: 'LS', label: 'Lesotho', phone: '266' },\n  { code: 'LT', label: 'Lithuania', phone: '370' },\n  { code: 'LU', label: 'Luxembourg', phone: '352' },\n  { code: 'LV', label: 'Latvia', phone: '371' },\n  { code: 'LY', label: 'Libya', phone: '218' },\n  { code: 'MA', label: 'Morocco', phone: '212' },\n  { code: 'MC', label: 'Monaco', phone: '377' },\n  { code: 'MD', label: 'Moldova, Republic of', phone: '373' },\n  { code: 'ME', label: 'Montenegro', phone: '382' },\n  { code: 'MF', label: 'Saint Martin (French part)', phone: '590' },\n  { code: 'MG', label: 'Madagascar', phone: '261' },\n  { code: 'MH', label: 'Marshall Islands', phone: '692' },\n  { code: 'MK', label: 'Macedonia, the Former Yugoslav Republic of', phone: '389' },\n  { code: 'ML', label: 'Mali', phone: '223' },\n  { code: 'MM', label: 'Myanmar', phone: '95' },\n  { code: 'MN', label: 'Mongolia', phone: '976' },\n  { code: 'MO', label: 'Macao', phone: '853' },\n  { code: 'MP', label: 'Northern Mariana Islands', phone: '1-670' },\n  { code: 'MQ', label: 'Martinique', phone: '596' },\n  { code: 'MR', label: 'Mauritania', phone: '222' },\n  { code: 'MS', label: 'Montserrat', phone: '1-664' },\n  { code: 'MT', label: 'Malta', phone: '356' },\n  { code: 'MU', label: 'Mauritius', phone: '230' },\n  { code: 'MV', label: 'Maldives', phone: '960' },\n  { code: 'MW', label: 'Malawi', phone: '265' },\n  { code: 'MX', label: 'Mexico', phone: '52' },\n  { code: 'MY', label: 'Malaysia', phone: '60' },\n  { code: 'MZ', label: 'Mozambique', phone: '258' },\n  { code: 'NA', label: 'Namibia', phone: '264' },\n  { code: 'NC', label: 'New Caledonia', phone: '687' },\n  { code: 'NE', label: 'Niger', phone: '227' },\n  { code: 'NF', label: 'Norfolk Island', phone: '672' },\n  { code: 'NG', label: 'Nigeria', phone: '234' },\n  { code: 'NI', label: 'Nicaragua', phone: '505' },\n  { code: 'NL', label: 'Netherlands', phone: '31' },\n  { code: 'NO', label: 'Norway', phone: '47' },\n  { code: 'NP', label: 'Nepal', phone: '977' },\n  { code: 'NR', label: 'Nauru', phone: '674' },\n  { code: 'NU', label: 'Niue', phone: '683' },\n  { code: 'NZ', label: 'New Zealand', phone: '64' },\n  { code: 'OM', label: 'Oman', phone: '968' },\n  { code: 'PA', label: 'Panama', phone: '507' },\n  { code: 'PE', label: 'Peru', phone: '51' },\n  { code: 'PF', label: 'French Polynesia', phone: '689' },\n  { code: 'PG', label: 'Papua New Guinea', phone: '675' },\n  { code: 'PH', label: 'Philippines', phone: '63' },\n  { code: 'PK', label: 'Pakistan', phone: '92' },\n  { code: 'PL', label: 'Poland', phone: '48' },\n  { code: 'PM', label: 'Saint Pierre and Miquelon', phone: '508' },\n  { code: 'PN', label: 'Pitcairn', phone: '870' },\n  { code: 'PR', label: 'Puerto Rico', phone: '1' },\n  { code: 'PS', label: 'Palestine, State of', phone: '970' },\n  { code: 'PT', label: 'Portugal', phone: '351' },\n  { code: 'PW', label: 'Palau', phone: '680' },\n  { code: 'PY', label: 'Paraguay', phone: '595' },\n  { code: 'QA', label: 'Qatar', phone: '974' },\n  { code: 'RE', label: 'Reunion', phone: '262' },\n  { code: 'RO', label: 'Romania', phone: '40' },\n  { code: 'RS', label: 'Serbia', phone: '381' },\n  { code: 'RU', label: 'Russian Federation', phone: '7' },\n  { code: 'RW', label: 'Rwanda', phone: '250' },\n  { code: 'SA', label: 'Saudi Arabia', phone: '966' },\n  { code: 'SB', label: 'Solomon Islands', phone: '677' },\n  { code: 'SC', label: 'Seychelles', phone: '248' },\n  { code: 'SD', label: 'Sudan', phone: '249' },\n  { code: 'SE', label: 'Sweden', phone: '46' },\n  { code: 'SG', label: 'Singapore', phone: '65' },\n  { code: 'SH', label: 'Saint Helena', phone: '290' },\n  { code: 'SI', label: 'Slovenia', phone: '386' },\n  { code: 'SJ', label: 'Svalbard and Jan Mayen', phone: '47' },\n  { code: 'SK', label: 'Slovakia', phone: '421' },\n  { code: 'SL', label: 'Sierra Leone', phone: '232' },\n  { code: 'SM', label: 'San Marino', phone: '378' },\n  { code: 'SN', label: 'Senegal', phone: '221' },\n  { code: 'SO', label: 'Somalia', phone: '252' },\n  { code: 'SR', label: 'Suriname', phone: '597' },\n  { code: 'SS', label: 'South Sudan', phone: '211' },\n  { code: 'ST', label: 'Sao Tome and Principe', phone: '239' },\n  { code: 'SV', label: 'El Salvador', phone: '503' },\n  { code: 'SX', label: 'Sint Maarten (Dutch part)', phone: '1-721' },\n  { code: 'SY', label: 'Syrian Arab Republic', phone: '963' },\n  { code: 'SZ', label: 'Swaziland', phone: '268' },\n  { code: 'TC', label: 'Turks and Caicos Islands', phone: '1-649' },\n  { code: 'TD', label: 'Chad', phone: '235' },\n  { code: 'TF', label: 'French Southern Territories', phone: '262' },\n  { code: 'TG', label: 'Togo', phone: '228' },\n  { code: 'TH', label: 'Thailand', phone: '66' },\n  { code: 'TJ', label: 'Tajikistan', phone: '992' },\n  { code: 'TK', label: 'Tokelau', phone: '690' },\n  { code: 'TL', label: 'Timor-Leste', phone: '670' },\n  { code: 'TM', label: 'Turkmenistan', phone: '993' },\n  { code: 'TN', label: 'Tunisia', phone: '216' },\n  { code: 'TO', label: 'Tonga', phone: '676' },\n  { code: 'TR', label: 'Turkey', phone: '90' },\n  { code: 'TT', label: 'Trinidad and Tobago', phone: '1-868' },\n  { code: 'TV', label: 'Tuvalu', phone: '688' },\n  { code: 'TW', label: 'Taiwan, Province of China', phone: '886' },\n  { code: 'TZ', label: 'United Republic of Tanzania', phone: '255' },\n  { code: 'UA', label: 'Ukraine', phone: '380' },\n  { code: 'UG', label: 'Uganda', phone: '256' },\n  { code: 'US', label: 'United States', phone: '1', suggested: true },\n  { code: 'UY', label: 'Uruguay', phone: '598' },\n  { code: 'UZ', label: 'Uzbekistan', phone: '998' },\n  { code: 'VA', label: 'Holy See (Vatican City State)', phone: '379' },\n  { code: 'VC', label: 'Saint Vincent and the Grenadines', phone: '1-784' },\n  { code: 'VE', label: 'Venezuela', phone: '58' },\n  { code: 'VG', label: 'British Virgin Islands', phone: '1-284' },\n  { code: 'VI', label: 'US Virgin Islands', phone: '1-340' },\n  { code: 'VN', label: 'Vietnam', phone: '84' },\n  { code: 'VU', label: 'Vanuatu', phone: '678' },\n  { code: 'WF', label: 'Wallis and Futuna', phone: '681' },\n  { code: 'WS', label: 'Samoa', phone: '685' },\n  { code: 'XK', label: 'Kosovo', phone: '383' },\n  { code: 'YE', label: 'Yemen', phone: '967' },\n  { code: 'YT', label: 'Mayotte', phone: '262' },\n  { code: 'ZA', label: 'South Africa', phone: '27' },\n  { code: 'ZM', label: 'Zambia', phone: '260' },\n  { code: 'ZW', label: 'Zimbabwe', phone: '263' },\n];\n\nexport default countries;","import React, { useRef, useEffect, useState, Fragment } from 'react';\nimport { TextField, Grid } from '@material-ui/core';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { useTranslation } from 'react-i18next';\nimport Markdown from 'react-markdown/with-html';\n\nimport countries from './utils/countries';\n\n//css\nimport \"./text.css\";\n\nexport default function Text({content, onStore, onValidate}) {\n  //props: title, text, placeholder, help, required, pattern, instruction, autoComplete\n  //i18n: text.choose_a_country, text.no_options\n\n  const { t } = useTranslation();\n\n  const response = useRef(null);\n  const [state, setState] = useState({\n    value: null\n  });\n\n\n  useEffect(() => {\n    return () => {\n      onStore({\n        'view': content,\n        'response': response.current?.code || response.current\n      })\n    };\n  },[]);\n\n\n  const handleChange = (e, value) => {\n    response.current = value\n    setState({...state, value: value});\n\n    const resp = value?.code || response.current\n    console.log(resp)\n\n    onValidate(resp !== undefined && resp.length>0);\n  }\n\n\n  /**\n   * Componenet to select a country from a dropdown list.\n   * Enable this feature by adding `autoComplete:'coutries'` to the view.\n   */\n  const CountryAutoComplete = () => {\n\n    // ISO 3166-1 alpha-2 (No support for IE 11)\n    const countryToFlag = (isoCode) => {\n      return typeof String.fromCodePoint !== 'undefined'\n        ? isoCode\n            .toUpperCase()\n            .replace(/./g, (char) => String.fromCodePoint(char.charCodeAt(0) + 127397))\n        : isoCode;\n    }\n\n    return (\n      <Autocomplete\n        id=\"country-select\"\n        options={countries}\n        autoHighlight\n        onChange={(e, v) => handleChange(e, v)}\n        value={state.value}\n        getOptionLabel={(option) => option.label}\n        noOptionsText={t('text.no_options')}\n        renderOption={(option) => (\n          <Fragment>\n            <span>{countryToFlag(option.code)}</span> {option.label}\n          </Fragment>\n        )}\n        renderInput={(params) => (\n          <TextField\n            {...params}\n            label={t('text.choose_a_country')}\n            variant=\"outlined\"\n            inputProps={{\n              ...params.inputProps,\n              autoComplete: 'new-password', // disable autocomplete and autofill\n            }}\n            className='country-select'\n          />\n        )}\n      />\n    );\n  }\n\n\n  return (\n    <Grid container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='Text-container'>\n      <Grid item>\n        <Markdown source={t(content.text)} escapeHtml={false} className='markdown-text' />\n      </Grid>\n\n      {!(content.instruction || false) &&\n        <Grid item>\n          {content.autoComplete === 'countries' && <CountryAutoComplete />}\n          {!content.autoComplete && <TextField label={t(content.placeholder)} variant=\"filled\" fullWidth onChange={(e) => handleChange(e, e.target.value)} />}\n        </Grid>\n      }\n    </Grid>\n  );\n}\n","import React, { useRef, useEffect, useState } from 'react';\nimport { TextField, Grid } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport Markdown from 'react-markdown/with-html';\nimport { useLocation } from 'react-router-dom';\n\n//css\nimport \"./text.css\";\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nexport default function Prolific({content, onStore, onValidate}) {\n  //props: title, text, placeholder, help, required, pattern, instruction, autoComplete\n  //i18n: text.choose_a_country, text.no_options\n\n  const { t } = useTranslation();\n  let query = useQuery();\n  const response = useRef(null);\n  const [state, setState] = useState({\n    value: null\n  });\n\n\n  useEffect(() => {\n    return () => {\n      onStore({\n        'view': content,\n        'response': response.current?.code || response.current\n      })\n    };\n  },[response]);\n\n\n  const handleChange = (e, value) => {\n    response.current = value\n    setState({...state, value: value});\n\n    const resp = value?.code || response.current\n    console.log(resp)\n\n    onValidate(resp !== undefined && resp.length>0);\n  }\n\n  var fieldContent = null;\n  if(content?.getUrlContent === true){\n    if(content?.paramNameAsContent !== null && content.paramNameAsContent?.length>0){\n      console.log(content?.paramNameAsContent);\n      fieldContent = query.get(content.paramNameAsContent);\n      console.log(fieldContent);\n    }\n  }else if(content?.content !== null && content?.content?.length>0){\n    fieldContent = content.content;\n  }\n  // run for the first time or s.t like that\n  if(state.value==null){\n    if(fieldContent!==null && fieldContent.length>0){\n      setState({ value : fieldContent});\n      return;\n    }\n  }\n\n  return (\n    <Grid container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='Text-container'>\n      <Grid item>\n        <Markdown source={t(content.text)} escapeHtml={false} className='markdown-text' />\n      </Grid>\n\n      {!(content.instruction || false) &&\n        <Grid item>\n          <TextField label={t(content.placeholder)} defaultValue={fieldContent!=null ? fieldContent : undefined} variant=\"filled\" fullWidth onChange={(e) => handleChange(e, e.target.value)} />\n        </Grid>\n      }\n    </Grid>\n  );\n}\n","import React, {useEffect, useRef} from 'react';\n\nimport {Grid, Radio, Tooltip, RadioGroup, FormControlLabel, Divider, Slider} from '@material-ui/core';\n\nimport Markdown from 'react-markdown/with-html';\nimport {useTranslation} from 'react-i18next';\n\nfunction ValueLabelComponent(props) {\n  const { children, open, value } = props;\n\n  return (\n    <Tooltip open={open} enterTouchDelay={0} placement=\"top\" title={value} arrow>\n      {children}\n    </Tooltip>\n  );\n}\n\nexport default function Matrix({content, onStore, onValidate}) {\n\n  const {t} = useTranslation();\n  const {questions, choices, direction, text, slider, showMidMark } = content;\n\n  const response = useRef({\n    values: Array.from({ length: questions.length })\n  });\n\n  useEffect(() => {\n    if (content.requiredQuestions.length>0)\n      onValidate(false);\n    \n    window.scrollTo({top: 0, behavior: \"smooth\"});\n    return () => {\n      onStore({\n        'view': content,\n        'response': response.current\n      })\n    };\n  },[]);\n\n  const renderSlider = (choices, index) => {\n    return (\n      <Grid item container xs key={index} className='matrix-slider'>\n        <Slider\n          defaultValue={response.current.values[index]}\n          value={response.current.values[index]}\n          valueLabelFormat={(v) => t(choices[v-1])}\n          aria-labelledby={\"question\"+index}\n          ValueLabelComponent={ValueLabelComponent}\n          onChangeCommitted={(e, value) => handleChange(e, index, value)}\n          step={1}\n          min={1}\n          max={choices.length}\n          valueLabelDisplay=\"on\"\n        />\n        <Grid container direction='row' alignItems='stretch' justify='space-between'>\n          <Grid item className='mark'><em>{t(choices[0])}</em></Grid>\n          {showMidMark && <Grid item className='mark'><em>{t(choices[Math.floor(choices.length/2)])}</em></Grid>}\n          <Grid item className='mark'><em>{t(choices[choices.length-1])}</em></Grid>\n        </Grid>\n\n      </Grid>\n    )\n  }\n\n  const renderChoice = (c, index) => {\n    return (\n      <Grid item xs key={index}>\n        <FormControlLabel\n          control={<Radio />}\n          value={c}\n          label={t(c)}\n          labelPlacement={direction==='vertical'?'end':'bottom'}\n        />\n      </Grid>\n    )\n  }\n\n  const handleChange = (e, index, value) => {\n    response.current.values[index] = e.target.value || value;\n\n    console.log(response.current.values[index]);\n    const n_null = response.current.values.filter((v,i) => {\n      //console.log(v,i)\n      return content.requiredQuestions.includes(i) && (v === null || v===undefined)\n    }).length\n    //console.log('n_null', n_null)\n    onValidate(n_null === 0)\n  }\n\n  const renderQuestion = (q, index) => {\n    return (\n      <Grid item key={index} className='matrix-question-container'>\n      <Markdown source={t(q)} escapeHtml={false} className='markdown-text' />\n      {slider && renderSlider(choices, index)}\n      {!slider && \n        <RadioGroup name={`q${index}`} value={response.current.values[index]} onChange={(e) => handleChange(e, index)}>\n        <Grid container \n          direction={direction==='vertical'?'column':'row'} \n          alignItems='flex-start' \n          justify=\"space-between\">\n          {choices.map((c, j) => renderChoice(c, j))}\n        </Grid>\n        </RadioGroup>\n      }\n      </Grid>\n    ) \n  }\n\n  return (\n    <Grid container direction='column' alignItems='stretch' justifyContent='flex-start' className='Text-container'>\n      {text && \n      <Grid item>\n        <Markdown source={t(text)} escapeHtml={false} className='markdown-text' />\n      </Grid>\n      }\n      {questions\n        .map((q,i) => renderQuestion(q,i))\n        .reduce((q1, q2) => [q1,<Divider key={Math.random().toString()} className='matrix-spacer'/>,q2])}\n    </Grid>\n  );\n}\n","import React, { useEffect, useState } from 'react';\n\nimport {Grid} from '@material-ui/core';\nimport Markdown from 'react-markdown/with-html';\nimport {useTranslation} from 'react-i18next';\nimport ReactGA from \"react-ga4\";\n\nexport default function Submission({submission, studyId, submissionNote}) {\n\n  const {t} = useTranslation();\n  const submissionApi = `https://server.cut.social/api/v1/${studyId}/responses`;\n  // const jamaspSumissionApi = `https://jamasp-fitbit-oauth-service-730427234084.us-central1.run.app/`;\n\n  const [state, setState] = useState({\n    submissionCode: undefined,\n    debug: process.env.NODE_ENV !== 'production',\n  });\n\n  function isProlific(resp) {\n    if(resp && resp?.view?.id===\"prolific ID\")\n      return true;\n    return false;\n  }\n\n  const findProlificId = () => {\n    let pid = null;\n    const resps = submission.responses.filter(isProlific);\n    if(resps.length>0)\n      pid=resps[0].response;\n    return pid;\n  }\n\n  // submit and set submissionCode\n  useEffect(() => {\n    if (state.submissionCode === undefined) {\n      const pid = findProlificId();\n      //console.log(\"pid:\",pid);\n      ReactGA.event({\n        category: \"info\",\n        action: \"submission_insert, pid : \"+pid,\n        label: \"info submission insert\"\n      });\n      fetch(submissionApi, {\n        method: 'post',\n        mode: 'cors',\n        body: JSON.stringify(submission),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })\n        .then(resp => resp.json())\n        .then(respJson => setState({...state, submissionCode: respJson.submissionCode}))\n        .catch(error => {\n          ReactGA.event({\n            category: \"error\",\n            action: \"submission_insert_error, pid : \"+pid +'  error:' + error + '  stringify:'+ JSON.stringify(error),\n            label: \"info submission insert: \" + JSON.stringify(submission)\n          });\n          return console.error('Error:', error);\n        });\n    }\n  },[state]);\n\n  return (\n    <Grid container direction='column' className='Text-container'>\n\n      {state.submissionCode &&\n      <Grid item xs className=\"submission-container\">\n        <Markdown source={t(submissionNote, {submissionCode: state.submissionCode})} escapeHtml={false}  className='markdown-text' />\n      </Grid>\n      }\n\n      {state.debug &&\n      <Grid item xs>\n        <pre>{JSON.stringify(submission, null, 2)}</pre>\n      </Grid>\n      }\n\n    </Grid>\n  );\n}\n","import React, {useState, useEffect, Fragment, useRef} from 'react';\n\nimport {Button, Fab, Grid, Typography, Divider, Tooltip} from '@material-ui/core';\n\nimport {Dialog, DialogActions, DialogTitle, DialogContentText, DialogContent} from '@material-ui/core';\n\nimport { useTranslation } from 'react-i18next';\n\nimport './bart.css';\n\nexport default function BART({content, onStore}) {\n  \n  const { t } = useTranslation();\n  const {reward, maxPumps, safePumps, trials} = content;\n\n  const [state, setState] = useState({\n    pumps: 0,\n    finished: false,\n    trial: 1,\n    totalScore: 0,\n    trialResponses: [],\n    dialogIsOpen: false,\n    taskStartedAt: Date.now(),\n    showTooltip: true\n  });\n\n  const shuffle = (a) => {\n    for (let i = a.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [a[i], a[j]] = [a[j], a[i]];\n    }\n    return a;\n  }\n\n  // on mount and unmount\n  useEffect(() => {\n\n    // create a list of random numbers and shuffle it\n    state.randomNumbers = shuffle(Array.from({length: maxPumps}, (_, i) => i+1));\n\n    document.body.style['touch-action'] = \"none\";\n    document.documentElement.style['touch-action'] = \"none\";\n    return () => {\n      document.body.style['touch-action'] = null;\n      document.documentElement.style['touch-action'] = null;  \n    }\n  },[]);\n  \n  // when finished, store responses and proceed to the next view\n  useEffect(() => {\n    if (state.finished && !state.dialogIsOpen) {\n      const now = Date.now()\n      // add timestamps\n      let response = {trials: state.trialResponses};\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = now;\n      response.taskDuration = now - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n  }, [state]);\n\n  /**\n   * Store trial responses, then proceed to the next trial or finish the game\n   * @param {*} cashed either cashed or exploded\n   * @param {*} explosionProbability last probability of balloon getting exploded\n   */\n  const newTrial = (cashed, randomNumber) => {\n    setState({\n      ...state, \n      dialogIsOpen: true,\n      trialResponses: [...state.trialResponses, {\n        trial: state.trial,\n        pumps: state.pumps,\n        score: cashed? state.pumps * reward : 0,\n        result: cashed? \"cashed\" : \"exploded\"\n      }],\n      showTooltip: true,\n      finished: (state.trial>=trials),\n      pumps: 0,\n      trial: state.trial+1,\n      totalScore: state.totalScore + (cashed?state.pumps*reward:0),\n      randomNumbers: shuffle(Array.from({length: maxPumps}, (_, i) => i+1))\n    });\n  }\n\n  /**\n   * action to inflate the baloon\n   */\n  const onInflate = () => {\n\n    const isSafe = safePumps>0 && state.pumps<safePumps\n    let randomIndex = Math.floor(Math.random() * state.randomNumbers.length);\n    let randomNumber = state.randomNumbers.splice(randomIndex, isSafe?0:1);  \n    console.log('random number: ', randomNumber[0], '(must be 1 to explode)')\n\n    // if the randomly picked number is 1, then explode\n    if (randomNumber[0] === 1) {\n      newTrial(false, randomNumber);\n    } else {\n        setState({\n        ...state,\n        showTooltip: false,\n        pumps: state.pumps+1\n      });\n    }\n\n  };\n\n  /**\n   * action to cash in the reward\n   */\n  const onCashIn = () => {\n    newTrial(true);\n  };\n  \n  /**\n   * render a dialog that shows trial summary.\n   */\n  const renderDialog = () => {\n    return (\n    <Dialog\n      open={state.dialogIsOpen}\n      onClose={() => setState({...state, dialogIsOpen: false})}\n      disableBackdropClick\n      disableEscapeKeyDown\n      aria-labelledby=\"dialog-title\"\n    >\n        <DialogTitle id=\"dialog-title\"><b>{state.trialResponses[state.trialResponses.length - 1].result==='cashed'?t('bart.cashed_title'):t('bart.exploded_title')}</b></DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n          {t('bart.trial_score_report', {score: state.trialResponses[state.trialResponses.length - 1].score})}\n          {t('bart.total_score_report', {score: state.trialResponses.map(r => r.score).reduce((a,b) => a+b, 0)})}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setState({...state, dialogIsOpen: false})} color=\"primary\" autoFocus size='large'>\n            {state.trial<=trials?t('bart.next_trial'):t('next')}\n          </Button>\n        </DialogActions>\n      </Dialog>);\n  }\n\n  const balloonSize = (pumps, maxPumps) => {\n    //TODO let volume = 20/(1+Math.pow(Math.E, -3*(pumps/maxPumps))) // logit(3*pumps/maxPumps)\n    //TODO calc radius\n    let rad = Math.sqrt((pumps+1)*500/Math.PI)\n    console.log(rad)\n    return Math.ceil(2*rad)\n  }\n\n  /**\n   * Render BART component (main render)\n   */\n  //const render = () => {\n    return (\n      <Fragment>\n        {state.dialogIsOpen && renderDialog()}\n  \n        <Grid container direction='column' spacing={2} justify=\"space-between\" alignItems='stretch' className='bart-container'>\n  \n        <Grid item container direction='row' justify=\"space-around\" alignItems='center'>\n  \n          {state.trial<=trials && \n            <Grid item><Grid container direction='column' justify=\"space-around\" alignItems='center'>\n              {t('bart.next_reward')}<Typography variant=\"h4\">{state.pumps * reward}</Typography>\n            </Grid></Grid>\n          }\n  \n          {state.trial<=trials && \n            <Grid item><Grid container direction='column' justify=\"space-around\" alignItems='center'>\n                <Typography color='textSecondary' variant='caption'>{t('bart.trial_label',{trial:state.trial, trials:trials})}</Typography>\n            </Grid></Grid>\n          }\n  \n            <Grid item><Grid container direction='column' justify=\"space-around\" alignItems='center'>\n              {t('bart.total_points')}<Typography variant=\"h4\">{state.totalScore}</Typography>\n            </Grid></Grid>\n        </Grid>\n  \n        {/*<Grid item><Divider /></Grid>*/}\n        \n        <Grid item container direction=\"column\" alignContent='center' alignItems='center'> \n          <Tooltip title={t('bart.balloon_tooltip')} arrow open={!state.dialogIsOpen && state.showTooltip}>\n          <div className=\"bubble-container\" style={{\n            cursor: 'pointer',\n            width: balloonSize(state.pumps, maxPumps),\n            height: balloonSize(state.pumps, maxPumps),\n            transition: (state.pumps===0)?'':'width 1s, height 1s' //explosition and pumping effects\n          }}\n          onClick={onInflate}\n          >\n            <figure className=\"bubble\"></figure>\n          </div>\n          </Tooltip>\n        </Grid>\n  \n        <Grid item container direction=\"row\" justify=\"space-around\" alignItems='center'>\n          <Button size='large' color='primary' variant='outlined' onClick={onCashIn}>{t('bart.cash')}</Button>\n        </Grid>\n\n  \n        </Grid>\n      </Fragment>\n  \n    );\n  //} //.render()\n\n}\n","export const sample = (items, n=1) => {\n  let rnd = Math.floor(Math.random()*items.length);\n  return items[rnd];\n}\n\n  /**\n  * Shuffles any array and returns it\n  * @param {*any} items any array to be shuffled\n  * @returns shuffled array\n  */\nexport const shuffle = (items) => {\n  const shuffled = items.slice();\n  for (let i = items.length - 1; i > 0; i--) {\n      const rnd = Math.floor(Math.random() * (i + 1));\n      [shuffled[i], shuffled[rnd]] = [shuffled[rnd], shuffled[i]];\n  }\n  return shuffled;\n};","import React, { useState, useEffect, Fragment } from 'react';\n\n\nimport { Button, Grid, Divider } from '@material-ui/core';\n\nimport { \n  Star, \n  RadioButtonUnchecked as Circle, \n  Add,\n  Check as Correct,\n  Clear as Incorrect\n} from '@material-ui/icons';\n\nimport Markdown from 'react-markdown/with-html';\n\nimport { shuffle } from './utils/random';\nimport { useTranslation } from 'react-i18next';\n\nimport './gonogo.css';\n\n//FIXME these are realtime variables, so I keep them out of the component's state.\nlet clock\n\nexport default function GoNoGo({content, onStore, onProgress}) {\n\n  const {t} = useTranslation();\n  const {text, trials, stimuliDuration, fixationDuration, choices, timeoutsBeforeReset, feedbackDuration} = content;\n\n  const [state, setState] = useState({\n    finished: false,\n    trialResponses: [],\n    taskStartedAt: null,\n    taskFinishedAt: null,\n    taskDuration: null,\n    step: null,\n    correct: null,\n    stimuli: null,\n    trialStartedAt: null,\n    respondedAt: null,\n    trial: null,\n    timeouts: 0\n  })\n\n  /**\n   * callback to handle keypress events\n   */\n  const handleKeyPress = (event) => {\n    const { key, keyCode } = event;\n\n    // press space to start the task\n    if (state.trial === null && (keyCode===32 || key===' ')) {\n      startTask()\n      return;\n    }\n\n    // ignore invalid keys and invalid trial steps\n    if (state.step !== 'stimuli' || !['ArrowLeft', 'ArrowRight'].includes(key))\n      return;\n\n    const current = state.stimuli[state.trial-1];\n    let choice = undefined;\n\n    let empty = (key==='ArrowLeft' && current.startsWith('right')) || \n                (key==='ArrowRight' && current.startsWith('left'))\n    let go = (key==='ArrowLeft' && current==='left-go') ||\n             (key==='ArrowRight' && current==='right-go') \n\n    choice = go?choices.go:(empty?'empty':choices.nogo)\n\n    handleResponse(choice)\n    \n  }\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyPress);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n  }, [handleKeyPress]);\n\n\n  useEffect(() => {\n\n    // generate stimuli stream\n    if (state.stimuli===null) {\n      let stim = [...Array(trials.total).keys()].map((i,t) => {\n        if (i<trials.leftGo)\n          return 'left-go'\n        if (i<trials.go)\n          return 'right-go'\n        if (i<trials.go + (trials.left - trials.leftGo))\n          return 'left-nogo'\n        return 'right-nogo'\n      }) \n      setState({...state, stimuli: shuffle(stim)});\n    }\n\n\n    // # FIXATION\n    if (state.step === 'fixation') {\n      clearTimeout(clock);  \n      clock = setTimeout(() => {\n          setState({\n            ...state, \n            trial: state.trial+1, \n            trialStartedAt: Date.now(), \n            step: 'stimuli'\n          });\n        }, fixationDuration);\n    }\n\n    // # FEEDBACK\n    if (state.step === 'feedback') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n          setState({...state, step: 'fixation'})\n        }, feedbackDuration)\n    }\n\n    if (state.step === 'stimuli') {\n      clearTimeout(clock);\n\n      if (state.timeouts<timeoutsBeforeReset) {\n        clock = setTimeout(() => {\n          setState({...state,\n            trialResponses: [...state.trialResponses, {\n              'trial': state.trial,\n              'stimuli': state.stimuli[state.trial-1],\n              'choice': null,\n              'correct': null,\n              'respondedAt': null,\n              'trialStartedAt': state.trialStartedAt,\n              'rt': null\n            }],\n            timeouts: state.timeouts + 1,\n            correct: false,\n            step: (feedbackDuration>0)?'feedback':'fixation'\n          });\n        }, stimuliDuration)\n      } else {\n        setState({...state, step: 'reset', timeouts: 0})\n      }\n    }\n\n\n    onProgress(100.0 * state.trial / trials.total)\n  \n    if (state.trial>trials.total) {\n      console.log('------------ FINISHED -------')\n      onProgress(100.0)\n      setState({...state, finished: true, taskFinishedAt: Date.now()})\n    }\n\n    // on finish\n    if (state.finished) {\n      clearTimeout(clock);\n      \n      // timestamps\n      let response = {trials: state.trialResponses};\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = state.taskFinishedAt;\n      response.taskDuration = state.taskFinishedAt - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n\n  },[state]);\n\n  const startTask = () => {\n    setState({\n      ...state, \n      trialResponses: [], \n      trial: 0, \n      timeouts: 0, \n      step: 'fixation', \n      taskStartedAt: Date.now()\n    })\n  }\n\n  const handleResponse = (choice) => {\n    const respondedAt = Date.now(); //timestamp\n\n    clearTimeout(clock);\n\n    const _correct = (choice===choices.go && !state.stimuli[state.trial-1].endsWith('nogo')) || \n              (choice==='empty' && state.stimuli[state.trial-1].endsWith('nogo'))\n\n    setState({\n      ...state,\n      correct: _correct,\n      respondedAt: respondedAt,\n      trialResponses: [...state.trialResponses, {\n        'trial': state.trial,\n        'stimuli': state.stimuli[state.trial-1],\n        'choice': choice,\n        'correct': _correct,\n        'respondedAt': respondedAt,\n        'trialStartedAt': state.trialStartedAt,\n        'rt': respondedAt - state.trialStartedAt\n      }],\n      step: (feedbackDuration>0)?'feedback':'fixation'\n    })\n  }\n\n  const renderStimulus = (stimulus) => {\n    return (\n      <Fragment>\n      {stimulus==='star' && <div onClick={() => handleResponse('star')} className='gng-stimulus'><Star fontSize='large' className='yellow' /></div>}\n      {stimulus==='empty' && <div onClick={() => handleResponse('empty')} className='gng-stimulus'> </div>}\n      {stimulus==='circle' && <div onClick={() => handleResponse('circle')} className='gng-stimulus'><Circle fontSize='large' className='blue' /></div>}\n      {stimulus==='blue-star' && <div onClick={() => handleResponse('blue-star')} className='gng-stimulus'><Star fontSize='large' className='blue' /></div>}\n      {stimulus==='yellow-circle' && <div onClick={() => handleResponse('yellow-circle')} className='gng-stimulus'><Star fontSize='large' className='yellow' /></div>}\n      </Fragment>\n    );\n  }\n\n  const renderStimuli = (trialType) => {\n    return (\n      <Grid item container direction=\"row\" justifyContent=\"space-around\" alignItems=\"center\">\n        {trialType === 'left-go' && renderStimulus(choices.go)}\n        {trialType === 'left-nogo' && renderStimulus(choices.nogo)}\n        {(trialType !== 'left-go' && trialType !== 'left-nogo') && renderStimulus('empty')}\n        <Divider orientation=\"vertical\" flexItem />\n        {trialType === 'right-go' && renderStimulus(choices.go)}\n        {trialType === 'right-nogo' && renderStimulus(choices.nogo)}\n        {(trialType !== 'right-go' && trialType !== 'right-nogo') && renderStimulus('empty')}\n      </Grid>\n    )\n  }\n\n  const renderFeedback = () => {\n    return (\n      <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        {state.correct && <Correct fontSize='large' className='correct gng-icon' />}\n        {!state.correct && <Incorrect fontSize='large' className='incorrect gng-icon' />}\n      </Grid>\n    )\n\n  }\n\n  const renderFixation = () => {\n    return (\n      <Grid item container direction=\"row\" justifyContent=\"space-around\" alignItems=\"center\">\n        <Add fontSize='large' className='fixation gng-icon' />\n      </Grid>\n    );\n  }\n\n  // show reset screen on timeouts reaching a threshold\n  if (state.step === 'reset') {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('gonogo.too_many_timeouts')} escapeHtml={false}  className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' color='secondary' onClick={() => startTask()}>{t('gonogo.restart')}</Button>\n        </Grid>\n      </Grid>\n\n    )\n  }\n\n  // start screen\n  if (state.trial === null) {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('gonogo.are_you_ready')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' onClick={() => startTask()}>{t('gonogo.start')}</Button>\n        </Grid>\n\n      </Grid>\n\n    )\n  }\n\n  //const render = () => {\n    return (\n        <Grid item container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='gonogo-container'>\n          <Grid item>\n            <Markdown source={t(text)} escapeHtml={false} className='markdown-text' />\n          </Grid>\n\n          {state.step === 'stimuli'  && renderStimuli(state.stimuli[state.trial-1])}\n          {state.step === 'feedback' && renderFeedback()}\n          {state.step === 'fixation' && renderFixation()}\n\n        </Grid>\n\n    );\n  //} //.render()\n\n}\n","  /**\n  * Shuffles any array and returns it\n  * @param {*any} a any array\n  * @returns shuffled array\n  */\nconst shuffle = (a) => {\n  for (let i = a.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [a[i], a[j]] = [a[j], a[i]];\n  }\n  return a;\n}\n\nexport default shuffle;","import React, {useState, useEffect, useRef} from 'react';\n\n\nimport { Box, Button, Grid, Typography, Divider} from '@material-ui/core';\n\nimport { \n  Add,\n  Check as CorrectIcon,\n  Clear as IncorrectIcon,\n} from '@material-ui/icons';\n\nimport shuffle from './utils/shuffle';\n\nimport Image from 'material-ui-image';\n\nimport Markdown from 'react-markdown/with-html';\n\nimport {useTranslation} from 'react-i18next';\n\nimport './stroop.css';\n\n//FIXME keep this var as a ref\nlet clock\n\nexport default function Stroop({content, onStore}) {\n\n  const {rule, colors, words, trials, randomizeTrials, randomizeChoices, stimulusDuration, fixationDuration, timeoutsBeforeReset, feedbackDuration} = content;\n\n\n  const {t} = useTranslation();\n  const separator = ''; // character that separates word and color in trials[i].stimulus and trials[i].choices\n\n  const [state, setState] = useState({\n    trialResponses: [],\n    finished: false,\n    trial: null,\n    step: null,\n    correct: null,\n    timeouts: 0,\n    stimuli: null\n  });\n\n    /**\n   * callback to handle keypress events\n   */\n  const handleKeyPress = (event) => {\n    const { key, keyCode } = event;\n\n    // press space to start the task\n    if (state.trial === null && (keyCode===32 || key===' ')) {\n      startTask()\n      return;\n    }\n\n    // ignore invalid key press at invalid stage of the trial\n    if (state.step !== 'stimulus' || !['ArrowLeft', 'ArrowRight'].includes(key))\n      return;\n\n    let choices = state.stimuli[state.trial-1].choices\n    let stimulus = state.stimuli[state.trial-1].stimulus\n\n    let choice = (key==='ArrowLeft')?choices[0]:choices[1]\n\n    handleResponse(choice, stimulus)\n    \n  }\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyPress);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n  }, [handleKeyPress]);\n\n\n  const randomize = (trials/*use props instead of: , randomizeTrials, randomizeChoices*/) => {\n    let _trials = (randomizeTrials || false)?shuffle(trials):trials\n    if (randomizeChoices)\n      _trials = _trials.map(t=> {\n        let _t = Object.assign({},t); // copy\n        _t.choices = shuffle(t.choices);\n        return _t;\n      })\n    return _trials\n  }\n\n  // when finished, store responses and proceed to the next view\n  useEffect(() => {\n\n    if (state.stimuli===null) {\n      setState({\n        ...state,\n        stimuli: randomize(trials, randomizeTrials, randomizeChoices)\n      })\n    }\n\n    if (state.step==='fixation') {\n      clearTimeout(clock);  \n      clock = setTimeout(() => {\n        setState({\n          ...state,\n          step: 'stimulus',\n          trial: state.trial+1, \n          trialStartedAt: Date.now()\n        });\n      }, fixationDuration);\n    }\n\n    if (state.step === 'feedback') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        setState({...state, step: 'fixation'})\n      }, feedbackDuration)\n    }\n\n    if (state.step === 'stimulus') {\n      clearTimeout(clock);\n\n      if (state.timeouts<timeoutsBeforeReset) {\n        clock = setTimeout(() => {\n          setState({\n            ...state,\n            step: (feedbackDuration>0)?'feedback':'fixation',\n            trialResponses: [...state.trialResponses, {\n              trial: state.trial,\n              stimulus: state.stimuli[state.trial-1].stimulus,\n              choice: null,\n              correct: null,\n              respondedAt: null,\n              trialStartedAt: state.trialStartedAt,\n              rt: null}\n            ],\n            timeouts: state.timeouts + 1,\n            correct: false\n          });\n        }, stimulusDuration);\n      } else {\n        setState({...state, step: 'reset', timeouts: 0})\n      }\n    }\n\n    if (state.trial>trials.length) {\n      setState({...state, finished: true, taskFinishedAt: Date.now()})\n    }\n\n    if (state.finished) {\n      clearTimeout(clock);\n\n      // timestamps\n      let response = {trials: state.trialResponses};\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = state.taskFinishedAt;\n      response.taskDuration = state.taskFinishedAt - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n\n  }, [state]);\n\n  const startTask = () => {\n    setState({\n      ...state,\n      trial: 0,\n      timeouts: 0,\n      trialResponses: [],\n      step:'fixation', \n      taskStartedAt: Date.now() //timestamp\n    });\n  }\n\n  const handleResponse = (choice, stimulus) => {\n    let respondedAt = Date.now(); //timestamp\n\n    clearTimeout(clock);\n\n    let [choiceWord, choiceColor] = choice.split('')\n    let [stimulusWord, stimulusColor] = stimulus.split('')\n    let correct = (choiceWord === stimulusColor)\n\n    //DEBUG console.log(choiceColor, stimulusWord, correct)\n\n    setState({\n      ...state,\n      step: (feedbackDuration>0)?'feedback':'fixation',\n      correct: correct,\n      trialResponses: [...state.trialResponses,{\n        trial: state.trial,\n        stimulus: state.stimuli[state.trial-1].stimulus,\n        choice: choice,\n        correct: correct,\n        respondedAt: respondedAt,\n        trialStartedAt: state.trialStartedAt,\n        rt: respondedAt - state.trialStartedAt\n      }]\n    })\n  }\n\n  const renderStimulus = (stimulus) => {\n    let [word, color] = stimulus.split('')\n    return (\n      <Grid container item direction='column' alignItems='center' justify='flex-start'>\n      <Typography className='stroop-stimulus' variant='h1' style={{color: colors[color]}}>\n        {t(words[word])}\n      </Typography>\n      </Grid>\n\n    );\n  }\n\n  const renderChoices = (choices, stimulus) => {\n    \n    return (\n      <Grid container direction='row' justify='space-between' spacing={2} alignItems='stretch' className='stroop-choices'>\n      {choices.map((choice,i) => {\n        let [word, color] = choice.split('')\n        return (\n          <Grid item xs key={i}>\n          <Button style={{color: colors[color]}} onClick={() => handleResponse(choice, stimulus)} size=\"large\" fullWidth variant='outlined'>\n            {t(words[word])}\n          </Button>\n          </Grid>\n        );\n      })}\n      </Grid>\n    )\n  }\n\n  const renderFeedback = () => {\n    return (\n      <Grid item container direction='row' justify='space-around' alignItems='center'>\n        {state.correct && <CorrectIcon fontSize='large' className='correct gng-icon' />}\n        {!state.correct && <IncorrectIcon fontSize='large' className='incorrect gng-icon' />}\n      </Grid>\n    )\n\n  }\n\n  const renderStartScreen = () => {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center'>\n        <Grid item><Markdown source={t('stroop.are_you_ready')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' onClick={() => startTask()}>{t('stroop.start')}</Button>\n        </Grid>\n\n      </Grid>\n    )\n  }\n\n  const renderResetScreen = () => {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justify='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('stroop.too_many_timeouts')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' color='secondary' onClick={() => startTask()}>{t('stroop.restart')}</Button>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  // show reset screen on timeouts reaching a threshold\n  if (state.step === 'reset') {\n    return renderResetScreen();\n  }\n\n  if (state.trial === null) {\n    return renderStartScreen();\n  }\n\n  \n  //const render = () => {\n    return (\n        <Grid item container direction='column' spacing={2} alignItems='stretch' justify='flex-start' className='stroop-container stroop-board'>\n          <Grid item>\n            <Markdown source={t(rule)} escapeHtml={false} className='markdown-text' />\n          </Grid>\n\n          {state.trial<=trials.length && \n            state.step === 'stimulus' && \n            renderStimulus(state.stimuli[state.trial-1].stimulus) }\n            \n          {state.trial<=trials.length && \n            state.step === 'stimulus' && \n            renderChoices(state.stimuli[state.trial-1].choices, state.stimuli[state.trial-1].stimulus) }\n\n          {state.step === 'feedback' && renderFeedback(state.correct)}\n\n          {state.step === 'fixation' && \n            <Grid item container direction=\"row\" justify=\"space-around\" alignItems=\"center\">\n              <Add fontSize='large' className='fixation gng-icon' />\n            </Grid>\n          }\n\n        </Grid>\n\n    );\n  //} //.render()\n\n}\n","import React, { Fragment, memo } from 'react';\nimport { useDrag, useDrop, DragPreviewImage } from 'react-dnd';\nimport { useTranslation } from 'react-i18next';\nimport { languages } from '../utils/i18n';\nimport MonetizationOnIcon from \"@material-ui/icons/MonetizationOn\";\nimport { ltrTheme, rtlTheme } from '../utils/theme';\nimport { grey, teal, blueGrey } from '@material-ui/core/colors';\nimport { Avatar, Grid, makeStyles, Paper, Typography } from '@material-ui/core';\nimport { useParams } from 'react-router-dom';\n\n// Item types of draggable components\nexport const ItemTypes = {\n  OPPONENT: 'opponent',\n  POT: 'pot',\n  PLAYER: 'player',\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 0,\n  },\n  paper: {\n    padding: theme.spacing(2),\n  },\n  medium: {\n    width: theme.spacing(3),\n    height: theme.spacing(3),\n  },\n  large: {\n    width: theme.spacing(4),\n    height: theme.spacing(4),\n  },\n  grey: {\n    color: theme.palette.getContrastText(grey[400]),\n    backgroundColor: grey[400],\n  },\n  tealDark: {\n    color: theme.palette.getContrastText(teal[800]),\n    backgroundColor: teal[800],\n  },\n  blueG: {\n    color: theme.palette.getContrastText(blueGrey[800]),\n    backgroundColor: blueGrey[800],\n  },\n  height100: {\n    height: '100%',\n  }\n}));\n\nvar language = undefined;\nvar personsLangPrefix = undefined;\n\n/***\n * Container box for monetized entities and their interactions\n */\nexport const RepositoryBox = memo(function RepositoryBox({\n  name,\n  amount,\n  onDrop,\n  accept,\n  person,\n  personsPrefix,\n}) {\n\n  let { lang } = useParams();\n  language = lang;\n  personsLangPrefix = personsPrefix;\n  console.log(personsLangPrefix);\n  const { t } = useTranslation();\n  const theme = (languages[language].direction === 'rtl') ? rtlTheme : ltrTheme;\n  const classes = useStyles(theme);\n  const style = {\n    height: '128px',\n  }\n\n  const [{ canDrop, isOver }, drop] = useDrop({\n    accept,\n    drop: onDrop,\n    collect: (monitor) => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop(),\n      //connectDropTarget: connect.dropTarget()\n    }),\n  })\n\n  const isActive = canDrop && isOver\n  let backgroundColor = '#222'\n  if (isActive) {\n    backgroundColor = 'darkgreen'\n  } else if (canDrop) {\n    backgroundColor = blueGrey[800]\n  }\n\n  const tokensList = [];\n  for (let i = 0; i < amount; i++) {\n    tokensList.push(<MonetizedToken type={name} name={name + i.toString()} key={name + i.toString()} boxName={name} />);\n  }\n\n  return (\n    <Grid item xs={12}>\n      <Paper ref={drop} className={classes.paper} style={{ ...style, backgroundColor }} elevation={3} >\n        <Grid container alignItems=\"center\" direction=\"row\" className={classes.height100}>\n          <Grid item xs={4}>\n            {name === ItemTypes.OPPONENT &&\n              <OpponentInfoBar person={person} />\n            }\n            {name !== ItemTypes.OPPONENT &&\n              <Typography>{t('dictator.' + name)}</Typography>\n            }\n          </Grid>\n          <Grid item xs={7}>\n            <Grid container direction=\"row\" justifyContent=\"flex-start\" alignItems=\"center\">\n              {tokensList}\n            </Grid>\n          </Grid>\n          <Grid item xs={1}>\n            <Grid container direction=\"column\" justifyContent=\"center\" alignItems=\"center\">\n              <Avatar className={`${classes.grey} ${classes.large}`}>{amount}</Avatar>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Grid>\n  );\n})\n\n/**\n * uses the persons id and the field key alongside experiment loaded personLangPrefix to produce the locales key\n * @returns string for locales key\n */\nfunction getPersonKey(key, id) {\n  console.log(personsLangPrefix);\n  return personsLangPrefix + id + '.' + key;\n}\n\nconst OpponentInfoBar = memo(function OpponentInfoBar({ person }) {\n  const { t } = useTranslation();\n  const theme = (languages[language].direction === 'rtl') ? rtlTheme : ltrTheme;\n  const classes = useStyles(theme);\n  return (\n    <>\n      {person?.avatar &&\n        <Avatar alt={t(getPersonKey(person.field1, person.id))} src={process.env.PUBLIC_URL + \"/images/\" + person.avatar} className={classes.large} />\n      }\n      {!person?.avatar &&\n        <Avatar className={classes.large} />\n      }\n      <Typography variant=\"body1\" color=\"textPrimary\" component=\"p\">\n        {person?.field1 && t(getPersonKey(person.field1, person.id))}\n      </Typography>\n      <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n        {person?.field2 && t(getPersonKey(person.field2, person.id))}\n      </Typography>\n      <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n        {person?.field3 && t(getPersonKey(person.field3, person.id))}\n      </Typography>\n    </>\n  );\n})\n\n/***\n * Component which renders coin tokens and handles dragging events\n */\nconst MonetizedToken = memo(function MonetizedToken({ type, name, boxName }) {\n\n  const style = {\n    cursor: 'move',\n  }\n\n  const [{ isDragging }, drag, preview] = useDrag(\n    () => ({\n      type,\n      item: { name, boxName },\n      collect: (monitor) => ({\n        isDragging: !!monitor.isDragging(),\n      }),\n    }),\n    [name],\n  )\n  return (\n    <Grid item>\n      <DragPreviewImage connect={preview} src={process.env.PUBLIC_URL + \"/images/token-large.png\"} />\n      <span ref={drag} className='token-span' style={{ ...style, opacity: isDragging ? 0.5 : 1,}}> \n        <MonetizationOnIcon fontSize={isDragging? 'large':'medium'} /> \n      </span>\n    </Grid>\n\n  )\n})","import React, { useEffect, useState, Fragment, useCallback, } from 'react';\nimport { Typography, Button, Grid, Dialog, DialogTitle, \n          DialogContent, DialogContentText, DialogActions } from '@material-ui/core';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { TouchBackend } from 'react-dnd-touch-backend';\nimport { useTranslation } from 'react-i18next';\nimport { shuffle } from './utils/random';\nimport { ItemTypes, RepositoryBox } from './components/allotmentBox';\n\n//css\nimport \"./ultimatum.css\";\n\n\nexport default function Ultimatum({ content, onStore, onNotification }) {\n  //content:   text , tokens , trials , opponentTypes, useOpponentTypes, personsPrefix\n\n  const { t } = useTranslation();\n  const { tokens, trials, useOpponentTypes, opponentTypes, text, personsPrefix, dialogOptionalText, persons } = content;\n\n  //const theme = (languages[lang].direction === 'rtl') ? rtlTheme : ltrTheme;\n  //const classes = useStyles(theme);\n  \n  const [state, setState] = useState({\n    finished: false,\n    trial: null,\n    totalScore: 0,\n    dialogIsOpen: false,\n    trialResponses: [],\n    taskStartedAt: Date.now(),\n  });\n  const [boxes, setBoxes] = useState(\n    [\n      { name: ItemTypes.OPPONENT, amount: 0, accepts: [ItemTypes.POT, ItemTypes.PLAYER] },\n      { name: ItemTypes.POT, amount: tokens, accepts: [ItemTypes.PLAYER, ItemTypes.OPPONENT] },\n      { name: ItemTypes.PLAYER, amount: 0, accepts: [ItemTypes.POT, ItemTypes.OPPONENT] },\n    ]\n  )\n  const [shuffledPersons, setShuffledPersons] = useState(undefined);\n\n  // on mount and unmount\n  useEffect(() => {\n    // Nothing yet\n  }, []);\n\n  // when finished, store responses and proceed to the next view\n  useEffect(() => {\n    if (state.finished && !state.dialogIsOpen) {\n      const now = Date.now()\n      // add timestamps\n      let response = { trials: state.trialResponses };\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = now;\n      response.taskDuration = now - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n  }, [state, onStore, content]);\n\n /**\n   * Filters persons to return only the persons that have any of the given tags \n   * @param {*persons} persons persons to be filtered by their tags\n   * @param {*} tags tags used to select the persons which their tags has at least one the tags given\n   * @returns \n   */\n  const filterPersonsByTags = (persons, tags) => {\n    if (useOpponentTypes !== true)\n      return persons;\n    const filterredPersons = persons.filter(person => { return checkPersonHasTags(person, tags) });\n      return filterredPersons;\n  }\n\n  /**\n   * Checks if the given person has any of the the given tags\n   * @returns true if the person has any of the given tags\n   */\n  function checkPersonHasTags(person, tags) {\n    var checkResult = false;\n    for (let i = 0; i < person.tags.length; i++) {\n      if (tags.inclue(person.tags[i]))\n        checkResult = true;\n    }\n    return checkResult;\n  }\n\n  const finishTrialAction = () => {\n    canFinishTrial() ? newTrial() : onNotification(t('ultimatum.errors.required'));\n  }\n\n  /***\n   * this function shows if this trial can be finished by the participant\n   */\n  const canFinishTrial = () => {\n    let result = false;\n    boxes.forEach((box) => {\n      if (box.name === ItemTypes.POT && box.amount === 0)\n        result = true;\n    });\n    return result;\n  }\n\n  /***\n   * Activated when player has droped a token (item that is dragged and name of the dropped box) by setting setBoxes\n   */\n  const handleDrop = useCallback(\n    (name, item) => {\n      // item is the entity that is dropped and has {name, boxName}\n      // name is the name of the repositoryBox that entity has been dropped into\n      const fromBox = item.boxName;\n      const destBox = name;\n      //console.log('dropped on: ',destBox);\n      //console.log('from : ',fromBox);\n      setBoxes(boxes.map(item => {\n        if (item.name === fromBox) {\n          return { ...item, amount: item.amount - 1 };\n        } else if (item.name === destBox) {\n          return { ...item, amount: item.amount + 1 };\n        } else {\n          return item;\n        }\n      }));\n    },\n    [boxes],\n  )\n\n  /***\n   * Starts the task for the first time\n   */\n  const startTask = () => {\n    let filterredPersons = filterPersonsByTags(persons, opponentTypes);\n    setShuffledPersons(shuffle(filterredPersons));\n    setState({\n      ...state,\n      trial: 0,\n      trialResponses: [],\n      taskStartedAt: Date.now() //timestamp\n    });\n  }\n\n  /**\n   * Store trial responses, then proceed to the next trial or finish the game\n   */\n  const newTrial = () => {\n    if (!canFinishTrial()) {\n      console.log('it should never come to this, because before calling newTrial, canFinishTrial has been checked!!!!');\n      onNotification(t('ultimatum.errors.required'));\n      return;\n    }\n    const playerShare = boxes.find(box => box.name === ItemTypes.PLAYER).amount;\n    let accepted = true;\n    if(shuffledPersons[personIndex]?.minAcceptable > (tokens-playerShare))\n      accepted = false;\n    setState({\n      ...state,\n      trialResponses: [...state.trialResponses, {\n        trial: state.trial,\n        playerShare: playerShare,\n        score: accepted ? playerShare : 0,\n        opponentShare: tokens - playerShare,\n        opponent: shuffledPersons[personIndex],\n        result: accepted ? \"accepted\" : \"rejected\"\n      }],\n      finished: (state.trial >= trials - 1),\n      trial: state.trial + 1,\n      totalScore: state.totalScore + (accepted ? playerShare : 0),\n      dialogIsOpen: true,\n    });\n\n    // when the trial finished the tokens in boxes should reset\n    setBoxes(\n      [\n        { name: ItemTypes.OPPONENT, amount: 0, accepts: [ItemTypes.POT, ItemTypes.PLAYER] },\n        { name: ItemTypes.POT, amount: tokens, accepts: [ItemTypes.PLAYER, ItemTypes.OPPONENT] },\n        { name: ItemTypes.PLAYER, amount: 0, accepts: [ItemTypes.POT, ItemTypes.OPPONENT] },\n      ]\n    );\n  }\n\n  if (state.trial === null) {\n    console.log('ultimatum starting...');\n    startTask();\n    return;\n  }\n\n  // If persons are less than the number of trials it should fill the array\n  var personIndex = state.trial;\n  if (state.trial !== null && state.trial >= shuffledPersons.length) {\n    personIndex = state.trial % shuffledPersons.length;\n  }\n\n  /**\n   * render a dialog that shows trial summary.\n   */\n  const renderDialog = () => {\n    return (\n      <Dialog\n        open={state.dialogIsOpen}\n        onClose={() => setState({ ...state, dialogIsOpen: false })}\n        disableEscapeKeyDown\n        aria-labelledby=\"dialog-title\"\n      >\n        {/* // fix error h6 is nested in h2 */}\n        <DialogTitle disableTypography id=\"dialog-title\">\n          <Typography variant='h6' color={state.trialResponses[state.trialResponses.length - 1].result==='accepted'?'primary':'error'}>\n            <b>\n            {state.trialResponses[state.trialResponses.length - 1].result==='accepted' ? \n              t('ultimatum.dialog_title.accepted')\n              :t('ultimatum.dialog_title.rejected')\n            }\n            </b>\n          </Typography>\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            {t('ultimatum.trial_score_report', {decision: state.trialResponses[state.trialResponses.length - 1].result, score: state.trialResponses[state.trialResponses.length - 1].score })}\n            {t('ultimatum.total_score_report', { score: state.trialResponses.map(r => r.score).reduce((a, b) => a + b, 0) })}\n            <br /> <br />\n            {!state.finished && dialogOptionalText ? t(dialogOptionalText) : t('ultimatum.dialog_optional_text_default')}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setState({ ...state, dialogIsOpen: false })} color=\"primary\" autoFocus size='large'>\n            {state.trial <= trials - 1 ? t('ultimatum.next_trial') : t('next')}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }  \n\n  const isTouchScreen = () => {\n    return ( 'ontouchstart' in window ) ||\n           ( navigator.maxTouchPoints > 0 ) ||\n           ( navigator.msMaxTouchPoints > 0 );\n  }\n  const dndBackend = isTouchScreen() ? TouchBackend : HTML5Backend;\n  /***\n   * Main render part of the ultimatum experiment\n   *\n   */\n  return (\n    <Fragment>\n      {state.dialogIsOpen && renderDialog() }\n      <Grid container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='ultimatum-container'>\n        <Grid item>\n          <Typography variant=\"body2\">{t(text)}</Typography>\n        </Grid>\n        {/* Boxes container */}\n        <Grid item container spacing={2} alignItems='stretch' justifyContent='space-between' className='boxes-container'>\n          <DndProvider backend={dndBackend} options={isTouchScreen()?{enableMouseEvents: true}:{}}>\n            {boxes.map(({name, amount, accepts}, index) => (\n              <RepositoryBox\n                accept={accepts}\n                name={name}\n                amount={amount}\n                onDrop={(item) => handleDrop(name, item)}\n                key={index}\n                person={shuffledPersons[personIndex]}\n                personsPrefix={personsPrefix}\n              />\n            ))}\n          </DndProvider>\n        </Grid>\n        {/* Labels and actions */}\n        <Grid item container direction='row' justifyContent=\"space-around\" alignItems='center'>\n          <Grid item xs={4}><Grid container direction='column' justifyContent=\"space-around\" alignItems='center'>\n            <Typography  variant='body2'>{t('ultimatum.trial_label',{trial:state.trial+1, trials:trials})}</Typography>\n          </Grid></Grid>\n\n          <Grid item xs={4}><Grid container direction='column' justifyContent=\"space-around\" alignItems='center'>\n            <Button size='large' color={canFinishTrial()?'primary':'default'} variant={canFinishTrial()?'contained':'outlined'} onClick={finishTrialAction}>{t('ultimatum.finish.button')}</Button>\n          </Grid></Grid>\n\n          <Grid item xs={4}><Grid container direction='column' justifyContent=\"space-around\" alignItems='center'>\n            <Typography variant=\"body2\">{t('ultimatum.total_points',{score:state.totalScore})}</Typography>\n          </Grid></Grid>\n        </Grid>\n      </Grid>\n    </Fragment>\n  );\n}\n","import React, { useEffect, useState, Fragment, useCallback } from 'react';\nimport { Typography, Button, Grid, Dialog, DialogTitle, DialogContent,\n          DialogContentText, DialogActions,\n          Container,\n          CircularProgress,\n          Box} from '@material-ui/core';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { TouchBackend } from 'react-dnd-touch-backend';\nimport { useTranslation } from 'react-i18next';\nimport { shuffle } from './utils/random';\nimport { ItemTypes, RepositoryBox } from './components/allotmentBox';\n\n//css\nimport \"./dictator.css\";\n\nexport default function Dictator({ content, onStore, onNotification }) {\n\n  const { t } = useTranslation();\n  const { tokens, trials, useOpponentTypes, opponentTypes, text, personsPrefix, persons } = content;\n\n  //const theme = (languages[lang].direction === 'rtl') ? rtlTheme : ltrTheme;\n  //const classes = useStyles(theme);\n\n  const [state, setState] = useState({\n    finished: false,\n    trial: null,\n    totalScore: 0,\n    dialogIsOpen: false,\n    trialResponses: [],\n    taskStartedAt: Date.now(),\n    collectionState: 0 // 0: not started, 1: started, 2: done\n  });\n  const [boxes, setBoxes] = useState(\n    [\n      { name: ItemTypes.OPPONENT, amount: 0, accepts: [ItemTypes.POT, ItemTypes.PLAYER] },\n      { name: ItemTypes.POT, amount: tokens, accepts: [ItemTypes.PLAYER, ItemTypes.OPPONENT] },\n      { name: ItemTypes.PLAYER, amount: 0, accepts: [ItemTypes.POT, ItemTypes.OPPONENT] },\n    ]\n  )\n  const [shuffledPersons, setShuffledPersons] = useState(undefined);\n  const [matchmakingCompleted, setMatchmakingCompleted] = useState(false);\n  const [matchmakingTimer, setMatchmakingTimer] = useState(null);\n\n  // on mount and unmount\n  useEffect(() => {\n    // Nothing yet\n  }, []);\n\n  // when finished, store responses and proceed to the next view\n  useEffect(() => {\n    if (state.finished && !state.dialogIsOpen) {\n      const now = Date.now()\n      // add timestamps\n      let response = { trials: state.trialResponses };\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = now;\n      response.taskDuration = now - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n  }, [state, onStore, content]);\n\n  useEffect(() => {\n    // When dialog opens, start the timer\n    if (state.dialogIsOpen) {\n      setMatchmakingCompleted(false);\n      const timer = setTimeout(() => {\n        setMatchmakingCompleted(true);\n      }, 5000);\n      setMatchmakingTimer(timer);\n    } else {\n      // When dialog closes, clear the timer and reset the state\n      if (matchmakingTimer) {\n        clearTimeout(matchmakingTimer);\n      }\n      setMatchmakingCompleted(false);\n    }\n\n    // Cleanup function\n    return () => {\n      if (matchmakingTimer) {\n        clearTimeout(matchmakingTimer);\n      }\n    };\n  }, [state.dialogIsOpen]); // Only run when dialog opens/closes\n\n /**\n   * Filters persons to return only the persons that have any of the given tags\n   * @param {*persons} persons persons to be filtered by their tags\n   * @param {*} tags tags used to select the persons which their tags has at least one the tags given\n   * @returns\n   */\n  const filterPersonsByTags = (persons, tags) => {\n    if (useOpponentTypes !== true)\n      return persons;\n    const filterredPersons = persons.filter(person => { return checkPersonHasTags(person, tags) });\n      return filterredPersons;\n  }\n\n  /**\n   * Checks if the given person has any of the the given tags\n   * @returns true if the person has any of the given tags\n   */\n  function checkPersonHasTags(person, tags) {\n    var checkResult = false;\n    for (let i = 0; i < person.tags.length; i++) {\n      if (tags.inclue(person.tags[i]))\n        checkResult = true;\n    }\n    return checkResult;\n  }\n\n  const finishTrialAction = () => {\n    canFinishTrial() ? newTrial() : onNotification(t('dictator.errors.required'));\n  }\n\n  /***\n   * this function shows if this trial can be finished by the participant\n   */\n  const canFinishTrial = () => {\n    let result = false;\n    boxes.forEach((box) => {\n      if (box.name === ItemTypes.POT && box.amount === 0)\n        result = true;\n    });\n    return result;\n  }\n\n  /***\n   * Activated when player has droped a token (item that is dragged and name of the dropped box) by setting setBoxes\n   */\n  const handleDrop = useCallback(\n    (name, item) => {\n      // item is the entity that is dropped and has {name, boxName}\n      // name is the name of the repositoryBox that entity has been dropped into\n      const fromBox = item.boxName;\n      const destBox = name;\n      //console.log('dropped on: ',destBox);\n      //console.log('from : ',fromBox);\n      setBoxes(boxes.map(item => {\n        if (item.name === fromBox) {\n          return { ...item, amount: item.amount - 1 };\n        } else if (item.name === destBox) {\n          return { ...item, amount: item.amount + 1 };\n        } else {\n          return item;\n        }\n      }));\n    },\n    [boxes],\n  )\n\n  /***\n   * Starts the task for the first time\n   */\n  const startTask = () => {\n    let filterredPersons = filterPersonsByTags(persons, opponentTypes);\n    setShuffledPersons(shuffle(filterredPersons));\n    setState({\n      ...state,\n      trial: 0,\n      trialResponses: [],\n      taskStartedAt: Date.now() //timestamp\n    });\n  }\n\n  /**\n   * Store trial responses, then proceed to the next trial or finish the game\n   */\n  const newTrial = () => {\n    if (!canFinishTrial()) {\n      console.log('it should never come to this, because before calling newTrial, canFinishTrial has been checked!!!!');\n      onNotification(t('dictator.errors.required'));\n      return;\n    }\n    const playerShare = boxes.find(box => box.name === ItemTypes.PLAYER).amount;\n    setState({\n      ...state,\n      trialResponses: [...state.trialResponses, {\n        trial: state.trial,\n        playerShare: playerShare,\n        opponentShare: tokens - playerShare,\n        opponent: shuffledPersons[personIndex]\n      }],\n      finished: (state.trial >= trials - 1),\n      trial: state.trial + 1,\n      totalScore: state.totalScore + playerShare,\n      dialogIsOpen: true,\n    });\n\n    // when the trial finished the tokens in boxes should reset\n    setBoxes(\n      [\n        { name: ItemTypes.OPPONENT, amount: 0, accepts: [ItemTypes.POT, ItemTypes.PLAYER] },\n        { name: ItemTypes.POT, amount: tokens, accepts: [ItemTypes.PLAYER, ItemTypes.OPPONENT] },\n        { name: ItemTypes.PLAYER, amount: 0, accepts: [ItemTypes.POT, ItemTypes.OPPONENT] },\n      ]\n    );\n  }\n\n  if (state.trial === null) {\n    console.log('dictator starting...');\n    startTask();\n    return;\n  }\n\n  // If persons are less than the number of trials it should fill the array\n  var personIndex = state.trial;\n  if (state.trial !== null && state.trial >= shuffledPersons.length) {\n    personIndex = state.trial % shuffledPersons.length;\n  }\n\n  /**\n   * render a dialog that shows trial summary.\n   */\n  const renderDialog = () => {\n    return (\n      <Dialog\n        open={state.dialogIsOpen}\n        onClose={() => setState({ ...state, dialogIsOpen: false })}\n        disableEscapeKeyDown\n        aria-labelledby=\"dialog-title\"\n        className='margined-dialog'\n        id='collect-dialog'\n      >\n        <DialogTitle id=\"dialog-title\"><b>{t('dictator.dialog_title')}</b></DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            {t('dictator.trial_score_report', { score: state.trialResponses[state.trialResponses.length - 1].playerShare })}\n            {t('dictator.total_score_report', { score: state.trialResponses.map(r => r.playerShare).reduce((a, b) => a + b, 0) })}\n            <Container id=\"matchmaking-container\" style={{\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n              justifyContent: 'center',\n              minHeight: '200px' // Gives some vertical space for centering\n            }}>\n              <Box id=\"matchmaking-loading\" className={matchmakingCompleted ? 'hide' : ''}>\n                {/* Center the spinner horizontally using container styles */}\n                <Box display=\"flex\" justifyContent=\"center\" width=\"100%\">\n                  <CircularProgress />\n                </Box>\n                <Box mt={2}>\n                  <Typography variant='body1'>{t('dictator.waiting_for_opponent')}</Typography>\n                </Box>\n              </Box>\n              <Box id=\"matchmaking-result\" className={matchmakingCompleted ? '' : 'hide'}>\n                <Typography variant='body1' style={{paddingBottom: '16px'}}>{t('dictator.matchmaking_result')}</Typography>\n                <Typography variant='body1' style={{paddingBottom: '16px'}}>{t('dictator.matchmaking_result_text')}</Typography>\n\n              </Box>\n            </Container>\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setState({ ...state, dialogIsOpen: false })} disabled={!matchmakingCompleted} color=\"primary\" autoFocus size='large'>\n            {state.trial <= trials - 1 ? t('dictator.next_trial') : t('next')}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n\n  const isTouchScreen = () => {\n    return ( 'ontouchstart' in window ) ||\n           ( navigator.maxTouchPoints > 0 ) ||\n           ( navigator.msMaxTouchPoints > 0 );\n  }\n  const dndBackend = isTouchScreen() ? TouchBackend : HTML5Backend;\n\n  /***\n   * Main render part of the dictator experiment\n   *\n   */\n  return (\n    <Fragment>\n      {state.dialogIsOpen && renderDialog() }\n      <Grid container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start'>\n        <Grid item>\n          <Typography variant=\"body2\">{t(text)}</Typography>\n        </Grid>\n        {/* Boxes container */}\n        <Grid item container spacing={2} alignItems='stretch' justifyContent='space-between' className='boxes-container'>\n          <DndProvider backend={dndBackend} options={isTouchScreen()?{enableMouseEvents: true}:{}}>\n            {boxes.map(({name, amount, accepts}, index) => (\n              <RepositoryBox\n                accept={accepts}\n                name={name}\n                amount={amount}\n                onDrop={(item) => handleDrop(name, item)}\n                key={index}\n                person={shuffledPersons[personIndex]}\n                personsPrefix={personsPrefix}\n              />\n            ))}\n          </DndProvider>\n        </Grid>\n        {/* Labels and actions */}\n        <Grid item container direction='row' justifyContent=\"space-around\" alignItems='center'>\n          <Grid item xs={4}><Grid container direction='column' justifyContent=\"space-around\" alignItems='center'>\n            <Typography variant='body2'>{t('dictator.trial_label',{trial:state.trial+1, trials:trials})}</Typography>\n          </Grid></Grid>\n\n          <Grid item xs={4}><Grid container direction='column' justifyContent=\"space-around\" alignItems='center'>\n            <Button size='large' color='primary' variant='outlined' onClick={finishTrialAction}>{t('dictator.finish.button')}</Button>\n          </Grid></Grid>\n\n          <Grid item xs={4}><Grid container direction='column' justifyContent=\"space-around\" alignItems='center'>\n            <Typography variant=\"body2\">{t('dictator.total_points',{score:state.totalScore})}</Typography>\n          </Grid></Grid>\n        </Grid>\n      </Grid>\n    </Fragment>\n  );\n}","import React, { useState, useEffect, Fragment } from 'react';\n\n\nimport { Button, Grid, Divider } from '@material-ui/core';\n\nimport {\n  Star,\n  RadioButtonUnchecked as Circle,\n  Add,\n  Check as Correct,\n  Clear as Incorrect\n} from '@material-ui/icons';\n\nimport Markdown from 'react-markdown/with-html';\n\nimport { shuffle } from './utils/random';\nimport { useTranslation } from 'react-i18next';\n\nimport './taskswitch.css';\n\n//FIXME these are realtime variables, so I keep them out of the component's state.\nlet clock\n\nexport default function TaskSwitch({ content, onStore, onProgress }) {\n\n  const { t } = useTranslation();\n  const { text, trials, stimuliDuration, fixationDuration, timeoutsBeforeReset, feedbackDuration } = content;\n\n  const [state, setState] = useState({\n    finished: false,\n    trialResponses: [],\n    taskStartedAt: null,\n    taskFinishedAt: null,\n    taskDuration: null,\n    step: null,\n    type: null,\n    correct: null,\n    stimuli: null,\n    trialStartedAt: null,\n    respondedAt: null,\n    trial: null,\n    timeouts: 0\n  })\n\n\n  useEffect(() => {\n    /**\n     * callback to handle keypress events\n     */\n    const handleKeyPress = (event) => {\n      const { key, keyCode } = event;\n\n      // press space to start the task\n      if (state.trial === null && (keyCode === 32 || key === ' ')) {\n        startTask()\n        return;\n      }\n\n      // ignore invalid keys and invalid trial steps\n      if (state.step !== 'stimuli' || !['ArrowLeft', 'ArrowRight'].includes(key))\n        return;\n\n      const current = state.stimuli[state.trial - 1];\n      let choice = undefined;\n\n      let empty = (key==='ArrowLeft' && current.startsWith('right')) || \n                  (key==='ArrowRight' && current.startsWith('left'));\n      let go = (key==='ArrowLeft' && current.startsWith('left-go')) ||\n              (key==='ArrowRight' && current.startsWith('right-go'));\n\n      choice = current.endsWith('top') ? \n          (go?trials.top.choices.go : (empty?'empty':trials.top.choices.nogo) )\n          :\n          (go?trials.bottom.choices.go : (empty?'empty':trials.bottom.choices.nogo)) ;\n      handleResponse(choice)\n    }\n    \n    window.addEventListener('keydown', handleKeyPress);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n\n  }, [state] // FIXME add missin dependencies\n  );\n\n  useEffect(() => {\n    // generate stimuli stream\n    if (state.stimuli===null) {\n      let stim = [...Array(trials.total).keys()].map((i,t) => {\n        if(i<trials.top.total){\n          if(i<trials.top.leftGo)\n            return 'left-go-top'\n          if (i<trials.top.go)\n            return 'right-go-top'\n          if (i<trials.top.go + (trials.top.left - trials.top.leftGo))\n            return 'left-nogo-top'\n          return 'right-nogo-top'\n        }else{\n          if(i<trials.top.total+trials.bottom.leftGo)\n            return 'left-go-bottom'\n          if(i<trials.top.total+trials.bottom.go)\n            return 'right-go-bottom'\n          if (i<trials.top.total+ trials.bottom.go + (trials.bottom.left - trials.bottom.leftGo))\n            return 'left-nogo-bottom'\n          return 'right-nogo-bottom'\n        }\n      }); \n      setState({...state, stimuli: shuffle(stim)});\n    }\n  }, [state]);\n\n  useEffect(() => {\n    // # FIXATION\n    if (state.step === 'fixation') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        setState({\n          ...state,\n          trial: state.trial + 1,\n          trialStartedAt: Date.now(),\n          step: 'stimuli'\n        });\n      }, fixationDuration);\n    }\n\n    // # FEEDBACK\n    if (state.step === 'feedback') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        setState({ ...state, step: 'fixation' })\n      }, feedbackDuration)\n    }\n\n    if (state.step === 'stimuli') {\n      clearTimeout(clock);\n\n      if (state.timeouts < timeoutsBeforeReset) {\n        clock = setTimeout(() => {\n          setState({\n            ...state,\n            trialResponses: [...state.trialResponses, {\n              'trial': state.trial,\n              'stimuli': state.stimuli[state.trial - 1],\n              'choice': null,\n              'correct': null,\n              'respondedAt': null,\n              'trialStartedAt': state.trialStartedAt,\n              'rt': null\n            }],\n            timeouts: state.timeouts + 1,\n            correct: false,\n            step: (feedbackDuration > 0) ? 'feedback' : 'fixation'\n          });\n        }, stimuliDuration)\n      } else {\n        setState({ ...state, step: 'reset', timeouts: 0 })\n      }\n    }\n\n\n    onProgress(100.0 * state.trial / trials.total)\n\n    if (state.trial > trials.total) {\n      console.log('------------ FINISHED -------')\n      onProgress(100.0)\n      setState({ ...state, finished: true, taskFinishedAt: Date.now() })\n    }\n\n    // on finish\n    if (state.finished) {\n      clearTimeout(clock);\n\n      // timestamps\n      let response = { trials: state.trialResponses };\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = state.taskFinishedAt;\n      response.taskDuration = state.taskFinishedAt - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n\n  }, [state]);\n\n\n  const startTask = () => {\n    setState({\n      ...state,\n      trialResponses: [],\n      trial: 0,\n      timeouts: 0,\n      step: 'fixation',\n      taskStartedAt: Date.now()\n    })\n  }\n\n  const handleResponse = (choice) => {\n    const respondedAt = Date.now(); //timestamp\n\n    clearTimeout(clock);\n\n    const _correct = getCorrect(state.stimuli[state.trial - 1]);\n    console.log('correct answer = %s for choice %s , in stimuli %o', _correct, choice, state.stimuli[state.trial - 1]);\n\n    setState({\n      ...state,\n      correct: _correct === choice,\n      respondedAt: respondedAt,\n      trialResponses: [...state.trialResponses, {\n        'trial': state.trial,\n        'stimuli': state.stimuli[state.trial - 1],\n        'choice': choice,\n        'correct': _correct === choice,\n        'respondedAt': respondedAt,\n        'trialStartedAt': state.trialStartedAt,\n        'rt': respondedAt - state.trialStartedAt\n      }],\n      step: (feedbackDuration > 0) ? 'feedback' : 'fixation'\n    })\n  }\n\n  function getCorrect(stimuli){\n    const choices = stimuli.endsWith('top') ? trials.top.choices : trials.bottom.choices;\n    return stimuli.includes('nogo') ? 'empty' : choices.go;\n  }\n\n  const renderStimulus = (stimulus, selectable = true) => {\n    return (\n      <Fragment>\n      {stimulus==='empty' && selectable && <div onClick={() => handleResponse('empty')} className='ts-stimulus'> </div>}\n      {stimulus==='empty' && !selectable && <div className='ts-stimulus ts-inactive'> </div>}\n      {stimulus==='star' && <div onClick={() => handleResponse('star')} className='ts-stimulus'><Star fontSize='large' className='yellow' /></div>}\n      {stimulus==='circle' && <div onClick={() => handleResponse('circle')} className='ts-stimulus'><Circle fontSize='large' className='blue' /></div>}\n      {stimulus==='blue-star' && <div onClick={() => handleResponse('blue-star')} className='ts-stimulus'><Star fontSize='large' className='blue' /></div>}\n      {stimulus==='yellow-circle' && <div onClick={() => handleResponse('yellow-circle')} className='ts-stimulus'><Star fontSize='large' className='yellow' /></div>}\n      </Fragment>\n    );\n  }\n\n  /**\n   * \n   * @param {*} trialType type of trial\n   * @param {*} pos 0 for top, 1 for bottom\n   * @returns renders a row of stimuli\n   */\n  const renderStimuliRow = (trialType, pos) =>{\n    const choices = trialType.endsWith('top') ? trials.top.choices : trials.bottom.choices;\n    return (\n      <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        {pos===0 && trialType.endsWith('bottom') && renderStimulus('empty',false)}\n        {pos===0 && trialType.endsWith('top') && trialType.startsWith('left-go') && renderStimulus(choices.go)}\n        {pos===0 && trialType.endsWith('top') && trialType.startsWith('left-nogo') && renderStimulus(choices.nogo)}\n        {pos===0 && trialType.endsWith('top') && (!trialType.includes('left-go')  && !trialType.includes('left-nogo')) && renderStimulus('empty')}\n        {pos===1 && trialType.endsWith('top') && renderStimulus('empty',false)}\n        {pos===1 && trialType.endsWith('bottom') && trialType.startsWith('left-go') && renderStimulus(choices.go)}\n        {pos===1 && trialType.endsWith('bottom') && trialType.startsWith('left-nogo') && renderStimulus(choices.nogo)}\n        {pos===1 && trialType.endsWith('bottom') && (!trialType.startsWith('left-go') && !trialType.startsWith('left-nogo')) && renderStimulus('empty')}\n        <Divider orientation='vertical' flexItem />\n        {pos===0 && trialType.endsWith('bottom') && renderStimulus('empty',false)}\n        {pos===0 && trialType.endsWith('top') && trialType.startsWith('right-go') && renderStimulus(choices.go)}\n        {pos===0 && trialType.endsWith('top') && trialType.startsWith('right-nogo') && renderStimulus(choices.nogo)}\n        {pos===0 && trialType.endsWith('top') && (!trialType.includes('right-go')  && !trialType.includes('right-nogo')) && renderStimulus('empty')}\n        {pos===1 && trialType.endsWith('top') && renderStimulus('empty',false)}\n        {pos===1 && trialType.endsWith('bottom') && trialType.startsWith('right-go') && renderStimulus(choices.go)}\n        {pos===1 && trialType.endsWith('bottom') && trialType.startsWith('right-nogo') && renderStimulus(choices.nogo)}\n        {pos===1 && trialType.endsWith('bottom') && (!trialType.startsWith('right-go') && !trialType.startsWith('right-nogo')) && renderStimulus('empty')}\n      </Grid>\n    )\n  }\n  const renderStimuli = (trialType) => {\n    //console.log(\"renderStimuli: \",trialType);\n    if(!trialType)\n      return;\n    return (\n      <Grid item container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='ts-stimulus-container'>\n        {renderStimuliRow(trialType,0)}\n        <Grid item> <Divider orientation='horizontal' /> </Grid>\n        {renderStimuliRow(trialType,1)}\n      </Grid>\n    )\n  }\n\n  const renderFeedback = () => {\n    return (\n      <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        {state.correct && <Correct fontSize='large' className='correct ts-icon' />}\n        {!state.correct && <Incorrect fontSize='large' className='incorrect ts-icon' />}\n      </Grid>\n    )\n  }\n\n  const renderFixation = () => {\n    return (\n      <Grid item container direction=\"row\" justifyContent=\"space-around\" alignItems=\"center\">\n        <Add fontSize='large' className='fixation ts-icon' />\n      </Grid>\n    );\n  }\n\n  // show reset screen on timeouts reaching a threshold\n  if (state.step === 'reset') {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('taskswitch.too_many_timeouts')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' color='secondary' onClick={() => startTask()}>{t('taskswitch.restart')}</Button>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  // start screen\n  if (state.trial === null) {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('taskswitch.are_you_ready')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' onClick={() => startTask()}>{t('taskswitch.start')}</Button>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  return (\n    <Grid item container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='ts-container'>\n      <Grid item>\n        <Markdown source={t(text)} escapeHtml={false} className='markdown-text' />\n      </Grid>\n\n      {state.step === 'stimuli' && renderStimuli(state.stimuli[state.trial - 1])}\n      {state.step === 'feedback' && renderFeedback()}\n      {state.step === 'fixation' && renderFixation()}\n\n    </Grid>\n  );\n}\n","import React, { useState, useEffect, Fragment } from 'react';\n\n\nimport { Button, Grid, Divider } from '@material-ui/core';\n\nimport {\n  Star,\n  RadioButtonUnchecked as Circle,\n  Add,\n  Check as Correct,\n  Clear as Incorrect\n} from '@material-ui/icons';\n\nimport Markdown from 'react-markdown/with-html';\n\nimport { shuffle } from './utils/random';\nimport { useTranslation } from 'react-i18next';\n\nimport './simplified_taskswitch.css';\n\n//FIXME these are realtime variables, so I keep them out of the component's state.\nlet clock\n\nexport default function SimplifiedTaskSwitch({ content, onStore, onProgress }) {\n\n  const { t } = useTranslation();\n  const { text, trials, stimuliDuration, fixationDuration, timeoutsBeforeReset, feedbackDuration } = content;\n\n  const [state, setState] = useState({\n    finished: false,\n    trialResponses: [],\n    taskStartedAt: null,\n    taskFinishedAt: null,\n    taskDuration: null,\n    step: null,\n    type: null,\n    correct: null,\n    stimuli: null,\n    trialStartedAt: null,\n    respondedAt: null,\n    trial: null,\n    timeouts: 0\n  })\n\n\n  useEffect(() => {\n    console.log('useEffect -> before handleKeyPress, it has no dependency');\n    /**\n     * callback to handle keypress events\n     */\n    const handleKeyPress = (event) => {\n      const { key, keyCode } = event;\n\n      // press space to start the task\n      if (state.trial === null && (keyCode === 32 || key === ' ')) {\n        startTask()\n        return;\n      }\n\n      // ignore invalid keys and invalid trial steps\n      if (state.step !== 'stimuli' || !['ArrowLeft', 'ArrowRight'].includes(key))\n        return;\n\n      const current = state.stimuli[state.trial - 1];\n      let choice = undefined;\n\n      if (key === 'ArrowLeft')\n        choice = current.pos > 1 ? 2 : 0;\n      if (key === 'ArrowRight')\n        choice = current.pos > 1 ? 3 : 1;\n\n      handleResponse(choice)\n\n    }\n    window.addEventListener('keydown', handleKeyPress);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n  }, [state] // FIXME add missin dependencies\n  );\n\n  useEffect(() => {\n\n    console.log(state.stimuli);\n    // generate stimuli stream : stimuli:{pos: [0 top-left, 1 top-right, 2 bott-left, 3 bott-right]  , figure:'figureA/B' , color: 'blue/yellow }\n    if (state.stimuli === null) {\n      let stim = [...Array(trials.total).keys()].map((i, t) => {\n        let stimuliProperties = {\n          pos: 0, // 0 top-left, 1 top-right, 2 bott-left, 3 bott-right]\n          figure: 0, // 0 'figureA' , 1 'figureB' color: 'blue/yellow }\n          color: 0 // 0 colorA , 1 colorB\n        };\n        if (i < trials.typeA) {\n          stimuliProperties.pos = (i < trials.left) ? 0 : 1;\n          stimuliProperties.figure = i < trials.figureA ? 0 : 1;\n          stimuliProperties.color = i < trials.colorA ? 0 : 1;\n        } else {\n          stimuliProperties.pos = (i - trials.typeA) < trials.left ? 2 : 3;\n          stimuliProperties.figure = (i - trials.typeA) < trials.figureA ? 0 : 1;\n          stimuliProperties.color = (i - trials.typeA) < trials.colorA ? 0 : 1;\n        }\n        return stimuliProperties;\n      })\n      setState({ ...state, stimuli: shuffle(stim) });\n    }\n  }, [state.stimuli]);\n\n  useEffect(() => {\n    // # FIXATION\n    if (state.step === 'fixation') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        setState({\n          ...state,\n          trial: state.trial + 1,\n          trialStartedAt: Date.now(),\n          step: 'stimuli'\n        });\n      }, fixationDuration);\n    }\n\n    // # FEEDBACK\n    if (state.step === 'feedback') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        setState({ ...state, step: 'fixation' })\n      }, feedbackDuration)\n    }\n\n    if (state.step === 'stimuli') {\n      clearTimeout(clock);\n\n      if (state.timeouts < timeoutsBeforeReset) {\n        clock = setTimeout(() => {\n          setState({\n            ...state,\n            trialResponses: [...state.trialResponses, {\n              'trial': state.trial,\n              'stimuli': state.stimuli[state.trial - 1],\n              'choice': null,\n              'correct': null,\n              'respondedAt': null,\n              'trialStartedAt': state.trialStartedAt,\n              'rt': null\n            }],\n            timeouts: state.timeouts + 1,\n            correct: false,\n            step: (feedbackDuration > 0) ? 'feedback' : 'fixation'\n          });\n        }, stimuliDuration)\n      } else {\n        setState({ ...state, step: 'reset', timeouts: 0 })\n      }\n    }\n\n\n    onProgress(100.0 * state.trial / trials.total)\n\n    if (state.trial > trials.total) {\n      console.log('------------ FINISHED -------')\n      onProgress(100.0)\n      setState({ ...state, finished: true, taskFinishedAt: Date.now() })\n    }\n\n    // on finish\n    if (state.finished) {\n      clearTimeout(clock);\n\n      // timestamps\n      let response = { trials: state.trialResponses };\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = state.taskFinishedAt;\n      response.taskDuration = state.taskFinishedAt - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n\n  }, [state]);\n\n\n  const startTask = () => {\n    setState({\n      ...state,\n      trialResponses: [],\n      trial: 0,\n      timeouts: 0,\n      step: 'fixation',\n      taskStartedAt: Date.now()\n    })\n  }\n\n  const handleResponse = (choice) => {\n    const respondedAt = Date.now(); //timestamp\n\n    clearTimeout(clock);\n\n    const _correct = getCrorrectFromStimuli(state.stimuli[state.trial - 1]);\n    console.log('correct answer = %d for choice %d , in stimuli %o', _correct, choice, state.stimuli[state.trial - 1]);\n\n    setState({\n      ...state,\n      correct: _correct === choice,\n      respondedAt: respondedAt,\n      trialResponses: [...state.trialResponses, {\n        'trial': state.trial,\n        'stimuli': state.stimuli[state.trial - 1],\n        'type': state.stimuli[state.trial - 1].pos < 2 ? 0 : 1,\n        'choice': choice,\n        'correct': _correct === choice,\n        'respondedAt': respondedAt,\n        'trialStartedAt': state.trialStartedAt,\n        'rt': respondedAt - state.trialStartedAt\n      }],\n      step: (feedbackDuration > 0) ? 'feedback' : 'fixation'\n    })\n  }\n\n  function getCrorrectFromStimuli(stimuli) {\n    if (stimuli.pos < 2) {\n      if (stimuli.figure === 0)\n        return stimuli.pos;\n      return 1 - stimuli.pos;\n    }\n    if (stimuli.pos > 1) {\n      if (stimuli.color === 0)\n        return stimuli.pos;\n      return stimuli.pos === 2 ? 3 : 2;\n    }\n  }\n\n  const renderStimulus = (stimulus, pos) => {\n    return (\n      <Fragment>\n        <div onClick={() => handleResponse(pos)} className='ts-stimulus'>\n          {stimulus === '0-0' && <Star fontSize='large' className='yellow' />}\n          {stimulus === '1-0' && <Circle fontSize='large' className='yellow' />}\n          {stimulus === '0-1' && <Star fontSize='large' className='blue' />}\n          {stimulus === '1-1' && <Circle fontSize='large' className='blue' />}\n        </div>\n      </Fragment>\n    );\n  }\n\n  const renderStimuliRow = (draw, stimuli, i, j) => {\n    if (draw === false)\n      return (\n        <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n          {renderStimulus('empty', i)}\n          <Divider orientation='vertical' flexItem />\n          {renderStimulus('empty', j)}\n        </Grid>\n      );\n    return (\n      <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        {stimuli?.pos === i && renderStimulus(stimuli.figure + '-' + stimuli.color, stimuli.pos)}\n        {stimuli?.pos === j && renderStimulus('empty', i)}\n        <Divider orientation='vertical' flexItem />\n        {stimuli?.pos === i && renderStimulus('empty', j)}\n        {stimuli?.pos === j && renderStimulus(stimuli.figure + '-' + stimuli.color, stimuli.pos)}\n      </Grid>\n    )\n  }\n  const renderStimuli = (stimuli) => {\n    return (\n      <Grid item container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='ts-stimulus-container'>\n        {stimuli?.pos < 2 && renderStimuliRow(true, stimuli, 0, 1)}\n        {stimuli?.pos > 1 && renderStimuliRow(false)}\n        <Grid item> <Divider orientation='horizontal' /> </Grid>\n        {stimuli?.pos < 2 && renderStimuliRow(false)}\n        {stimuli?.pos > 1 && renderStimuliRow(true, stimuli, 2, 3)}\n      </Grid>\n    )\n  }\n\n  const renderFeedback = () => {\n    return (\n      <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        {state.correct && <Correct fontSize='large' className='correct ts-icon' />}\n        {!state.correct && <Incorrect fontSize='large' className='incorrect ts-icon' />}\n      </Grid>\n    )\n\n  }\n\n  const renderFixation = () => {\n    return (\n      <Grid item container direction=\"row\" justifyContent=\"space-around\" alignItems=\"center\">\n        <Add fontSize='large' className='fixation ts-icon' />\n      </Grid>\n    );\n  }\n\n  // show reset screen on timeouts reaching a threshold\n  if (state.step === 'reset') {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('taskswitch.too_many_timeouts')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' color='secondary' onClick={() => startTask()}>{t('taskswitch.restart')}</Button>\n        </Grid>\n      </Grid>\n\n    )\n  }\n\n  // start screen\n  if (state.trial === null) {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('taskswitch.are_you_ready')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' onClick={() => startTask()}>{t('taskswitch.start')}</Button>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  return (\n    <Grid item container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='ts-container'>\n      <Grid item>\n        <Markdown source={t(text)} escapeHtml={false} className='markdown-text' />\n      </Grid>\n\n      {state.step === 'stimuli' && renderStimuli(state.stimuli[state.trial - 1])}\n      {state.step === 'feedback' && renderFeedback()}\n      {state.step === 'fixation' && renderFixation()}\n\n    </Grid>\n  );\n}\n","import React, { useEffect, useState, Fragment } from 'react';\nimport { Box, Button, Grid, Typography } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport Markdown from 'react-markdown/with-html';\nimport { \n  Star, \n  RadioButtonUnchecked as Circle,\n  CheckBoxOutlineBlank as Rectangle,\n  ChangeHistory as Triangle,\n  PanTool as Hand,\n  SportsSoccer as Ball,\n  Watch,\n  School,\n  FreeBreakfast as Cup,\n  Block,\n  Check as Correct,\n  Clear as Incorrect,\n  Add\n} from '@material-ui/icons';\nimport { shuffle } from './utils/random';\n\n//css\nimport \"./nback.css\";\n\n//FIXME these are realtime variables, so I keep them out of the component's state.\nlet clock\n\nexport default function NBack({content, onStore, onNotification, onProgress}) {\n  //props: title, text  \n  \n  const { t } = useTranslation();\n  \n  const { text, trials, stimuliDuration, fixationDuration, feedbackDuration, nback, stimuli } = content;\n  \n  const _noresponse = 'noresponse';\n\n  const iconFigures = {\n    star: Star,\n    circle: Circle,\n    triangle: Triangle,\n    rectangle: Rectangle,\n    hand: Hand,\n    ball: Ball,\n    watch: Watch,\n    school: School,\n    cup: Cup\n  };\n\n  const [state, setState] = useState({\n    finished: false,\n    trial: null,\n    step: null,\n    trialResponses: [],\n    taskStartedAt: null,\n    taskFinishedAt: null,\n    taskDuration: null,\n    trialStartedAt: null,\n    respondedAt: null,\n    stimuli: null\n  });\n\n  useEffect(() => {\n    /**\n     * callback to handle keypress events\n     */\n    const handleKeyPress = (event) => {\n      const { key, keyCode } = event;\n\n      // press space to start the task\n      if (state.trial === null && (keyCode===32 || key===' ')) {\n        startTask()\n        return;\n      }\n\n      // ignore invalid keys and invalid trial steps\n      if (state.step !== 'stimuli' || !(keyCode === 32 || key === ' '))\n        return;\n\n      const current = state.stimuli[state.trial - 1];\n      handleResponse(current);\n    }\n    window.addEventListener('keydown', handleKeyPress);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n\n  },[state]);\n\n  useEffect(() => {\n    // console.log(\"use effect for generating stimuli: \", state.stimuli);\n    // generate stimuli stream\n    if (state.stimuli===null) {\n      let figureIndex = 0;\n      let figureTotal =0;\n      let stim = [...Array(trials).keys()].map((i,t) => {\n        let figure = stimuli[figureIndex];\n        if(figureTotal<figure.amount){\n          figureTotal++;\n          return {\"type\": figure.type, \"name\": figure.name};\n        }else{\n          figureIndex++;\n          figureTotal = 1;\n          if(figureIndex>=stimuli.length){\n            console.log('error in figure numbers and total trials, reseting figures. Index: %d , length: %d', figureIndex, stimuli?.length);\n            figureIndex = 0;\n          }\n          figure = stimuli[figureIndex];\n          return {\"type\": figure.type, \"name\": figure.name};\n        }\n      });\n      setState({...state, stimuli: shuffle(stim)});\n    }\n\n    // check if it is finished\n    if (state.trial > trials) {\n      console.log('------------ FINISHED -------')\n      onProgress(100.0)\n      setState({ ...state, finished: true, taskFinishedAt: Date.now() })\n    }\n\n    // # FIXATION\n    if (state.step === 'fixation') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        setState({\n          ...state,\n          trial: state.trial + 1,\n          trialStartedAt: Date.now(),\n          step: 'stimuli'\n        });\n      }, fixationDuration);\n    }\n    \n    // # FEEDBACK\n    if (state.step === 'feedback') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        setState({ ...state, step: 'fixation' })\n      }, feedbackDuration)\n    }\n\n    // # STIMULI\n    if (state.step === 'stimuli') {\n      clearTimeout(clock); \n      clock = setTimeout(() => {\n        const respondedAt = Date.now(); //timestamp\n        //console.log(\"trial: %d  - stimulus: %o\",state.trial,state.stimuli[state.trial-1]);\n        const _correct = state.trial>nback ? state.stimuli[state.trial - 1]?.name!==state.stimuli[state.trial - (nback+1)]?.name : true ;\n        setState({\n          ...state,\n          correct: _correct,\n          respondedAt: respondedAt,\n          trialResponses: [...state.trialResponses, {\n            'trial': state.trial,\n            'stimuli': state.stimuli[state.trial - 1],\n            'choice': _noresponse,\n            'correct': _correct,\n            'respondedAt': respondedAt,\n            'trialStartedAt': state.trialStartedAt,\n            'rt': null\n          }],\n          step: (feedbackDuration > 0) ? 'feedback' : 'fixation'\n        });\n      }, stimuliDuration)\n    }\n\n    // Set progress\n    onProgress(100.0 * state.trial / trials)\n\n    // on finish\n    if (state.finished) {\n      clearTimeout(clock);\n\n      // timestamps\n      let response = { trials: state.trialResponses };\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = state.taskFinishedAt;\n      response.taskDuration = state.taskFinishedAt - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n\n  }, [state] );\n\n  /**\n   * Starts the task\n   */\n  const startTask = () => {\n    setState({\n      ...state,\n      trialResponses: [],\n      trial: 0,\n      step: 'fixation',\n      taskStartedAt: Date.now()\n    })\n    console.log('task started. stimuli: %o', state.stimuli);\n  }\n\n  /**\n   * handles user response\n   * @param {*} selected \n   */\n  const handleResponse = (selected) => {\n    if(state.trial<=nback){\n      return onNotification(t('nback.invalid.selection.notification'));\n    }\n\n    const respondedAt = Date.now(); //timestamp\n    clearTimeout(clock);\n\n    //console.log(\"trial: %d  - stimulus: %o  -  selected: %o\",state.trial,state.stimuli[state.trial-1],selected);\n    //if(state.trial>nback)\n    // console.log(\"stimulus1 : %o  -  stimulus2 : %o  -  comp result: %s\",state.stimuli[state.trial - 1],state.stimuli[state.trial - (nback+1)],state.stimuli[state.trial - 1].name!==state.stimuli[state.trial - (nback+1)].name);\n\n    const _correct = state.trial>nback ? state.stimuli[state.trial - 1]?.name===state.stimuli[state.trial - (nback+1)]?.name : false ;\n\n    setState({\n      ...state,\n      correct: _correct,\n      respondedAt: respondedAt,\n      trialResponses: [...state.trialResponses, {\n        'trial': state.trial,\n        'stimuli': state.stimuli[state.trial - 1],\n        'choice': selected,\n        'correct': _correct,\n        'respondedAt': respondedAt,\n        'trialStartedAt': state.trialStartedAt,\n        'rt': respondedAt - state.trialStartedAt\n      }],\n      step: (feedbackDuration > 0) ? 'feedback' : 'fixation'\n    });\n    //console.log('handle resp: %o , after setState', selected);\n  }\n\n  /**\n   * Renders the given stimulus, if type is icon it uses iconFigures to render, and if type is letter it uses Typography element\n   * @param {*} stimulus \n   * @returns html element of the stimuli\n   */\n  const renderStimulus = (stimulus) => {\n    console.log('renderFigure: ',stimulus);\n    if(stimulus===null || stimulus===undefined){\n      console.log('figure is null, state:',state);\n      return(\n        <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        </Grid>\n      )\n    }\n    if(stimulus.type===\"icon\"){\n      if(!iconFigures[stimulus.name]){\n        return(\n          <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n            <Fragment>\n              <Box onClick={() => handleResponse(stimulus)} className='single-stimulus single-stimulus-icon'>\n                <Block fontSize='large' className='yellow single-stimulus-icon' />\n              </Box>\n            </Fragment>\n          </Grid>\n        );\n      }\n      const FigureCompoentnt = iconFigures[stimulus.name];\n      return(\n        <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n          <Box onClick={() => handleResponse(stimulus)} className='single-stimulus single-stimulus-icon'>\n            <FigureCompoentnt fontSize='large' className='yellow single-stimulus-icon' />\n          </Box>\n        </Grid>\n      );\n    }else if(stimulus.type===\"letter\"){\n      return(\n        <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n          <Box onClick={() => handleResponse(stimulus)} className='single-stimulus single-stimulus-letter' textAlign=\"center\">\n            <Typography type='span' className='yellow single-stimuli-letter'> {stimulus.name} </Typography>\n          </Box>\n        </Grid>\n      );\n    }\n  }\n\n  /**\n   * Renders feedback\n   */\n  const renderFeedback = () => {\n    return (\n      <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        {state.correct && <Correct fontSize='large' className='correct single-stimulus-icon' />}\n        {!state.correct && <Incorrect fontSize='large' className='incorrect single-stimulus-icon' />}\n      </Grid>\n    )\n  }\n\n  /**\n   * Renders fixation element\n   */\n  const renderFixation = () => {\n    return (\n      <Grid item container direction=\"row\" justifyContent=\"space-around\" alignItems=\"center\">\n        <Add fontSize='large' className='stimulus-fixation single-stimulus-icon' />\n      </Grid>\n    );\n  }\n\n  // start screen\n  if (state.trial === null) {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('nback.are_you_ready')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' onClick={() => startTask()}>{t('nback.start')}</Button>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  return (\n    <Grid container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='nback-container'>\n      <Grid item>\n        <Markdown source={t(text)} escapeHtml={false} className='markdown-text' />\n      </Grid>\n      <Grid item container direction='row' justifyContent='center' alignItems='center' className='nback-main-container'>\n        {state.step === 'stimuli'  && renderStimulus(state.stimuli[state.trial-1])}\n        {state.step === 'feedback' && state.trial>nback && renderFeedback()}\n        {state.step === 'fixation' && renderFixation()}\n      </Grid>\n    </Grid>\n  );\n}\n","import React, {useState, useEffect, useCallback, Fragment, useRef} from 'react';\n\n\nimport { Button, Grid, Typography, Divider, Box} from '@material-ui/core';\n\nimport { \n  Star, \n  RadioButtonUnchecked as Circle,\n  CheckBoxOutlineBlank as Rectangle,\n  ChangeHistory as Triangle,\n  PanTool as Hand,\n  SportsSoccer as Ball,\n  Watch,\n  School,\n  FreeBreakfast as Cup,\n  Add,\n  Block,\n  Check as Correct,\n  Clear as Incorrect\n} from '@material-ui/icons';\n\nimport Markdown from 'react-markdown/with-html';\n\nimport { sample, shuffle } from './utils/random';\nimport { useTranslation } from 'react-i18next';\n\nimport './gonogoalt.css';\n\n//FIXME these are realtime variables, so I keep them out of the component's state.\nlet clock\n\nexport default function GoNoGoAlt({content, onStore, onProgress, onNotification}) {\n\n  const { t } = useTranslation();\n  const { text, trials, stimuliDuration, fixationDuration, feedbackDuration, choices } = content;\n  const _noresponse = 'noresponse';\n\n  const iconFigures = {\n    star: Star,\n    circle: Circle,\n    triangle: Triangle,\n    rectangle: Rectangle,\n    hand: Hand,\n    ball: Ball,\n    watch: Watch,\n    school: School,\n    cup: Cup\n  }\n\n  const [state, setState] = useState({\n    finished: false,\n    trial: null,\n    step: null,\n    trialResponses: [],\n    taskStartedAt: null,\n    taskFinishedAt: null,\n    taskDuration: null,\n    trialStartedAt: null,\n    respondedAt: null,\n    stimuli: null,\n    correct: null\n  })\n\n  useEffect(() => {\n    /**\n     * callback to handle keypress events\n     */\n    const handleKeyPress = (event) => {\n      const { key, keyCode } = event;\n\n      // press space to start the task\n      if (state.trial === null && (keyCode===32 || key===' ')) {\n        startTask()\n        return;\n      }\n\n      // ignore invalid keys and invalid trial steps\n      if (state.step !== 'stimuli' || !(keyCode === 32 || key === ' '))\n        return;\n\n      const current = state.stimuli[state.trial - 1];\n      handleResponse(current);\n    }\n    window.addEventListener('keydown', handleKeyPress);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress);\n    };\n\n  },[state]);\n\n\n  useEffect(() => {\n\n    // generate stimuli stream\n    if (state.stimuli===null) {\n      console.log(trials);\n      let stim = [...Array(trials.total).keys()].map((i,t) => {\n        if (i<trials.go)\n          return {\"trialType\": \"go\", \"type\": choices.go.type, \"name\":sample(choices.go.names)}\n        else\n          return {\"trialType\": \"nogo\", \"type\": choices.nogo.type, \"name\":sample(choices.nogo.names)}\n      }) \n      setState({...state, stimuli: shuffle(stim)});\n    }\n\n    // # FIXATION\n    if (state.step === 'fixation') {\n      clearTimeout(clock);  \n      clock = setTimeout(() => {\n          setState({\n            ...state, \n            trial: state.trial+1, \n            trialStartedAt: Date.now(), \n            step: 'stimuli'\n          });\n        }, fixationDuration);\n    }\n\n    // # FEEDBACK\n    if (state.step === 'feedback') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n          setState({...state, step: 'fixation'})\n        }, feedbackDuration)\n    }\n\n    // # STIMULI\n    if (state.step === 'stimuli') {\n      clearTimeout(clock);\n      clock = setTimeout(() => {\n        const respondedAt = Date.now(); //timestamp\n        console.log('stimuli step timeout. stimuli: %o', state.stimuli[state.trial-1]);\n        const _correct =  state.stimuli[state.trial-1]?.trialType?.endsWith('nogo');\n        setState({\n          ...state,\n          correct: _correct,\n          respondedAt: respondedAt,\n          trialResponses: [...state.trialResponses, {\n            'trial': state.trial,\n            'stimuli': state.stimuli[state.trial-1],\n            'choice': _noresponse,\n            'correct': _correct,\n            'respondedAt': respondedAt,\n            'trialStartedAt': state.trialStartedAt,\n            'rt': null\n          }],\n          step: (feedbackDuration>0)?'feedback':'fixation'\n        });\n      }, stimuliDuration)\n    }\n\n    // Set progress\n    onProgress(100.0 * state.trial / trials.total)\n  \n    // check if task is finished\n    if (state.trial>trials.total) {\n      console.log('------------ FINISHED -------')\n      onProgress(100.0)\n      setState({...state, finished: true, taskFinishedAt: Date.now()})\n    }\n\n    // on finish\n    if (state.finished) {\n      clearTimeout(clock);\n      \n      // timestamps\n      let response = {trials: state.trialResponses};\n      response.taskStartedAt = state.taskStartedAt;\n      response.taskFinishedAt = state.taskFinishedAt;\n      response.taskDuration = state.taskFinishedAt - state.taskStartedAt;\n      onStore({\n        'view': content,\n        'response': response\n      }, true); // store + next\n    }\n\n  },[state]);\n\n  const startTask = () => {\n    setState({\n      ...state, \n      trialResponses: [], \n      trial: 0, \n      step: 'fixation', \n      taskStartedAt: Date.now()\n    })\n    console.log('task started. stimuli: %o', state.stimuli)\n  }\n\n  /**\n   * handles user response\n   * @param {*} selected \n   */\n  const handleResponse = (selected) => {\n    const respondedAt = Date.now(); //timestamp\n    clearTimeout(clock);\n\n    const _correct = !state.stimuli[state.trial-1]?.trialType?.endsWith('nogo')\n\n    setState({\n      ...state,\n      correct: _correct,\n      respondedAt: respondedAt,\n      trialResponses: [...state.trialResponses, {\n        'trial': state.trial,\n        'stimuli': state.stimuli[state.trial-1],\n        'choice': selected,\n        'correct': _correct,\n        'respondedAt': respondedAt,\n        'trialStartedAt': state.trialStartedAt,\n        'rt': respondedAt - state.trialStartedAt\n      }],\n      step: (feedbackDuration>0)?'feedback':'fixation'\n    })\n  }\n\n  /**\n   * Renders the given stimulus. If type is icon it uses iconFigures to render, and if type is letter it uses Typography element\n   * @param {*} stimulus \n   * @returns html element of the stimuli\n   */\n  const renderStimulus = (stimulus) => {\n    console.log('renderStimulus: ',stimulus);\n    if(stimulus===null || stimulus===undefined){\n      console.log('figure is null, state:',state);\n      return(\n        <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        </Grid>\n      )\n    }\n    if(stimulus.type===\"icon\"){\n      if(!iconFigures[stimulus.name]){\n        return(\n          <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n            <Fragment>\n              <Box onClick={() => handleResponse(stimulus)} className='single-stimulus single-stimulus-icon'>\n                <Block fontSize='large' className='yellow single-stimulus-icon' />\n              </Box>\n            </Fragment>\n          </Grid>\n        );\n      }\n      const FigureCompoentnt = iconFigures[stimulus.name];\n      return(\n        <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n          <Box onClick={() => handleResponse(stimulus)} className='single-stimulus single-stimulus-icon'>\n            <FigureCompoentnt fontSize='large' className='yellow single-stimulus-icon' />\n          </Box>\n        </Grid>\n      );\n    }else if(stimulus.type===\"letter\"){\n      return(\n        <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n          <Box onClick={() => handleResponse(stimulus)} className='single-stimulus single-stimulus-letter' textAlign=\"center\">\n            <Typography type='span' className='yellow single-stimuli-letter'> {stimulus.name} </Typography>\n          </Box>\n        </Grid>\n      );\n    }\n  }\n\n  /**\n   * Renders feedback\n   */\n  const renderFeedback = () => {\n    return (\n      <Grid item container direction='row' justifyContent='space-around' alignItems='center'>\n        {state.correct && <Correct fontSize='large' className='correct single-stimulus-icon' />}\n        {!state.correct && <Incorrect fontSize='large' className='incorrect single-stimulus-icon' />}\n      </Grid>\n    )\n  }\n\n  /**\n   * Renders fixation element\n   */\n  const renderFixation = () => {\n    return (\n      <Grid item container direction=\"row\" justifyContent=\"space-around\" alignItems=\"center\">\n        <Add fontSize='large' className='single-stimulus-fixation single-stimulus-icon' />\n      </Grid>\n    );\n  }\n\n  // start screen\n  if (state.trial === null) {\n    return (\n      <Grid container direction='column' spacing={2} alignItems='center' justifyContent='flex-start' className='Text-container'>\n        <Grid item><Markdown source={t('gonogoalt.are_you_ready')} escapeHtml={false} className='markdown-text' /></Grid>\n        <Grid item>\n          <Button variant='outlined' onClick={() => startTask()}>{t('gonogoalt.start')}</Button>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  return (\n    <Grid item container direction='column' spacing={2} alignItems='stretch' justifyContent='flex-start' className='gonogoalt-container'>\n      <Grid item>\n        <Markdown source={t(text)} escapeHtml={false} className='markdown-text' />\n      </Grid>\n      <Grid item container direction='row' justifyContent='center' alignItems='center' className='nback-main-container'>\n        {state.step === 'stimuli'  && renderStimulus(state.stimuli[state.trial-1])}\n        {state.step === 'feedback' && renderFeedback()}\n        {state.step === 'fixation' && renderFixation()}\n      </Grid>\n    </Grid>\n  );\n\n}\n","import React, {useRef, useState, useEffect} from 'react';\n\nimport {useParams,useLocation} from 'react-router-dom';\n\nimport {Container, ThemeProvider, CssBaseline, LinearProgress, Grid, Paper, Snackbar} from '@material-ui/core';\nimport {Alert} from '@material-ui/lab';\n\nimport {ltrTheme, rtlTheme} from './utils/theme';\nimport {languages} from './utils/i18n';\n\nimport Navigation from './navigation';\nimport Text from './text';\nimport Prolific from './prolific'\nimport Matrix from './matrix';\nimport Submission from './submission';\nimport BART from './bart';\nimport GoNoGo from './gonogo';\nimport Stroop from './stroop';\nimport Ultimatum from './ultimatum';\nimport Dictator from './dictator';\nimport { useTranslation } from 'react-i18next';\nimport TaskSwitch from './taskswitch';\nimport SimplifiedTaskSwitch from './simplified_taskswitch';\nimport NBack from './nback';\nimport GoNoGoAlt from './gonogoalt';\nimport ReactGA from \"react-ga4\";\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nexport default function Study(props) {\n\n  ReactGA.initialize(\"G-YFD0H08757\");\n  const {t, i18n} = useTranslation();\n  let {lang, studyId} = useParams();\n\n  // prolific shits\n  let query = useQuery();\n\n  const theme = (languages[lang].direction === 'rtl')?rtlTheme:ltrTheme;\n  const responseIsValid = useRef(false);\n\n  const [state, setState] = useState({\n    subject: undefined,\n    session: undefined,\n    progress: 0,\n    finished: false,\n    loading: false,\n    view: {},\n    currentViewIndex: 0,\n    responses: [],\n    experiment: {}\n  })\n\n  const [notification, setNotification] = useState(undefined);\n\n  const storeData = (data, autoNext=false) => {\n    console.log('study.storeData', data);\n\n    if (autoNext) {\n      onNext();\n    }\n    \n    setState(prev => {\n      return {\n        ...prev,\n        responses: [...prev.responses, data],\n        loading: false\n      }\n    });\n  }\n\n  const updateViewProgress = (currentViewProgressPct) => {\n\n    const currentViewProgress = currentViewProgressPct  / 100.0\n\n    setState(prev => {\n      return {\n        ...prev,\n        progress: 100 * (prev.currentViewIndex + currentViewProgress) / \n                  prev.experiment.views.length\n                  \n      }\n    });\n  }\n\n  const onNext = () => {\n\n    if ((state.view.required || state.view.requiredQuestions?.length>0) && !responseIsValid.current) {\n      setNotification(t('errors.required'))\n      return;\n    }\n\n    responseIsValid.current = false;\n\n    setState(prev => {\n      const nextViewIndex = prev.currentViewIndex + 1;\n\n      if (nextViewIndex < prev.experiment.views.length) {  \n        return {\n          ...prev,\n          loading: true,\n          progress: 100 * nextViewIndex / prev.experiment.views.length,\n          view: prev.experiment.views[nextViewIndex],\n          currentViewIndex: nextViewIndex\n        }\n      } else { //finished\n        return {\n          ...prev,\n          progress: 100,\n          finished: true,\n          loading: false\n        }\n      }\n    })\n\n  }\n  \n  const renderView = (view) => {\n    \n    if (state.finished) {\n      return (\n        <Submission submission={{\n          PROLIFIC_PID: query.get('PROLIFIC_PID'),\n          STUDY_ID: query.get('STUDY_ID'),\n          SESSION_ID: query.get('SESSION_ID'),\n          startedAt: state.startedAt,\n          responses: state.responses}}\n          studyId={studyId} submissionNote={state.experiment.submissionNote} />\n      );\n    }\n\n    switch(view?.type) {\n      case 'text':\n        return <Text onStore={storeData} content={view} key={view.id} onValidate={(r) => responseIsValid.current = r} />;\n      case 'prolific':\n        return <Prolific onStore={storeData} content={view} key={view.id} onValidate={(r) => responseIsValid.current = r} />;\n      case 'bart':\n        return <BART onStore={storeData} content={view} key={view.id} />;\n      case 'gonogo': \n        return <GoNoGo onStore={storeData} onProgress={updateViewProgress} content={view} key={view.id} />;\n      case 'stroop': \n        return <Stroop onStore={storeData} content={view} key={view.id} />;\n      case 'matrix':\n        return <Matrix onStore={storeData} content={view} key={view.id} onValidate={(r) => responseIsValid.current = r} />\n      case 'ultimatum':\n        return <Ultimatum onStore={storeData} content={view} key={view.id} onNotification={setNotification} />;\n      case 'dictator':\n        return <Dictator onStore={storeData} content={view} key={view.id} onNotification={setNotification} />;\n      case 'taskswitch':\n        return <TaskSwitch onStore={storeData} onProgress={updateViewProgress} content={view} key={view.id} onNotification={setNotification} />;\n      case 'simplified_taskswitch':\n        return <SimplifiedTaskSwitch onStore={storeData} onProgress={updateViewProgress} content={view} key={view.id} onNotification={setNotification} />;\n      case 'nback':\n        return <NBack onStore={storeData} onProgress={updateViewProgress} content={view} key={view.id} onNotification={setNotification} />;\n      case 'gonogoalt':\n        return <GoNoGoAlt onStore={storeData} onProgress={updateViewProgress} content={view} key={view.id} onNotification={setNotification} />;\n      default:\n        return <div>Not Implemented!</div>;\n    }\n\n  }\n  \n  const startExperiment = (experiment) => {\n    console.log(\"starting experiment\", experiment);\n    console.log(\"prolific pid : \",query.get('PROLIFIC_PID'))\n    setState(prev => {\n      return {\n        ...prev,\n        startedAt: Date.now(),\n        experiment: experiment,\n        currentViewIndex: 0,\n        view: experiment.views[0]\n      }\n    });\n\n    if (process.env.NODE_ENV === 'production') {\n      ReactGA.send({ hitType: \"pageview\", page: window.location.pathname , title: \"window?.title\" });\n    }\n\n  }\n\n  //load experiment\n  useEffect(() => {\n    i18n.changeLanguage(lang);\n    fetch(process.env.PUBLIC_URL + `/experiments/${studyId}.json`)\n      .then(resp => resp.json())\n      .then(experiment => startExperiment(experiment));\n  },[studyId]);\n\n  //render\n  return (\n\n    <ThemeProvider theme={theme}>\n      <div dir={languages[lang].direction}>\n        <CssBaseline />\n\n        <LinearProgress variant=\"determinate\" value={state.progress} />\n\n        <Container maxWidth=\"sm\" className='study-container'>\n          <Grid container\n            spacing={2}\n            direction=\"column\"\n            justifyContent=\"flex-start\"\n            alignItems=\"stretch\"\n            className='study-grid-container'\n          >\n            <Snackbar \n              open={notification !== undefined} \n              autoHideDuration={5000} \n              onClose={() => setNotification(undefined)}\n            >\n              <Alert onClose={() => setNotification(undefined)} severity=\"error\">{t(notification)}</Alert>\n            </Snackbar>\n\n            <Grid item>\n              <Paper className='view-container'>\n              {!state.finished && state.loading && <div>{t('loading')}</div>}\n              {!state.loading && renderView(state.view)}\n              </Paper>\n            </Grid>\n            {!['gonogo','bart','stroop','ultimatum','dictator','taskswitch','simplified_taskswitch','nback','gonogoalt'].includes(state.view.type) && !state.loading &&\n            <Grid item>\n              <Navigation onNext={onNext} finished={state.finished} redirectTo={state.experiment.redirectTo} />\n            </Grid>\n            }\n          </Grid>\n        </Container>\n      </div>\n    </ThemeProvider>\n  );\n}\n","import React from 'react';\n\nexport default function About() {\n  return (\n    <div className=\"about\">\n      Hello!\n    </div>\n  );\n}\n","import React from 'react';\n\nimport {useParams, Link} from 'react-router-dom';\nimport {useTranslation} from 'react-i18next';\n\nimport {ltrTheme} from './utils/theme';\n\nimport {Grid, Paper, Button, ThemeProvider, CssBaseline, Container} from '@material-ui/core';\n\nimport Markdown from 'react-markdown/with-html';\n\nimport {languages} from './utils/i18n';\n\nimport './index.css'\n\nexport default function LanguageSelector(props) {\n\n  const { t } = useTranslation();\n  let {studyId} = useParams();\n\n\n  return (\n    <ThemeProvider theme={ltrTheme}>\n      <CssBaseline />\n\n      <Container maxWidth=\"sm\" className='study-container'>\n        <Grid item container\n          spacing={2}\n          direction=\"column\"\n          justifyContent=\"flex-start\"\n          alignItems=\"stretch\"\n        >\n          <Paper className='languages-container'>\n\n          <Markdown source={t('language_selector.text')} escapeHtml={false}  className='markdown-text' />\n          <Grid container direction='row' spacing={3} justifyContent='space-around'>\n          {Object.entries(languages).map(([key, val]) => \n            <Grid item key={key} xs={4}>\n              <Button component={Link} to={`/${studyId}/${key}`} fullWidth variant='outlined'>{val.title}</Button>\n            </Grid>\n          )}\n          </Grid>\n          </Paper>\n        </Grid>\n      </Container>\n    </ThemeProvider>\n  );\n}\n","import React, { useEffect } from 'react';\nimport ReactGA from 'react-ga4';\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\n//main components\nimport Study from './study';\nimport About from './about';\nimport LanguageSelector from './language_selector';\n\nexport default function AppRouter() {\n  useEffect(() => {\n    // Send pageview with a custom path\n    ReactGA.send({ hitType: \"pageview\", page: window.location.pathname });\n  }, [window.location.pathname]);\n\n  return (\n    <Router basename=\"/\">\n        <Switch>\n          <Route exact path=\"/\"><About /></Route>\n          <Route path=\"/:studyId/:lang\"><Study /></Route>\n          <Route path=\"/:studyId\"><LanguageSelector /></Route>\n          <Route path=\"/about\"><About /></Route>\n        </Switch>\n    </Router>\n  );\n}\n","import React, {Suspense} from 'react';\nimport ReactDOM from 'react-dom';\nimport i18n from './utils/i18n';\nimport AppRouter from './router';\nimport {I18nextProvider} from 'react-i18next';\nimport ReactGA from 'react-ga4';\n\n//css\nimport './index.css';\n\n// Initialize google analytics\nReactGA.initialize('G-YFD0H08757');\n\nReactDOM.render(\n\n  <Suspense fallback=\"loading\">\n  <I18nextProvider i18n={i18n}>\n    <AppRouter />\n  </I18nextProvider>\n  </Suspense>\n  , document.getElementById('root'));\n"],"sourceRoot":""}